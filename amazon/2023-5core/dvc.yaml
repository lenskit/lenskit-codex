stages:
  scan-bench-users:
    cmd: python ../../action.py amazon collect-ids --user -D user-ids.duckdb data
    deps:
      - data/Arts_Crafts_and_Sewing.test.csv.gz
      - data/Arts_Crafts_and_Sewing.train.csv.gz
      - data/Arts_Crafts_and_Sewing.valid.csv.gz
      - data/Automotive.test.csv.gz
      - data/Automotive.train.csv.gz
      - data/Automotive.valid.csv.gz
      - data/Baby_Products.test.csv.gz
      - data/Baby_Products.train.csv.gz
      - data/Baby_Products.valid.csv.gz
      - data/Beauty_and_Personal_Care.test.csv.gz
      - data/Beauty_and_Personal_Care.train.csv.gz
      - data/Beauty_and_Personal_Care.valid.csv.gz
      - data/Books.test.csv.gz
      - data/Books.train.csv.gz
      - data/Books.valid.csv.gz
      - data/CDs_and_Vinyl.test.csv.gz
      - data/CDs_and_Vinyl.train.csv.gz
      - data/CDs_and_Vinyl.valid.csv.gz
      - data/Cell_Phones_and_Accessories.test.csv.gz
      - data/Cell_Phones_and_Accessories.train.csv.gz
      - data/Cell_Phones_and_Accessories.valid.csv.gz
      - data/Clothing_Shoes_and_Jewelry.test.csv.gz
      - data/Clothing_Shoes_and_Jewelry.train.csv.gz
      - data/Clothing_Shoes_and_Jewelry.valid.csv.gz
      - data/Electronics.test.csv.gz
      - data/Electronics.train.csv.gz
      - data/Electronics.valid.csv.gz
      - data/Grocery_and_Gourmet_Food.test.csv.gz
      - data/Grocery_and_Gourmet_Food.train.csv.gz
      - data/Grocery_and_Gourmet_Food.valid.csv.gz
      - data/Health_and_Household.test.csv.gz
      - data/Health_and_Household.train.csv.gz
      - data/Health_and_Household.valid.csv.gz
      - data/Home_and_Kitchen.test.csv.gz
      - data/Home_and_Kitchen.train.csv.gz
      - data/Home_and_Kitchen.valid.csv.gz
      - data/Industrial_and_Scientific.test.csv.gz
      - data/Industrial_and_Scientific.train.csv.gz
      - data/Industrial_and_Scientific.valid.csv.gz
      - data/Kindle_Store.test.csv.gz
      - data/Kindle_Store.train.csv.gz
      - data/Kindle_Store.valid.csv.gz
      - data/Movies_and_TV.test.csv.gz
      - data/Movies_and_TV.train.csv.gz
      - data/Movies_and_TV.valid.csv.gz
      - data/Musical_Instruments.test.csv.gz
      - data/Musical_Instruments.train.csv.gz
      - data/Musical_Instruments.valid.csv.gz
      - data/Office_Products.test.csv.gz
      - data/Office_Products.train.csv.gz
      - data/Office_Products.valid.csv.gz
      - data/Patio_Lawn_and_Garden.test.csv.gz
      - data/Patio_Lawn_and_Garden.train.csv.gz
      - data/Patio_Lawn_and_Garden.valid.csv.gz
      - data/Pet_Supplies.test.csv.gz
      - data/Pet_Supplies.train.csv.gz
      - data/Pet_Supplies.valid.csv.gz
      - data/Software.test.csv.gz
      - data/Software.train.csv.gz
      - data/Software.valid.csv.gz
      - data/Sports_and_Outdoors.test.csv.gz
      - data/Sports_and_Outdoors.train.csv.gz
      - data/Sports_and_Outdoors.valid.csv.gz
      - data/Tools_and_Home_Improvement.test.csv.gz
      - data/Tools_and_Home_Improvement.train.csv.gz
      - data/Tools_and_Home_Improvement.valid.csv.gz
      - data/Toys_and_Games.test.csv.gz
      - data/Toys_and_Games.train.csv.gz
      - data/Toys_and_Games.valid.csv.gz
      - data/Video_Games.test.csv.gz
      - data/Video_Games.train.csv.gz
      - data/Video_Games.valid.csv.gz
    outs:
      - user-ids.duckdb
  scan-bench-items:
    cmd: python ../../action.py amazon collect-ids --item -D item-ids.duckdb data
    deps:
      - data/Arts_Crafts_and_Sewing.test.csv.gz
      - data/Arts_Crafts_and_Sewing.train.csv.gz
      - data/Arts_Crafts_and_Sewing.valid.csv.gz
      - data/Automotive.test.csv.gz
      - data/Automotive.train.csv.gz
      - data/Automotive.valid.csv.gz
      - data/Baby_Products.test.csv.gz
      - data/Baby_Products.train.csv.gz
      - data/Baby_Products.valid.csv.gz
      - data/Beauty_and_Personal_Care.test.csv.gz
      - data/Beauty_and_Personal_Care.train.csv.gz
      - data/Beauty_and_Personal_Care.valid.csv.gz
      - data/Books.test.csv.gz
      - data/Books.train.csv.gz
      - data/Books.valid.csv.gz
      - data/CDs_and_Vinyl.test.csv.gz
      - data/CDs_and_Vinyl.train.csv.gz
      - data/CDs_and_Vinyl.valid.csv.gz
      - data/Cell_Phones_and_Accessories.test.csv.gz
      - data/Cell_Phones_and_Accessories.train.csv.gz
      - data/Cell_Phones_and_Accessories.valid.csv.gz
      - data/Clothing_Shoes_and_Jewelry.test.csv.gz
      - data/Clothing_Shoes_and_Jewelry.train.csv.gz
      - data/Clothing_Shoes_and_Jewelry.valid.csv.gz
      - data/Electronics.test.csv.gz
      - data/Electronics.train.csv.gz
      - data/Electronics.valid.csv.gz
      - data/Grocery_and_Gourmet_Food.test.csv.gz
      - data/Grocery_and_Gourmet_Food.train.csv.gz
      - data/Grocery_and_Gourmet_Food.valid.csv.gz
      - data/Health_and_Household.test.csv.gz
      - data/Health_and_Household.train.csv.gz
      - data/Health_and_Household.valid.csv.gz
      - data/Home_and_Kitchen.test.csv.gz
      - data/Home_and_Kitchen.train.csv.gz
      - data/Home_and_Kitchen.valid.csv.gz
      - data/Industrial_and_Scientific.test.csv.gz
      - data/Industrial_and_Scientific.train.csv.gz
      - data/Industrial_and_Scientific.valid.csv.gz
      - data/Kindle_Store.test.csv.gz
      - data/Kindle_Store.train.csv.gz
      - data/Kindle_Store.valid.csv.gz
      - data/Movies_and_TV.test.csv.gz
      - data/Movies_and_TV.train.csv.gz
      - data/Movies_and_TV.valid.csv.gz
      - data/Musical_Instruments.test.csv.gz
      - data/Musical_Instruments.train.csv.gz
      - data/Musical_Instruments.valid.csv.gz
      - data/Office_Products.test.csv.gz
      - data/Office_Products.train.csv.gz
      - data/Office_Products.valid.csv.gz
      - data/Patio_Lawn_and_Garden.test.csv.gz
      - data/Patio_Lawn_and_Garden.train.csv.gz
      - data/Patio_Lawn_and_Garden.valid.csv.gz
      - data/Pet_Supplies.test.csv.gz
      - data/Pet_Supplies.train.csv.gz
      - data/Pet_Supplies.valid.csv.gz
      - data/Software.test.csv.gz
      - data/Software.train.csv.gz
      - data/Software.valid.csv.gz
      - data/Sports_and_Outdoors.test.csv.gz
      - data/Sports_and_Outdoors.train.csv.gz
      - data/Sports_and_Outdoors.valid.csv.gz
      - data/Tools_and_Home_Improvement.test.csv.gz
      - data/Tools_and_Home_Improvement.train.csv.gz
      - data/Tools_and_Home_Improvement.valid.csv.gz
      - data/Toys_and_Games.test.csv.gz
      - data/Toys_and_Games.train.csv.gz
      - data/Toys_and_Games.valid.csv.gz
      - data/Video_Games.test.csv.gz
      - data/Video_Games.train.csv.gz
      - data/Video_Games.valid.csv.gz
    outs:
      - item-ids.duckdb
  convert-ratings:
    foreach:
      - Arts_Crafts_and_Sewing.test
      - Arts_Crafts_and_Sewing.train
      - Arts_Crafts_and_Sewing.valid
      - Automotive.test
      - Automotive.train
      - Automotive.valid
      - Baby_Products.test
      - Baby_Products.train
      - Baby_Products.valid
      - Beauty_and_Personal_Care.test
      - Beauty_and_Personal_Care.train
      - Beauty_and_Personal_Care.valid
      - Books.test
      - Books.train
      - Books.valid
      - CDs_and_Vinyl.test
      - CDs_and_Vinyl.train
      - CDs_and_Vinyl.valid
      - Cell_Phones_and_Accessories.test
      - Cell_Phones_and_Accessories.train
      - Cell_Phones_and_Accessories.valid
      - Clothing_Shoes_and_Jewelry.test
      - Clothing_Shoes_and_Jewelry.train
      - Clothing_Shoes_and_Jewelry.valid
      - Electronics.test
      - Electronics.train
      - Electronics.valid
      - Grocery_and_Gourmet_Food.test
      - Grocery_and_Gourmet_Food.train
      - Grocery_and_Gourmet_Food.valid
      - Health_and_Household.test
      - Health_and_Household.train
      - Health_and_Household.valid
      - Home_and_Kitchen.test
      - Home_and_Kitchen.train
      - Home_and_Kitchen.valid
      - Industrial_and_Scientific.test
      - Industrial_and_Scientific.train
      - Industrial_and_Scientific.valid
      - Kindle_Store.test
      - Kindle_Store.train
      - Kindle_Store.valid
      - Movies_and_TV.test
      - Movies_and_TV.train
      - Movies_and_TV.valid
      - Musical_Instruments.test
      - Musical_Instruments.train
      - Musical_Instruments.valid
      - Office_Products.test
      - Office_Products.train
      - Office_Products.valid
      - Patio_Lawn_and_Garden.test
      - Patio_Lawn_and_Garden.train
      - Patio_Lawn_and_Garden.valid
      - Pet_Supplies.test
      - Pet_Supplies.train
      - Pet_Supplies.valid
      - Software.test
      - Software.train
      - Software.valid
      - Sports_and_Outdoors.test
      - Sports_and_Outdoors.train
      - Sports_and_Outdoors.valid
      - Tools_and_Home_Improvement.test
      - Tools_and_Home_Improvement.train
      - Tools_and_Home_Improvement.valid
      - Toys_and_Games.test
      - Toys_and_Games.train
      - Toys_and_Games.valid
      - Video_Games.test
      - Video_Games.train
      - Video_Games.valid
    do:
      cmd: >-
        python ../../action.py amazon import-bench --users=user-ids.duckdb --items=item-ids.duckdb data/${item}.csv.gz
      deps:
        - user-ids.duckdb
        - item-ids.duckdb
        - 'data/${item}.csv.gz'
      outs:
        - 'data/${item}.parquet'
  collect-stats:
    cmd: python ../../action.py run-duck-sql -f bench-stats.sql stats.duckdb
    outs:
      - stats.duckdb
    deps:
      - bench-stats.sql
      - data/Arts_Crafts_and_Sewing.test.parquet
      - data/Arts_Crafts_and_Sewing.train.parquet
      - data/Arts_Crafts_and_Sewing.valid.parquet
      - data/Automotive.test.parquet
      - data/Automotive.train.parquet
      - data/Automotive.valid.parquet
      - data/Baby_Products.test.parquet
      - data/Baby_Products.train.parquet
      - data/Baby_Products.valid.parquet
      - data/Beauty_and_Personal_Care.test.parquet
      - data/Beauty_and_Personal_Care.train.parquet
      - data/Beauty_and_Personal_Care.valid.parquet
      - data/Books.test.parquet
      - data/Books.train.parquet
      - data/Books.valid.parquet
      - data/CDs_and_Vinyl.test.parquet
      - data/CDs_and_Vinyl.train.parquet
      - data/CDs_and_Vinyl.valid.parquet
      - data/Cell_Phones_and_Accessories.test.parquet
      - data/Cell_Phones_and_Accessories.train.parquet
      - data/Cell_Phones_and_Accessories.valid.parquet
      - data/Clothing_Shoes_and_Jewelry.test.parquet
      - data/Clothing_Shoes_and_Jewelry.train.parquet
      - data/Clothing_Shoes_and_Jewelry.valid.parquet
      - data/Electronics.test.parquet
      - data/Electronics.train.parquet
      - data/Electronics.valid.parquet
      - data/Grocery_and_Gourmet_Food.test.parquet
      - data/Grocery_and_Gourmet_Food.train.parquet
      - data/Grocery_and_Gourmet_Food.valid.parquet
      - data/Health_and_Household.test.parquet
      - data/Health_and_Household.train.parquet
      - data/Health_and_Household.valid.parquet
      - data/Home_and_Kitchen.test.parquet
      - data/Home_and_Kitchen.train.parquet
      - data/Home_and_Kitchen.valid.parquet
      - data/Industrial_and_Scientific.test.parquet
      - data/Industrial_and_Scientific.train.parquet
      - data/Industrial_and_Scientific.valid.parquet
      - data/Kindle_Store.test.parquet
      - data/Kindle_Store.train.parquet
      - data/Kindle_Store.valid.parquet
      - data/Movies_and_TV.test.parquet
      - data/Movies_and_TV.train.parquet
      - data/Movies_and_TV.valid.parquet
      - data/Musical_Instruments.test.parquet
      - data/Musical_Instruments.train.parquet
      - data/Musical_Instruments.valid.parquet
      - data/Office_Products.test.parquet
      - data/Office_Products.train.parquet
      - data/Office_Products.valid.parquet
      - data/Patio_Lawn_and_Garden.test.parquet
      - data/Patio_Lawn_and_Garden.train.parquet
      - data/Patio_Lawn_and_Garden.valid.parquet
      - data/Pet_Supplies.test.parquet
      - data/Pet_Supplies.train.parquet
      - data/Pet_Supplies.valid.parquet
      - data/Software.test.parquet
      - data/Software.train.parquet
      - data/Software.valid.parquet
      - data/Sports_and_Outdoors.test.parquet
      - data/Sports_and_Outdoors.train.parquet
      - data/Sports_and_Outdoors.valid.parquet
      - data/Tools_and_Home_Improvement.test.parquet
      - data/Tools_and_Home_Improvement.train.parquet
      - data/Tools_and_Home_Improvement.valid.parquet
      - data/Toys_and_Games.test.parquet
      - data/Toys_and_Games.train.parquet
      - data/Toys_and_Games.valid.parquet
      - data/Video_Games.test.parquet
      - data/Video_Games.train.parquet
      - data/Video_Games.valid.parquet
  run-default-Bias-test:
    foreach: &ref_0
      - Arts_Crafts_and_Sewing
      - Automotive
      - Baby_Products
      - Beauty_and_Personal_Care
      - Books
      - CDs_and_Vinyl
      - Cell_Phones_and_Accessories
      - Clothing_Shoes_and_Jewelry
      - Electronics
      - Grocery_and_Gourmet_Food
      - Health_and_Household
      - Home_and_Kitchen
      - Industrial_and_Scientific
      - Kindle_Store
      - Movies_and_TV
      - Musical_Instruments
      - Office_Products
      - Patio_Lawn_and_Garden
      - Pet_Supplies
      - Software
      - Sports_and_Outdoors
      - Tools_and_Home_Improvement
      - Toys_and_Games
      - Video_Games
    do:
      cmd: >-
        python ../../action.py generate --default -n 2000 --train=data/${item}.train.parquet --train=data/${item}.valid.parquet --test=data/${item}.test.parquet -o runs/default/${item}/test/Bias.duckdb Bias
      deps:
        - 'data/${item}.train.parquet'
        - 'data/${item}.valid.parquet'
        - 'data/${item}.test.parquet'
      outs:
        - 'runs/default/${item}/test/Bias.duckdb'
  run-default-Popular-test:
    foreach: *ref_0
    do:
      cmd: >-
        python ../../action.py generate --default -n 2000 --train=data/${item}.train.parquet --train=data/${item}.valid.parquet --test=data/${item}.test.parquet -o runs/default/${item}/test/Popular.duckdb Popular
      deps:
        - 'data/${item}.train.parquet'
        - 'data/${item}.valid.parquet'
        - 'data/${item}.test.parquet'
      outs:
        - 'runs/default/${item}/test/Popular.duckdb'
  run-default-BiasedMF-ALS-test:
    foreach: *ref_0
    do:
      cmd: >-
        python ../../action.py generate --default -n 2000 --train=data/${item}.train.parquet --train=data/${item}.valid.parquet --test=data/${item}.test.parquet -o runs/default/${item}/test/BiasedMF-ALS.duckdb BiasedMF-ALS
      deps:
        - 'data/${item}.train.parquet'
        - 'data/${item}.valid.parquet'
        - 'data/${item}.test.parquet'
      outs:
        - 'runs/default/${item}/test/BiasedMF-ALS.duckdb'
  run-default-ImplicitMF-ALS-test:
    foreach: *ref_0
    do:
      cmd: >-
        python ../../action.py generate --default -n 2000 --train=data/${item}.train.parquet --train=data/${item}.valid.parquet --test=data/${item}.test.parquet -o runs/default/${item}/test/ImplicitMF-ALS.duckdb ImplicitMF-ALS
      deps:
        - 'data/${item}.train.parquet'
        - 'data/${item}.valid.parquet'
        - 'data/${item}.test.parquet'
      outs:
        - 'runs/default/${item}/test/ImplicitMF-ALS.duckdb'
  run-default-IKNN-Explicit-test:
    foreach: *ref_0
    do:
      cmd: >-
        python ../../action.py generate --default -n 2000 --train=data/${item}.train.parquet --train=data/${item}.valid.parquet --test=data/${item}.test.parquet -o runs/default/${item}/test/IKNN-Explicit.duckdb IKNN-Explicit
      deps:
        - 'data/${item}.train.parquet'
        - 'data/${item}.valid.parquet'
        - 'data/${item}.test.parquet'
      outs:
        - 'runs/default/${item}/test/IKNN-Explicit.duckdb'
  run-default-IKNN-Implicit-test:
    foreach: *ref_0
    do:
      cmd: >-
        python ../../action.py generate --default -n 2000 --train=data/${item}.train.parquet --train=data/${item}.valid.parquet --test=data/${item}.test.parquet -o runs/default/${item}/test/IKNN-Implicit.duckdb IKNN-Implicit
      deps:
        - 'data/${item}.train.parquet'
        - 'data/${item}.valid.parquet'
        - 'data/${item}.test.parquet'
      outs:
        - 'runs/default/${item}/test/IKNN-Implicit.duckdb'
  run-default-Implicit-BPR-test:
    foreach: *ref_0
    do:
      cmd: >-
        python ../../action.py generate --default -n 2000 --train=data/${item}.train.parquet --train=data/${item}.valid.parquet --test=data/${item}.test.parquet -o runs/default/${item}/test/Implicit-BPR.duckdb Implicit-BPR
      deps:
        - 'data/${item}.train.parquet'
        - 'data/${item}.valid.parquet'
        - 'data/${item}.test.parquet'
      outs:
        - 'runs/default/${item}/test/Implicit-BPR.duckdb'
  run-default-HPF-test:
    foreach: *ref_0
    do:
      cmd: >-
        python ../../action.py generate --default -n 2000 --train=data/${item}.train.parquet --train=data/${item}.valid.parquet --test=data/${item}.test.parquet -o runs/default/${item}/test/HPF.duckdb HPF
      deps:
        - 'data/${item}.train.parquet'
        - 'data/${item}.valid.parquet'
        - 'data/${item}.test.parquet'
      outs:
        - 'runs/default/${item}/test/HPF.duckdb'
  run-default-Bias-valid:
    foreach: *ref_0
    do:
      cmd: >-
        python ../../action.py generate --default -n 2000 --train=data/${item}.train.parquet --test=data/${item}.valid.parquet -o runs/default/${item}/valid/Bias.duckdb Bias
      deps:
        - 'data/${item}.train.parquet'
        - 'data/${item}.valid.parquet'
      outs:
        - 'runs/default/${item}/valid/Bias.duckdb'
  run-default-Popular-valid:
    foreach: *ref_0
    do:
      cmd: >-
        python ../../action.py generate --default -n 2000 --train=data/${item}.train.parquet --test=data/${item}.valid.parquet -o runs/default/${item}/valid/Popular.duckdb Popular
      deps:
        - 'data/${item}.train.parquet'
        - 'data/${item}.valid.parquet'
      outs:
        - 'runs/default/${item}/valid/Popular.duckdb'
  run-default-BiasedMF-ALS-valid:
    foreach: *ref_0
    do:
      cmd: >-
        python ../../action.py generate --default -n 2000 --train=data/${item}.train.parquet --test=data/${item}.valid.parquet -o runs/default/${item}/valid/BiasedMF-ALS.duckdb BiasedMF-ALS
      deps:
        - 'data/${item}.train.parquet'
        - 'data/${item}.valid.parquet'
      outs:
        - 'runs/default/${item}/valid/BiasedMF-ALS.duckdb'
  run-default-ImplicitMF-ALS-valid:
    foreach: *ref_0
    do:
      cmd: >-
        python ../../action.py generate --default -n 2000 --train=data/${item}.train.parquet --test=data/${item}.valid.parquet -o runs/default/${item}/valid/ImplicitMF-ALS.duckdb ImplicitMF-ALS
      deps:
        - 'data/${item}.train.parquet'
        - 'data/${item}.valid.parquet'
      outs:
        - 'runs/default/${item}/valid/ImplicitMF-ALS.duckdb'
  run-default-IKNN-Explicit-valid:
    foreach: *ref_0
    do:
      cmd: >-
        python ../../action.py generate --default -n 2000 --train=data/${item}.train.parquet --test=data/${item}.valid.parquet -o runs/default/${item}/valid/IKNN-Explicit.duckdb IKNN-Explicit
      deps:
        - 'data/${item}.train.parquet'
        - 'data/${item}.valid.parquet'
      outs:
        - 'runs/default/${item}/valid/IKNN-Explicit.duckdb'
  run-default-IKNN-Implicit-valid:
    foreach: *ref_0
    do:
      cmd: >-
        python ../../action.py generate --default -n 2000 --train=data/${item}.train.parquet --test=data/${item}.valid.parquet -o runs/default/${item}/valid/IKNN-Implicit.duckdb IKNN-Implicit
      deps:
        - 'data/${item}.train.parquet'
        - 'data/${item}.valid.parquet'
      outs:
        - 'runs/default/${item}/valid/IKNN-Implicit.duckdb'
  run-default-Implicit-BPR-valid:
    foreach: *ref_0
    do:
      cmd: >-
        python ../../action.py generate --default -n 2000 --train=data/${item}.train.parquet --test=data/${item}.valid.parquet -o runs/default/${item}/valid/Implicit-BPR.duckdb Implicit-BPR
      deps:
        - 'data/${item}.train.parquet'
        - 'data/${item}.valid.parquet'
      outs:
        - 'runs/default/${item}/valid/Implicit-BPR.duckdb'
  run-default-HPF-valid:
    foreach: *ref_0
    do:
      cmd: >-
        python ../../action.py generate --default -n 2000 --train=data/${item}.train.parquet --test=data/${item}.valid.parquet -o runs/default/${item}/valid/HPF.duckdb HPF
      deps:
        - 'data/${item}.train.parquet'
        - 'data/${item}.valid.parquet'
      outs:
        - 'runs/default/${item}/valid/HPF.duckdb'
  export-qrels:
    foreach:
      - Arts_Crafts_and_Sewing.test
      - Arts_Crafts_and_Sewing.valid
      - Automotive.test
      - Automotive.valid
      - Baby_Products.test
      - Baby_Products.valid
      - Beauty_and_Personal_Care.test
      - Beauty_and_Personal_Care.valid
      - Books.test
      - Books.valid
      - CDs_and_Vinyl.test
      - CDs_and_Vinyl.valid
      - Cell_Phones_and_Accessories.test
      - Cell_Phones_and_Accessories.valid
      - Clothing_Shoes_and_Jewelry.test
      - Clothing_Shoes_and_Jewelry.valid
      - Electronics.test
      - Electronics.valid
      - Grocery_and_Gourmet_Food.test
      - Grocery_and_Gourmet_Food.valid
      - Health_and_Household.test
      - Health_and_Household.valid
      - Home_and_Kitchen.test
      - Home_and_Kitchen.valid
      - Industrial_and_Scientific.test
      - Industrial_and_Scientific.valid
      - Kindle_Store.test
      - Kindle_Store.valid
      - Movies_and_TV.test
      - Movies_and_TV.valid
      - Musical_Instruments.test
      - Musical_Instruments.valid
      - Office_Products.test
      - Office_Products.valid
      - Patio_Lawn_and_Garden.test
      - Patio_Lawn_and_Garden.valid
      - Pet_Supplies.test
      - Pet_Supplies.valid
      - Software.test
      - Software.valid
      - Sports_and_Outdoors.test
      - Sports_and_Outdoors.valid
      - Tools_and_Home_Improvement.test
      - Tools_and_Home_Improvement.valid
      - Toys_and_Games.test
      - Toys_and_Games.valid
      - Video_Games.test
      - Video_Games.valid
    do:
      cmd: 'python ../../action.py trec export qrels data/${item}.parquet'
      deps:
        - 'data/${item}.parquet'
      outs:
        - 'data/${item}.qrels.gz'
  export-default-runs:
    foreach:
      - model: Bias
        config: default
        cat: Arts_Crafts_and_Sewing
        part: valid
      - model: Bias
        config: default
        cat: Arts_Crafts_and_Sewing
        part: test
      - model: Popular
        config: default
        cat: Arts_Crafts_and_Sewing
        part: valid
      - model: Popular
        config: default
        cat: Arts_Crafts_and_Sewing
        part: test
      - model: BiasedMF-ALS
        config: default
        cat: Arts_Crafts_and_Sewing
        part: valid
      - model: BiasedMF-ALS
        config: default
        cat: Arts_Crafts_and_Sewing
        part: test
      - model: ImplicitMF-ALS
        config: default
        cat: Arts_Crafts_and_Sewing
        part: valid
      - model: ImplicitMF-ALS
        config: default
        cat: Arts_Crafts_and_Sewing
        part: test
      - model: IKNN-Explicit
        config: default
        cat: Arts_Crafts_and_Sewing
        part: valid
      - model: IKNN-Explicit
        config: default
        cat: Arts_Crafts_and_Sewing
        part: test
      - model: IKNN-Implicit
        config: default
        cat: Arts_Crafts_and_Sewing
        part: valid
      - model: IKNN-Implicit
        config: default
        cat: Arts_Crafts_and_Sewing
        part: test
      - model: Implicit-BPR
        config: default
        cat: Arts_Crafts_and_Sewing
        part: valid
      - model: Implicit-BPR
        config: default
        cat: Arts_Crafts_and_Sewing
        part: test
      - model: HPF
        config: default
        cat: Arts_Crafts_and_Sewing
        part: valid
      - model: HPF
        config: default
        cat: Arts_Crafts_and_Sewing
        part: test
      - model: Bias
        config: default
        cat: Automotive
        part: valid
      - model: Bias
        config: default
        cat: Automotive
        part: test
      - model: Popular
        config: default
        cat: Automotive
        part: valid
      - model: Popular
        config: default
        cat: Automotive
        part: test
      - model: BiasedMF-ALS
        config: default
        cat: Automotive
        part: valid
      - model: BiasedMF-ALS
        config: default
        cat: Automotive
        part: test
      - model: ImplicitMF-ALS
        config: default
        cat: Automotive
        part: valid
      - model: ImplicitMF-ALS
        config: default
        cat: Automotive
        part: test
      - model: IKNN-Explicit
        config: default
        cat: Automotive
        part: valid
      - model: IKNN-Explicit
        config: default
        cat: Automotive
        part: test
      - model: IKNN-Implicit
        config: default
        cat: Automotive
        part: valid
      - model: IKNN-Implicit
        config: default
        cat: Automotive
        part: test
      - model: Implicit-BPR
        config: default
        cat: Automotive
        part: valid
      - model: Implicit-BPR
        config: default
        cat: Automotive
        part: test
      - model: HPF
        config: default
        cat: Automotive
        part: valid
      - model: HPF
        config: default
        cat: Automotive
        part: test
      - model: Bias
        config: default
        cat: Baby_Products
        part: valid
      - model: Bias
        config: default
        cat: Baby_Products
        part: test
      - model: Popular
        config: default
        cat: Baby_Products
        part: valid
      - model: Popular
        config: default
        cat: Baby_Products
        part: test
      - model: BiasedMF-ALS
        config: default
        cat: Baby_Products
        part: valid
      - model: BiasedMF-ALS
        config: default
        cat: Baby_Products
        part: test
      - model: ImplicitMF-ALS
        config: default
        cat: Baby_Products
        part: valid
      - model: ImplicitMF-ALS
        config: default
        cat: Baby_Products
        part: test
      - model: IKNN-Explicit
        config: default
        cat: Baby_Products
        part: valid
      - model: IKNN-Explicit
        config: default
        cat: Baby_Products
        part: test
      - model: IKNN-Implicit
        config: default
        cat: Baby_Products
        part: valid
      - model: IKNN-Implicit
        config: default
        cat: Baby_Products
        part: test
      - model: Implicit-BPR
        config: default
        cat: Baby_Products
        part: valid
      - model: Implicit-BPR
        config: default
        cat: Baby_Products
        part: test
      - model: HPF
        config: default
        cat: Baby_Products
        part: valid
      - model: HPF
        config: default
        cat: Baby_Products
        part: test
      - model: Bias
        config: default
        cat: Beauty_and_Personal_Care
        part: valid
      - model: Bias
        config: default
        cat: Beauty_and_Personal_Care
        part: test
      - model: Popular
        config: default
        cat: Beauty_and_Personal_Care
        part: valid
      - model: Popular
        config: default
        cat: Beauty_and_Personal_Care
        part: test
      - model: BiasedMF-ALS
        config: default
        cat: Beauty_and_Personal_Care
        part: valid
      - model: BiasedMF-ALS
        config: default
        cat: Beauty_and_Personal_Care
        part: test
      - model: ImplicitMF-ALS
        config: default
        cat: Beauty_and_Personal_Care
        part: valid
      - model: ImplicitMF-ALS
        config: default
        cat: Beauty_and_Personal_Care
        part: test
      - model: IKNN-Explicit
        config: default
        cat: Beauty_and_Personal_Care
        part: valid
      - model: IKNN-Explicit
        config: default
        cat: Beauty_and_Personal_Care
        part: test
      - model: IKNN-Implicit
        config: default
        cat: Beauty_and_Personal_Care
        part: valid
      - model: IKNN-Implicit
        config: default
        cat: Beauty_and_Personal_Care
        part: test
      - model: Implicit-BPR
        config: default
        cat: Beauty_and_Personal_Care
        part: valid
      - model: Implicit-BPR
        config: default
        cat: Beauty_and_Personal_Care
        part: test
      - model: HPF
        config: default
        cat: Beauty_and_Personal_Care
        part: valid
      - model: HPF
        config: default
        cat: Beauty_and_Personal_Care
        part: test
      - model: Bias
        config: default
        cat: Books
        part: valid
      - model: Bias
        config: default
        cat: Books
        part: test
      - model: Popular
        config: default
        cat: Books
        part: valid
      - model: Popular
        config: default
        cat: Books
        part: test
      - model: BiasedMF-ALS
        config: default
        cat: Books
        part: valid
      - model: BiasedMF-ALS
        config: default
        cat: Books
        part: test
      - model: ImplicitMF-ALS
        config: default
        cat: Books
        part: valid
      - model: ImplicitMF-ALS
        config: default
        cat: Books
        part: test
      - model: IKNN-Explicit
        config: default
        cat: Books
        part: valid
      - model: IKNN-Explicit
        config: default
        cat: Books
        part: test
      - model: IKNN-Implicit
        config: default
        cat: Books
        part: valid
      - model: IKNN-Implicit
        config: default
        cat: Books
        part: test
      - model: Implicit-BPR
        config: default
        cat: Books
        part: valid
      - model: Implicit-BPR
        config: default
        cat: Books
        part: test
      - model: HPF
        config: default
        cat: Books
        part: valid
      - model: HPF
        config: default
        cat: Books
        part: test
      - model: Bias
        config: default
        cat: CDs_and_Vinyl
        part: valid
      - model: Bias
        config: default
        cat: CDs_and_Vinyl
        part: test
      - model: Popular
        config: default
        cat: CDs_and_Vinyl
        part: valid
      - model: Popular
        config: default
        cat: CDs_and_Vinyl
        part: test
      - model: BiasedMF-ALS
        config: default
        cat: CDs_and_Vinyl
        part: valid
      - model: BiasedMF-ALS
        config: default
        cat: CDs_and_Vinyl
        part: test
      - model: ImplicitMF-ALS
        config: default
        cat: CDs_and_Vinyl
        part: valid
      - model: ImplicitMF-ALS
        config: default
        cat: CDs_and_Vinyl
        part: test
      - model: IKNN-Explicit
        config: default
        cat: CDs_and_Vinyl
        part: valid
      - model: IKNN-Explicit
        config: default
        cat: CDs_and_Vinyl
        part: test
      - model: IKNN-Implicit
        config: default
        cat: CDs_and_Vinyl
        part: valid
      - model: IKNN-Implicit
        config: default
        cat: CDs_and_Vinyl
        part: test
      - model: Implicit-BPR
        config: default
        cat: CDs_and_Vinyl
        part: valid
      - model: Implicit-BPR
        config: default
        cat: CDs_and_Vinyl
        part: test
      - model: HPF
        config: default
        cat: CDs_and_Vinyl
        part: valid
      - model: HPF
        config: default
        cat: CDs_and_Vinyl
        part: test
      - model: Bias
        config: default
        cat: Cell_Phones_and_Accessories
        part: valid
      - model: Bias
        config: default
        cat: Cell_Phones_and_Accessories
        part: test
      - model: Popular
        config: default
        cat: Cell_Phones_and_Accessories
        part: valid
      - model: Popular
        config: default
        cat: Cell_Phones_and_Accessories
        part: test
      - model: BiasedMF-ALS
        config: default
        cat: Cell_Phones_and_Accessories
        part: valid
      - model: BiasedMF-ALS
        config: default
        cat: Cell_Phones_and_Accessories
        part: test
      - model: ImplicitMF-ALS
        config: default
        cat: Cell_Phones_and_Accessories
        part: valid
      - model: ImplicitMF-ALS
        config: default
        cat: Cell_Phones_and_Accessories
        part: test
      - model: IKNN-Explicit
        config: default
        cat: Cell_Phones_and_Accessories
        part: valid
      - model: IKNN-Explicit
        config: default
        cat: Cell_Phones_and_Accessories
        part: test
      - model: IKNN-Implicit
        config: default
        cat: Cell_Phones_and_Accessories
        part: valid
      - model: IKNN-Implicit
        config: default
        cat: Cell_Phones_and_Accessories
        part: test
      - model: Implicit-BPR
        config: default
        cat: Cell_Phones_and_Accessories
        part: valid
      - model: Implicit-BPR
        config: default
        cat: Cell_Phones_and_Accessories
        part: test
      - model: HPF
        config: default
        cat: Cell_Phones_and_Accessories
        part: valid
      - model: HPF
        config: default
        cat: Cell_Phones_and_Accessories
        part: test
      - model: Bias
        config: default
        cat: Clothing_Shoes_and_Jewelry
        part: valid
      - model: Bias
        config: default
        cat: Clothing_Shoes_and_Jewelry
        part: test
      - model: Popular
        config: default
        cat: Clothing_Shoes_and_Jewelry
        part: valid
      - model: Popular
        config: default
        cat: Clothing_Shoes_and_Jewelry
        part: test
      - model: BiasedMF-ALS
        config: default
        cat: Clothing_Shoes_and_Jewelry
        part: valid
      - model: BiasedMF-ALS
        config: default
        cat: Clothing_Shoes_and_Jewelry
        part: test
      - model: ImplicitMF-ALS
        config: default
        cat: Clothing_Shoes_and_Jewelry
        part: valid
      - model: ImplicitMF-ALS
        config: default
        cat: Clothing_Shoes_and_Jewelry
        part: test
      - model: IKNN-Explicit
        config: default
        cat: Clothing_Shoes_and_Jewelry
        part: valid
      - model: IKNN-Explicit
        config: default
        cat: Clothing_Shoes_and_Jewelry
        part: test
      - model: IKNN-Implicit
        config: default
        cat: Clothing_Shoes_and_Jewelry
        part: valid
      - model: IKNN-Implicit
        config: default
        cat: Clothing_Shoes_and_Jewelry
        part: test
      - model: Implicit-BPR
        config: default
        cat: Clothing_Shoes_and_Jewelry
        part: valid
      - model: Implicit-BPR
        config: default
        cat: Clothing_Shoes_and_Jewelry
        part: test
      - model: HPF
        config: default
        cat: Clothing_Shoes_and_Jewelry
        part: valid
      - model: HPF
        config: default
        cat: Clothing_Shoes_and_Jewelry
        part: test
      - model: Bias
        config: default
        cat: Electronics
        part: valid
      - model: Bias
        config: default
        cat: Electronics
        part: test
      - model: Popular
        config: default
        cat: Electronics
        part: valid
      - model: Popular
        config: default
        cat: Electronics
        part: test
      - model: BiasedMF-ALS
        config: default
        cat: Electronics
        part: valid
      - model: BiasedMF-ALS
        config: default
        cat: Electronics
        part: test
      - model: ImplicitMF-ALS
        config: default
        cat: Electronics
        part: valid
      - model: ImplicitMF-ALS
        config: default
        cat: Electronics
        part: test
      - model: IKNN-Explicit
        config: default
        cat: Electronics
        part: valid
      - model: IKNN-Explicit
        config: default
        cat: Electronics
        part: test
      - model: IKNN-Implicit
        config: default
        cat: Electronics
        part: valid
      - model: IKNN-Implicit
        config: default
        cat: Electronics
        part: test
      - model: Implicit-BPR
        config: default
        cat: Electronics
        part: valid
      - model: Implicit-BPR
        config: default
        cat: Electronics
        part: test
      - model: HPF
        config: default
        cat: Electronics
        part: valid
      - model: HPF
        config: default
        cat: Electronics
        part: test
      - model: Bias
        config: default
        cat: Grocery_and_Gourmet_Food
        part: valid
      - model: Bias
        config: default
        cat: Grocery_and_Gourmet_Food
        part: test
      - model: Popular
        config: default
        cat: Grocery_and_Gourmet_Food
        part: valid
      - model: Popular
        config: default
        cat: Grocery_and_Gourmet_Food
        part: test
      - model: BiasedMF-ALS
        config: default
        cat: Grocery_and_Gourmet_Food
        part: valid
      - model: BiasedMF-ALS
        config: default
        cat: Grocery_and_Gourmet_Food
        part: test
      - model: ImplicitMF-ALS
        config: default
        cat: Grocery_and_Gourmet_Food
        part: valid
      - model: ImplicitMF-ALS
        config: default
        cat: Grocery_and_Gourmet_Food
        part: test
      - model: IKNN-Explicit
        config: default
        cat: Grocery_and_Gourmet_Food
        part: valid
      - model: IKNN-Explicit
        config: default
        cat: Grocery_and_Gourmet_Food
        part: test
      - model: IKNN-Implicit
        config: default
        cat: Grocery_and_Gourmet_Food
        part: valid
      - model: IKNN-Implicit
        config: default
        cat: Grocery_and_Gourmet_Food
        part: test
      - model: Implicit-BPR
        config: default
        cat: Grocery_and_Gourmet_Food
        part: valid
      - model: Implicit-BPR
        config: default
        cat: Grocery_and_Gourmet_Food
        part: test
      - model: HPF
        config: default
        cat: Grocery_and_Gourmet_Food
        part: valid
      - model: HPF
        config: default
        cat: Grocery_and_Gourmet_Food
        part: test
      - model: Bias
        config: default
        cat: Health_and_Household
        part: valid
      - model: Bias
        config: default
        cat: Health_and_Household
        part: test
      - model: Popular
        config: default
        cat: Health_and_Household
        part: valid
      - model: Popular
        config: default
        cat: Health_and_Household
        part: test
      - model: BiasedMF-ALS
        config: default
        cat: Health_and_Household
        part: valid
      - model: BiasedMF-ALS
        config: default
        cat: Health_and_Household
        part: test
      - model: ImplicitMF-ALS
        config: default
        cat: Health_and_Household
        part: valid
      - model: ImplicitMF-ALS
        config: default
        cat: Health_and_Household
        part: test
      - model: IKNN-Explicit
        config: default
        cat: Health_and_Household
        part: valid
      - model: IKNN-Explicit
        config: default
        cat: Health_and_Household
        part: test
      - model: IKNN-Implicit
        config: default
        cat: Health_and_Household
        part: valid
      - model: IKNN-Implicit
        config: default
        cat: Health_and_Household
        part: test
      - model: Implicit-BPR
        config: default
        cat: Health_and_Household
        part: valid
      - model: Implicit-BPR
        config: default
        cat: Health_and_Household
        part: test
      - model: HPF
        config: default
        cat: Health_and_Household
        part: valid
      - model: HPF
        config: default
        cat: Health_and_Household
        part: test
      - model: Bias
        config: default
        cat: Home_and_Kitchen
        part: valid
      - model: Bias
        config: default
        cat: Home_and_Kitchen
        part: test
      - model: Popular
        config: default
        cat: Home_and_Kitchen
        part: valid
      - model: Popular
        config: default
        cat: Home_and_Kitchen
        part: test
      - model: BiasedMF-ALS
        config: default
        cat: Home_and_Kitchen
        part: valid
      - model: BiasedMF-ALS
        config: default
        cat: Home_and_Kitchen
        part: test
      - model: ImplicitMF-ALS
        config: default
        cat: Home_and_Kitchen
        part: valid
      - model: ImplicitMF-ALS
        config: default
        cat: Home_and_Kitchen
        part: test
      - model: IKNN-Explicit
        config: default
        cat: Home_and_Kitchen
        part: valid
      - model: IKNN-Explicit
        config: default
        cat: Home_and_Kitchen
        part: test
      - model: IKNN-Implicit
        config: default
        cat: Home_and_Kitchen
        part: valid
      - model: IKNN-Implicit
        config: default
        cat: Home_and_Kitchen
        part: test
      - model: Implicit-BPR
        config: default
        cat: Home_and_Kitchen
        part: valid
      - model: Implicit-BPR
        config: default
        cat: Home_and_Kitchen
        part: test
      - model: HPF
        config: default
        cat: Home_and_Kitchen
        part: valid
      - model: HPF
        config: default
        cat: Home_and_Kitchen
        part: test
      - model: Bias
        config: default
        cat: Industrial_and_Scientific
        part: valid
      - model: Bias
        config: default
        cat: Industrial_and_Scientific
        part: test
      - model: Popular
        config: default
        cat: Industrial_and_Scientific
        part: valid
      - model: Popular
        config: default
        cat: Industrial_and_Scientific
        part: test
      - model: BiasedMF-ALS
        config: default
        cat: Industrial_and_Scientific
        part: valid
      - model: BiasedMF-ALS
        config: default
        cat: Industrial_and_Scientific
        part: test
      - model: ImplicitMF-ALS
        config: default
        cat: Industrial_and_Scientific
        part: valid
      - model: ImplicitMF-ALS
        config: default
        cat: Industrial_and_Scientific
        part: test
      - model: IKNN-Explicit
        config: default
        cat: Industrial_and_Scientific
        part: valid
      - model: IKNN-Explicit
        config: default
        cat: Industrial_and_Scientific
        part: test
      - model: IKNN-Implicit
        config: default
        cat: Industrial_and_Scientific
        part: valid
      - model: IKNN-Implicit
        config: default
        cat: Industrial_and_Scientific
        part: test
      - model: Implicit-BPR
        config: default
        cat: Industrial_and_Scientific
        part: valid
      - model: Implicit-BPR
        config: default
        cat: Industrial_and_Scientific
        part: test
      - model: HPF
        config: default
        cat: Industrial_and_Scientific
        part: valid
      - model: HPF
        config: default
        cat: Industrial_and_Scientific
        part: test
      - model: Bias
        config: default
        cat: Kindle_Store
        part: valid
      - model: Bias
        config: default
        cat: Kindle_Store
        part: test
      - model: Popular
        config: default
        cat: Kindle_Store
        part: valid
      - model: Popular
        config: default
        cat: Kindle_Store
        part: test
      - model: BiasedMF-ALS
        config: default
        cat: Kindle_Store
        part: valid
      - model: BiasedMF-ALS
        config: default
        cat: Kindle_Store
        part: test
      - model: ImplicitMF-ALS
        config: default
        cat: Kindle_Store
        part: valid
      - model: ImplicitMF-ALS
        config: default
        cat: Kindle_Store
        part: test
      - model: IKNN-Explicit
        config: default
        cat: Kindle_Store
        part: valid
      - model: IKNN-Explicit
        config: default
        cat: Kindle_Store
        part: test
      - model: IKNN-Implicit
        config: default
        cat: Kindle_Store
        part: valid
      - model: IKNN-Implicit
        config: default
        cat: Kindle_Store
        part: test
      - model: Implicit-BPR
        config: default
        cat: Kindle_Store
        part: valid
      - model: Implicit-BPR
        config: default
        cat: Kindle_Store
        part: test
      - model: HPF
        config: default
        cat: Kindle_Store
        part: valid
      - model: HPF
        config: default
        cat: Kindle_Store
        part: test
      - model: Bias
        config: default
        cat: Movies_and_TV
        part: valid
      - model: Bias
        config: default
        cat: Movies_and_TV
        part: test
      - model: Popular
        config: default
        cat: Movies_and_TV
        part: valid
      - model: Popular
        config: default
        cat: Movies_and_TV
        part: test
      - model: BiasedMF-ALS
        config: default
        cat: Movies_and_TV
        part: valid
      - model: BiasedMF-ALS
        config: default
        cat: Movies_and_TV
        part: test
      - model: ImplicitMF-ALS
        config: default
        cat: Movies_and_TV
        part: valid
      - model: ImplicitMF-ALS
        config: default
        cat: Movies_and_TV
        part: test
      - model: IKNN-Explicit
        config: default
        cat: Movies_and_TV
        part: valid
      - model: IKNN-Explicit
        config: default
        cat: Movies_and_TV
        part: test
      - model: IKNN-Implicit
        config: default
        cat: Movies_and_TV
        part: valid
      - model: IKNN-Implicit
        config: default
        cat: Movies_and_TV
        part: test
      - model: Implicit-BPR
        config: default
        cat: Movies_and_TV
        part: valid
      - model: Implicit-BPR
        config: default
        cat: Movies_and_TV
        part: test
      - model: HPF
        config: default
        cat: Movies_and_TV
        part: valid
      - model: HPF
        config: default
        cat: Movies_and_TV
        part: test
      - model: Bias
        config: default
        cat: Musical_Instruments
        part: valid
      - model: Bias
        config: default
        cat: Musical_Instruments
        part: test
      - model: Popular
        config: default
        cat: Musical_Instruments
        part: valid
      - model: Popular
        config: default
        cat: Musical_Instruments
        part: test
      - model: BiasedMF-ALS
        config: default
        cat: Musical_Instruments
        part: valid
      - model: BiasedMF-ALS
        config: default
        cat: Musical_Instruments
        part: test
      - model: ImplicitMF-ALS
        config: default
        cat: Musical_Instruments
        part: valid
      - model: ImplicitMF-ALS
        config: default
        cat: Musical_Instruments
        part: test
      - model: IKNN-Explicit
        config: default
        cat: Musical_Instruments
        part: valid
      - model: IKNN-Explicit
        config: default
        cat: Musical_Instruments
        part: test
      - model: IKNN-Implicit
        config: default
        cat: Musical_Instruments
        part: valid
      - model: IKNN-Implicit
        config: default
        cat: Musical_Instruments
        part: test
      - model: Implicit-BPR
        config: default
        cat: Musical_Instruments
        part: valid
      - model: Implicit-BPR
        config: default
        cat: Musical_Instruments
        part: test
      - model: HPF
        config: default
        cat: Musical_Instruments
        part: valid
      - model: HPF
        config: default
        cat: Musical_Instruments
        part: test
      - model: Bias
        config: default
        cat: Office_Products
        part: valid
      - model: Bias
        config: default
        cat: Office_Products
        part: test
      - model: Popular
        config: default
        cat: Office_Products
        part: valid
      - model: Popular
        config: default
        cat: Office_Products
        part: test
      - model: BiasedMF-ALS
        config: default
        cat: Office_Products
        part: valid
      - model: BiasedMF-ALS
        config: default
        cat: Office_Products
        part: test
      - model: ImplicitMF-ALS
        config: default
        cat: Office_Products
        part: valid
      - model: ImplicitMF-ALS
        config: default
        cat: Office_Products
        part: test
      - model: IKNN-Explicit
        config: default
        cat: Office_Products
        part: valid
      - model: IKNN-Explicit
        config: default
        cat: Office_Products
        part: test
      - model: IKNN-Implicit
        config: default
        cat: Office_Products
        part: valid
      - model: IKNN-Implicit
        config: default
        cat: Office_Products
        part: test
      - model: Implicit-BPR
        config: default
        cat: Office_Products
        part: valid
      - model: Implicit-BPR
        config: default
        cat: Office_Products
        part: test
      - model: HPF
        config: default
        cat: Office_Products
        part: valid
      - model: HPF
        config: default
        cat: Office_Products
        part: test
      - model: Bias
        config: default
        cat: Patio_Lawn_and_Garden
        part: valid
      - model: Bias
        config: default
        cat: Patio_Lawn_and_Garden
        part: test
      - model: Popular
        config: default
        cat: Patio_Lawn_and_Garden
        part: valid
      - model: Popular
        config: default
        cat: Patio_Lawn_and_Garden
        part: test
      - model: BiasedMF-ALS
        config: default
        cat: Patio_Lawn_and_Garden
        part: valid
      - model: BiasedMF-ALS
        config: default
        cat: Patio_Lawn_and_Garden
        part: test
      - model: ImplicitMF-ALS
        config: default
        cat: Patio_Lawn_and_Garden
        part: valid
      - model: ImplicitMF-ALS
        config: default
        cat: Patio_Lawn_and_Garden
        part: test
      - model: IKNN-Explicit
        config: default
        cat: Patio_Lawn_and_Garden
        part: valid
      - model: IKNN-Explicit
        config: default
        cat: Patio_Lawn_and_Garden
        part: test
      - model: IKNN-Implicit
        config: default
        cat: Patio_Lawn_and_Garden
        part: valid
      - model: IKNN-Implicit
        config: default
        cat: Patio_Lawn_and_Garden
        part: test
      - model: Implicit-BPR
        config: default
        cat: Patio_Lawn_and_Garden
        part: valid
      - model: Implicit-BPR
        config: default
        cat: Patio_Lawn_and_Garden
        part: test
      - model: HPF
        config: default
        cat: Patio_Lawn_and_Garden
        part: valid
      - model: HPF
        config: default
        cat: Patio_Lawn_and_Garden
        part: test
      - model: Bias
        config: default
        cat: Pet_Supplies
        part: valid
      - model: Bias
        config: default
        cat: Pet_Supplies
        part: test
      - model: Popular
        config: default
        cat: Pet_Supplies
        part: valid
      - model: Popular
        config: default
        cat: Pet_Supplies
        part: test
      - model: BiasedMF-ALS
        config: default
        cat: Pet_Supplies
        part: valid
      - model: BiasedMF-ALS
        config: default
        cat: Pet_Supplies
        part: test
      - model: ImplicitMF-ALS
        config: default
        cat: Pet_Supplies
        part: valid
      - model: ImplicitMF-ALS
        config: default
        cat: Pet_Supplies
        part: test
      - model: IKNN-Explicit
        config: default
        cat: Pet_Supplies
        part: valid
      - model: IKNN-Explicit
        config: default
        cat: Pet_Supplies
        part: test
      - model: IKNN-Implicit
        config: default
        cat: Pet_Supplies
        part: valid
      - model: IKNN-Implicit
        config: default
        cat: Pet_Supplies
        part: test
      - model: Implicit-BPR
        config: default
        cat: Pet_Supplies
        part: valid
      - model: Implicit-BPR
        config: default
        cat: Pet_Supplies
        part: test
      - model: HPF
        config: default
        cat: Pet_Supplies
        part: valid
      - model: HPF
        config: default
        cat: Pet_Supplies
        part: test
      - model: Bias
        config: default
        cat: Software
        part: valid
      - model: Bias
        config: default
        cat: Software
        part: test
      - model: Popular
        config: default
        cat: Software
        part: valid
      - model: Popular
        config: default
        cat: Software
        part: test
      - model: BiasedMF-ALS
        config: default
        cat: Software
        part: valid
      - model: BiasedMF-ALS
        config: default
        cat: Software
        part: test
      - model: ImplicitMF-ALS
        config: default
        cat: Software
        part: valid
      - model: ImplicitMF-ALS
        config: default
        cat: Software
        part: test
      - model: IKNN-Explicit
        config: default
        cat: Software
        part: valid
      - model: IKNN-Explicit
        config: default
        cat: Software
        part: test
      - model: IKNN-Implicit
        config: default
        cat: Software
        part: valid
      - model: IKNN-Implicit
        config: default
        cat: Software
        part: test
      - model: Implicit-BPR
        config: default
        cat: Software
        part: valid
      - model: Implicit-BPR
        config: default
        cat: Software
        part: test
      - model: HPF
        config: default
        cat: Software
        part: valid
      - model: HPF
        config: default
        cat: Software
        part: test
      - model: Bias
        config: default
        cat: Sports_and_Outdoors
        part: valid
      - model: Bias
        config: default
        cat: Sports_and_Outdoors
        part: test
      - model: Popular
        config: default
        cat: Sports_and_Outdoors
        part: valid
      - model: Popular
        config: default
        cat: Sports_and_Outdoors
        part: test
      - model: BiasedMF-ALS
        config: default
        cat: Sports_and_Outdoors
        part: valid
      - model: BiasedMF-ALS
        config: default
        cat: Sports_and_Outdoors
        part: test
      - model: ImplicitMF-ALS
        config: default
        cat: Sports_and_Outdoors
        part: valid
      - model: ImplicitMF-ALS
        config: default
        cat: Sports_and_Outdoors
        part: test
      - model: IKNN-Explicit
        config: default
        cat: Sports_and_Outdoors
        part: valid
      - model: IKNN-Explicit
        config: default
        cat: Sports_and_Outdoors
        part: test
      - model: IKNN-Implicit
        config: default
        cat: Sports_and_Outdoors
        part: valid
      - model: IKNN-Implicit
        config: default
        cat: Sports_and_Outdoors
        part: test
      - model: Implicit-BPR
        config: default
        cat: Sports_and_Outdoors
        part: valid
      - model: Implicit-BPR
        config: default
        cat: Sports_and_Outdoors
        part: test
      - model: HPF
        config: default
        cat: Sports_and_Outdoors
        part: valid
      - model: HPF
        config: default
        cat: Sports_and_Outdoors
        part: test
      - model: Bias
        config: default
        cat: Tools_and_Home_Improvement
        part: valid
      - model: Bias
        config: default
        cat: Tools_and_Home_Improvement
        part: test
      - model: Popular
        config: default
        cat: Tools_and_Home_Improvement
        part: valid
      - model: Popular
        config: default
        cat: Tools_and_Home_Improvement
        part: test
      - model: BiasedMF-ALS
        config: default
        cat: Tools_and_Home_Improvement
        part: valid
      - model: BiasedMF-ALS
        config: default
        cat: Tools_and_Home_Improvement
        part: test
      - model: ImplicitMF-ALS
        config: default
        cat: Tools_and_Home_Improvement
        part: valid
      - model: ImplicitMF-ALS
        config: default
        cat: Tools_and_Home_Improvement
        part: test
      - model: IKNN-Explicit
        config: default
        cat: Tools_and_Home_Improvement
        part: valid
      - model: IKNN-Explicit
        config: default
        cat: Tools_and_Home_Improvement
        part: test
      - model: IKNN-Implicit
        config: default
        cat: Tools_and_Home_Improvement
        part: valid
      - model: IKNN-Implicit
        config: default
        cat: Tools_and_Home_Improvement
        part: test
      - model: Implicit-BPR
        config: default
        cat: Tools_and_Home_Improvement
        part: valid
      - model: Implicit-BPR
        config: default
        cat: Tools_and_Home_Improvement
        part: test
      - model: HPF
        config: default
        cat: Tools_and_Home_Improvement
        part: valid
      - model: HPF
        config: default
        cat: Tools_and_Home_Improvement
        part: test
      - model: Bias
        config: default
        cat: Toys_and_Games
        part: valid
      - model: Bias
        config: default
        cat: Toys_and_Games
        part: test
      - model: Popular
        config: default
        cat: Toys_and_Games
        part: valid
      - model: Popular
        config: default
        cat: Toys_and_Games
        part: test
      - model: BiasedMF-ALS
        config: default
        cat: Toys_and_Games
        part: valid
      - model: BiasedMF-ALS
        config: default
        cat: Toys_and_Games
        part: test
      - model: ImplicitMF-ALS
        config: default
        cat: Toys_and_Games
        part: valid
      - model: ImplicitMF-ALS
        config: default
        cat: Toys_and_Games
        part: test
      - model: IKNN-Explicit
        config: default
        cat: Toys_and_Games
        part: valid
      - model: IKNN-Explicit
        config: default
        cat: Toys_and_Games
        part: test
      - model: IKNN-Implicit
        config: default
        cat: Toys_and_Games
        part: valid
      - model: IKNN-Implicit
        config: default
        cat: Toys_and_Games
        part: test
      - model: Implicit-BPR
        config: default
        cat: Toys_and_Games
        part: valid
      - model: Implicit-BPR
        config: default
        cat: Toys_and_Games
        part: test
      - model: HPF
        config: default
        cat: Toys_and_Games
        part: valid
      - model: HPF
        config: default
        cat: Toys_and_Games
        part: test
      - model: Bias
        config: default
        cat: Video_Games
        part: valid
      - model: Bias
        config: default
        cat: Video_Games
        part: test
      - model: Popular
        config: default
        cat: Video_Games
        part: valid
      - model: Popular
        config: default
        cat: Video_Games
        part: test
      - model: BiasedMF-ALS
        config: default
        cat: Video_Games
        part: valid
      - model: BiasedMF-ALS
        config: default
        cat: Video_Games
        part: test
      - model: ImplicitMF-ALS
        config: default
        cat: Video_Games
        part: valid
      - model: ImplicitMF-ALS
        config: default
        cat: Video_Games
        part: test
      - model: IKNN-Explicit
        config: default
        cat: Video_Games
        part: valid
      - model: IKNN-Explicit
        config: default
        cat: Video_Games
        part: test
      - model: IKNN-Implicit
        config: default
        cat: Video_Games
        part: valid
      - model: IKNN-Implicit
        config: default
        cat: Video_Games
        part: test
      - model: Implicit-BPR
        config: default
        cat: Video_Games
        part: valid
      - model: Implicit-BPR
        config: default
        cat: Video_Games
        part: test
      - model: HPF
        config: default
        cat: Video_Games
        part: valid
      - model: HPF
        config: default
        cat: Video_Games
        part: test
    do:
      cmd: >-
        python ../../action.py trec export runs runs/${item.config}/${item.cat}/${item.part}/${item.model}.duckdb runs/${item.config}/${item.cat}/${item.part}/${item.model}.run.gz
      deps:
        - 'runs/${item.config}/${item.cat}/${item.part}/${item.model}.duckdb'
      outs:
        - 'runs/${item.config}/${item.cat}/${item.part}/${item.model}.run.gz'

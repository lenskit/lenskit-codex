schema: '2.0'
stages:
  import-data:
    cmd: python ../import-ml.py ml-1m.zip
    deps:
    - path: ../import-ml.py
      hash: md5
      md5: 4af94250c13bdd7beff8235e442549c6
      size: 3732
    - path: ml-1m.zip
      hash: md5
      md5: c4d9eecfca2ab87c1945afe126590906
      size: 5917549
    outs:
    - path: ratings.duckdb
      hash: md5
      md5: dad84dd5a0dd8a59fbbcafb9ccd9b131
      size: 8925184
  import-ml-1m:
    cmd: python ../import-ml.py ml-1m.zip
    deps:
    - path: ../import-ml.py
      hash: md5
      md5: 30e3b5d3d15e7797637601877711c1ba
      size: 3648
    - path: ../ml-stats.sql
      hash: md5
      md5: b016dc983a2156e0712a846097a968e7
      size: 1307
    - path: ml-1m.zip
      hash: md5
      md5: c4d9eecfca2ab87c1945afe126590906
      size: 5917549
    outs:
    - path: ratings.duckdb
      hash: md5
      md5: 4c71c11bc9aa7b5f7fb561c7570e3a48
      size: 11284480
  ml-1m-stats:
    cmd: python ../../scripts/duckdb-sql.py -d stats.duckdb ../ml-stats.sql
    deps:
    - path: ../ml-stats.sql
      hash: md5
      md5: bf09f212fabc98275ae949932889654c
      size: 1374
    - path: ratings.parquet
      hash: md5
      md5: dea3ecb8a158bcf837a4d9d25ca9ab2e
      size: 6034375
    outs:
    - path: stats.duckdb
      hash: md5
      md5: 411a11e707d9b0f0281e2d8e6a64b1c2
      size: 1323008
  split-random:
    cmd: python ../../../scripts/split.py random.toml
    deps:
    - path: ../ratings.duckdb
      hash: md5
      md5: 4c71c11bc9aa7b5f7fb561c7570e3a48
      size: 11284480
    - path: random.toml
      hash: md5
      md5: 276ffa520abcf2243c9ffee115774a98
      size: 137
    params:
      ../../../config.toml:
        random.seed: 20240717
    outs:
    - path: random.duckdb
      hash: md5
      md5: a20093e4cca860a670277777144ef642
      size: 536576

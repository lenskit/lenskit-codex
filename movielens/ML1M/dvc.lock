schema: '2.0'
stages:
  import-data:
    cmd: python ../import-ml.py ml-1m.zip
    deps:
    - path: ../import-ml.py
      hash: md5
      md5: 4af94250c13bdd7beff8235e442549c6
      size: 3732
    - path: ml-1m.zip
      hash: md5
      md5: c4d9eecfca2ab87c1945afe126590906
      size: 5917549
    outs:
    - path: ratings.duckdb
      hash: md5
      md5: dad84dd5a0dd8a59fbbcafb9ccd9b131
      size: 8925184
  import-ml-1m:
    cmd: python ../import-ml.py ml-1m.zip
    deps:
    - path: ../import-ml.py
      hash: md5
      md5: 30e3b5d3d15e7797637601877711c1ba
      size: 3648
    - path: ../ml-stats.sql
      hash: md5
      md5: b016dc983a2156e0712a846097a968e7
      size: 1307
    - path: ml-1m.zip
      hash: md5
      md5: c4d9eecfca2ab87c1945afe126590906
      size: 5917549
    outs:
    - path: ratings.duckdb
      hash: md5
      md5: 4c71c11bc9aa7b5f7fb561c7570e3a48
      size: 11284480
  ml-1m-stats:
    cmd: python ../../scripts/duckdb-sql.py -d stats.duckdb ../ml-stats.sql
    deps:
    - path: ../ml-stats.sql
      hash: md5
      md5: bf09f212fabc98275ae949932889654c
      size: 1374
    - path: ratings.parquet
      hash: md5
      md5: dea3ecb8a158bcf837a4d9d25ca9ab2e
      size: 6034375
    outs:
    - path: stats.duckdb
      hash: md5
      md5: 411a11e707d9b0f0281e2d8e6a64b1c2
      size: 1323008
  split-random:
    cmd: lenskit-codex split random.toml
    deps:
    - path: ../ratings.duckdb
      hash: md5
      md5: 6f48e3d41018b7f1deb4a9f5aa2c0ecf
      size: 11284480
    - path: random.toml
      hash: md5
      md5: 9d1d0dfd07c3cea4845016496b4294a5
      size: 165
    params:
      ../../../config.toml:
        random.seed: 20240717
    outs:
    - path: random.duckdb
      hash: md5
      md5: 73e24193c1454e73ad0845182e86782d
      size: 536576
  sweep-random-Bias:
    cmd: lenskit-codex sweep run --ds-name=ML1M --split=splits/random.toml --test-part=0
      Bias sweeps/random/Bias
    deps:
    - path: ../../models/Bias.toml
      hash: md5
      md5: 97f305e8c04fb52cff715d59711b5eed
      size: 146
    - path: ratings.duckdb
      hash: md5
      md5: 6f48e3d41018b7f1deb4a9f5aa2c0ecf
      size: 11284480
    - path: splits/random.duckdb
      hash: md5
      md5: 73e24193c1454e73ad0845182e86782d
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/Bias
      hash: md5
      md5: 6d82967b30379fa7491901ab69cc7226.dir
      size: 55178140
      nfiles: 260
  sweep-random-BiasedMF-ALS:
    cmd: python ../../action.py sweep run -p 0 --ratings=ratings.duckdb --assignments=splits/random.duckdb
      BiasedMF-ALS sweeps/random/BiasedMF-ALS.duckdb
    deps:
    - path: ../../codex/models/BiasedMF_ALS.py
      hash: md5
      md5: 70b01ec78dc3f1c3d09190c032bc05a6
      size: 349
    - path: ratings.duckdb
      hash: md5
      md5: 4c71c11bc9aa7b5f7fb561c7570e3a48
      size: 11284480
    - path: splits/random.duckdb
      hash: md5
      md5: 23c62fcd51a637d1109d93c6341e9ec0
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/BiasedMF-ALS.duckdb
      hash: md5
      md5: 4e7da75e7f993816b40d2dea7d7bf40e
      size: 122957824
  sweep-random-ImplicitMF-ALS:
    cmd: lenskit-codex sweep run --ds-name=ML1M --split=splits/random.toml --test-part=0
      ImplicitMF-ALS sweeps/random/ImplicitMF-ALS
    deps:
    - path: ../../models/ImplicitMF-ALS.toml
      hash: md5
      md5: e3b0120ab5820325128a9eb87d851e7f
      size: 151
    - path: ratings.duckdb
      hash: md5
      md5: 6f48e3d41018b7f1deb4a9f5aa2c0ecf
      size: 11284480
    - path: splits/random.duckdb
      hash: md5
      md5: 73e24193c1454e73ad0845182e86782d
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/ImplicitMF-ALS
      hash: md5
      md5: a3b8a81e10f19fb673debd15bfa3aa16.dir
      size: 132550980
      nfiles: 244
  sweep-random-IKNN-Explicit:
    cmd: python ../../action.py sweep run -p 0 --ratings=ratings.duckdb --assignments=splits/random.duckdb
      IKNN-Explicit sweeps/random/IKNN-Explicit.duckdb
    deps:
    - path: ../../codex/models/IKNN_Explicit.py
      hash: md5
      md5: d7b6a1734bea39997f94df4fa0c4900e
      size: 378
    - path: ratings.duckdb
      hash: md5
      md5: 4c71c11bc9aa7b5f7fb561c7570e3a48
      size: 11284480
    - path: splits/random.duckdb
      hash: md5
      md5: 23c62fcd51a637d1109d93c6341e9ec0
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/IKNN-Explicit.duckdb
      hash: md5
      md5: a2e4e0517bf97b0ff1d5583892546696
      size: 50868224
  sweep-random-IKNN-Implicit:
    cmd: lenskit-codex sweep run --ds-name=ML1M --split=splits/random.toml --test-part=0
      IKNN-Implicit sweeps/random/IKNN-Implicit
    deps:
    - path: ../../models/IKNN-Implicit.toml
      hash: md5
      md5: 2bfec2d4beb12854e5e7d632f0fd6396
      size: 152
    - path: ratings.duckdb
      hash: md5
      md5: 6f48e3d41018b7f1deb4a9f5aa2c0ecf
      size: 11284480
    - path: splits/random.duckdb
      hash: md5
      md5: 73e24193c1454e73ad0845182e86782d
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/IKNN-Implicit
      hash: md5
      md5: 461028756c06063fdd317c5b2ff89a46.dir
      size: 51013404
      nfiles: 100
  import:
    cmd: lenskit-codex movielens import --stat-sql=../ml-stats.sql ml-1m.zip
    deps:
    - path: ../ml-stats.sql
      hash: md5
      md5: b016dc983a2156e0712a846097a968e7
      size: 1307
    - path: ml-1m.zip
      hash: md5
      md5: c4d9eecfca2ab87c1945afe126590906
      size: 5917549
    outs:
    - path: ratings.duckdb
      hash: md5
      md5: 6f48e3d41018b7f1deb4a9f5aa2c0ecf
      size: 11284480
  export-random-Bias:
    cmd: lenskit-codex sweep export -o sweeps/random/Bias.json sweeps/random/Bias
      RMSE
    deps:
    - path: sweeps/random/Bias
      hash: md5
      md5: 6d82967b30379fa7491901ab69cc7226.dir
      size: 55178140
      nfiles: 260
    outs:
    - path: sweeps/random/Bias.json
      hash: md5
      md5: bf9d967ab063e4605ca42abce936d3b1
      size: 287
  export-random-BiasedMF-ALS:
    cmd: python ../../action.py sweep export sweeps/random/BiasedMF-ALS.duckdb rmse
    deps:
    - path: sweeps/random/BiasedMF-ALS.duckdb
      hash: md5
      md5: 933bfeec8d0f6fdc2d2dc1ff4b54a2bf
      size: 28323840
    outs:
    - path: sweeps/random/BiasedMF-ALS.csv
      hash: md5
      md5: bd81b2a2a1d25bbeb1a70efbcdfbf6f0
      size: 3908
    - path: sweeps/random/BiasedMF-ALS.json
      hash: md5
      md5: b8bf7a1adfe95aa88df9f39e90d75a57
      size: 308
  export-random-ImplicitMF-ALS:
    cmd: lenskit-codex sweep export -o sweeps/random/ImplicitMF-ALS.json sweeps/random/ImplicitMF-ALS
      RBP
    deps:
    - path: sweeps/random/ImplicitMF-ALS
      hash: md5
      md5: a3b8a81e10f19fb673debd15bfa3aa16.dir
      size: 132550980
      nfiles: 244
    outs:
    - path: sweeps/random/ImplicitMF-ALS.json
      hash: md5
      md5: 5a73327bf0ab3abc56f7789477ba4cb8
      size: 222
  export-random-IKNN-Explicit:
    cmd: python ../../action.py sweep export sweeps/random/IKNN-Explicit.duckdb rmse
    deps:
    - path: sweeps/random/IKNN-Explicit.duckdb
      hash: md5
      md5: 28c0269e30e9047263634f36bed31ccc
      size: 12333056
    outs:
    - path: sweeps/random/IKNN-Explicit.csv
      hash: md5
      md5: a9f13fba26252620d5e30ac52796cd2e
      size: 1576
    - path: sweeps/random/IKNN-Explicit.json
      hash: md5
      md5: 75c7966e1b1602abd3c2eeda7aeba7d9
      size: 306
  export-random-IKNN-Implicit:
    cmd: python ../../action.py sweep export sweeps/random/IKNN-Implicit.duckdb ndcg
    deps:
    - path: sweeps/random/IKNN-Implicit.duckdb
      hash: md5
      md5: 13f47bed22d529022e5829c3024a32c4
      size: 11546624
    outs:
    - path: sweeps/random/IKNN-Implicit.csv
      hash: md5
      md5: 62fd5269551936c2e51eaf025a318479
      size: 1105
    - path: sweeps/random/IKNN-Implicit.json
      hash: md5
      md5: d58675b3abf7d10b9e36d0d3a82746b3
      size: 246
  run-random-default-Bias:
    cmd: lenskit-codex generate --default --test-part=-0 --assignments=splits/random.duckdb
      --ratings=ratings.duckdb -o runs/random-default/Bias Bias
    deps:
    - path: ../../codex/models/Bias.py
      hash: md5
      md5: 117b6cd0fbd71ad6cb3937b8bcf62848
      size: 382
    - path: ratings.duckdb
      hash: md5
      md5: 6f48e3d41018b7f1deb4a9f5aa2c0ecf
      size: 11284480
    - path: splits/random.duckdb
      hash: md5
      md5: 383d2778a4d6f26f1518f2c648049df3
      size: 536576
    outs:
    - path: runs/random-default/Bias
      hash: md5
      md5: 655ebc76a5f24ba6ab93fc5242cede58.dir
      size: 2990563
      nfiles: 67
  run-random-sweep-best-Bias:
    cmd: lenskit-codex generate --param-file=sweeps/random/Bias.json --split=splits/random.toml
      --test-part=-0 -o runs/random-sweep-best/Bias Bias
    deps:
    - path: ../../models/Bias.toml
      hash: md5
      md5: 97f305e8c04fb52cff715d59711b5eed
      size: 146
    - path: ratings.duckdb
      hash: md5
      md5: 6f48e3d41018b7f1deb4a9f5aa2c0ecf
      size: 11284480
    - path: splits/random.duckdb
      hash: md5
      md5: 73e24193c1454e73ad0845182e86782d
      size: 536576
    - path: sweeps/random/Bias.json
      hash: md5
      md5: bf9d967ab063e4605ca42abce936d3b1
      size: 287
    outs:
    - path: runs/random-sweep-best/Bias
      hash: md5
      md5: 1c7ee97cb14ac9b59edb68c5a82dc2f3.dir
      size: 3065711
      nfiles: 67
  run-random-default-Popular:
    cmd: lenskit-codex generate --default --test-part=-0 --assignments=splits/random.duckdb
      --ratings=ratings.duckdb -o runs/random-default/Popular Popular
    deps:
    - path: ../../codex/models/Popular.py
      hash: md5
      md5: 552235616ae50fa42c08566ddc050c59
      size: 215
    - path: ratings.duckdb
      hash: md5
      md5: 6f48e3d41018b7f1deb4a9f5aa2c0ecf
      size: 11284480
    - path: splits/random.duckdb
      hash: md5
      md5: 383d2778a4d6f26f1518f2c648049df3
      size: 536576
    outs:
    - path: runs/random-default/Popular
      hash: md5
      md5: 0f2eca38f94fd9a422fd98c3b9d88ffd.dir
      size: 775614
      nfiles: 35
  run-random-default-BiasedMF-ALS:
    cmd: lenskit-codex generate --default --split=splits/random.toml --test-part=-0
      -o runs/random-default/BiasedMF-ALS BiasedMF-ALS
    deps:
    - path: ../../models/BiasedMF-ALS.toml
      hash: md5
      md5: d6a4dc846449f893683a847940f9c176
      size: 166
    - path: ratings.duckdb
      hash: md5
      md5: 6f48e3d41018b7f1deb4a9f5aa2c0ecf
      size: 11284480
    - path: splits/random.duckdb
      hash: md5
      md5: 73e24193c1454e73ad0845182e86782d
      size: 536576
    outs:
    - path: runs/random-default/BiasedMF-ALS
      hash: md5
      md5: c0835bb17b2973a5fc6e325199751259.dir
      size: 3545287
      nfiles: 67
  run-random-sweep-best-BiasedMF-ALS:
    cmd: python ../../action.py generate --param-file=sweeps/random/BiasedMF-ALS.json
      --test-part=-0 --assignments=splits/random.duckdb --ratings=ratings.duckdb -o
      runs/random-sweep-best/BiasedMF-ALS.duckdb BiasedMF-ALS
    deps:
    - path: ../../codex/models/BiasedMF_ALS.py
      hash: md5
      md5: 70b01ec78dc3f1c3d09190c032bc05a6
      size: 349
    - path: ratings.duckdb
      hash: md5
      md5: 4c71c11bc9aa7b5f7fb561c7570e3a48
      size: 11284480
    - path: splits/random.duckdb
      hash: md5
      md5: 23c62fcd51a637d1109d93c6341e9ec0
      size: 536576
    - path: sweeps/random/BiasedMF-ALS.json
      hash: md5
      md5: b8bf7a1adfe95aa88df9f39e90d75a57
      size: 308
    outs:
    - path: runs/random-sweep-best/BiasedMF-ALS.duckdb
      hash: md5
      md5: f2bc116f64b550eda0afa8a5a561d170
      size: 4206592
  run-random-default-ImplicitMF-ALS:
    cmd: lenskit-codex generate --default --test-part=-0 --assignments=splits/random.duckdb
      --ratings=ratings.duckdb -o runs/random-default/ImplicitMF-ALS ImplicitMF-ALS
    deps:
    - path: ../../codex/models/ImplicitMF_ALS.py
      hash: md5
      md5: e9578e84370030be5865ea9c33aad05b
      size: 348
    - path: ratings.duckdb
      hash: md5
      md5: 6f48e3d41018b7f1deb4a9f5aa2c0ecf
      size: 11284480
    - path: splits/random.duckdb
      hash: md5
      md5: 383d2778a4d6f26f1518f2c648049df3
      size: 536576
    outs:
    - path: runs/random-default/ImplicitMF-ALS
      hash: md5
      md5: 12efea781942ec539fcdd0c3a4b40a16.dir
      size: 3342402
      nfiles: 18
  run-random-sweep-best-ImplicitMF-ALS:
    cmd: python ../../action.py generate --param-file=sweeps/random/ImplicitMF-ALS.json
      --test-part=-0 --assignments=splits/random.duckdb --ratings=ratings.duckdb -o
      runs/random-sweep-best/ImplicitMF-ALS.duckdb ImplicitMF-ALS
    deps:
    - path: ../../codex/models/ImplicitMF_ALS.py
      hash: md5
      md5: f88cb5bd1014e55b8c0d9a1650863c94
      size: 359
    - path: ratings.duckdb
      hash: md5
      md5: 4c71c11bc9aa7b5f7fb561c7570e3a48
      size: 11284480
    - path: splits/random.duckdb
      hash: md5
      md5: 23c62fcd51a637d1109d93c6341e9ec0
      size: 536576
    - path: sweeps/random/ImplicitMF-ALS.json
      hash: md5
      md5: 1c8832a6d45b50c70859949cc32d4e29
      size: 250
    outs:
    - path: runs/random-sweep-best/ImplicitMF-ALS.duckdb
      hash: md5
      md5: ca809d27cae4c883f2de5fc14b75719a
      size: 3944448
  run-random-default-IKNN-Explicit:
    cmd: python ../../action.py generate --default --test-part=-0 --assignments=splits/random.duckdb
      --ratings=ratings.duckdb -o runs/random-default/IKNN-Explicit.duckdb IKNN-Explicit
    deps:
    - path: ../../codex/models/IKNN_Explicit.py
      hash: md5
      md5: d7b6a1734bea39997f94df4fa0c4900e
      size: 378
    - path: ratings.duckdb
      hash: md5
      md5: 4c71c11bc9aa7b5f7fb561c7570e3a48
      size: 11284480
    - path: splits/random.duckdb
      hash: md5
      md5: 23c62fcd51a637d1109d93c6341e9ec0
      size: 536576
    outs:
    - path: runs/random-default/IKNN-Explicit.duckdb
      hash: md5
      md5: ec8895bfee45dba5e3459b5d630b9424
      size: 4206592
  run-random-sweep-best-IKNN-Explicit:
    cmd: python ../../action.py generate --param-file=sweeps/random/IKNN-Explicit.json
      --test-part=-0 --assignments=splits/random.duckdb --ratings=ratings.duckdb -o
      runs/random-sweep-best/IKNN-Explicit.duckdb IKNN-Explicit
    deps:
    - path: ../../codex/models/IKNN_Explicit.py
      hash: md5
      md5: d7b6a1734bea39997f94df4fa0c4900e
      size: 378
    - path: ratings.duckdb
      hash: md5
      md5: 4c71c11bc9aa7b5f7fb561c7570e3a48
      size: 11284480
    - path: splits/random.duckdb
      hash: md5
      md5: 23c62fcd51a637d1109d93c6341e9ec0
      size: 536576
    - path: sweeps/random/IKNN-Explicit.json
      hash: md5
      md5: 75c7966e1b1602abd3c2eeda7aeba7d9
      size: 306
    outs:
    - path: runs/random-sweep-best/IKNN-Explicit.duckdb
      hash: md5
      md5: ec406e93981a12e962ca455eb5e4615e
      size: 3944448
  run-random-default-IKNN-Implicit:
    cmd: python ../../action.py generate --default --test-part=-0 --assignments=splits/random.duckdb
      --ratings=ratings.duckdb -o runs/random-default/IKNN-Implicit.duckdb IKNN-Implicit
    deps:
    - path: ../../codex/models/IKNN_Implicit.py
      hash: md5
      md5: 3ca2f37d6c1983760fcd2ff03a0a57cb
      size: 363
    - path: ratings.duckdb
      hash: md5
      md5: 4c71c11bc9aa7b5f7fb561c7570e3a48
      size: 11284480
    - path: splits/random.duckdb
      hash: md5
      md5: 23c62fcd51a637d1109d93c6341e9ec0
      size: 536576
    outs:
    - path: runs/random-default/IKNN-Implicit.duckdb
      hash: md5
      md5: 0bc64ccbb43002b257b48fe5cf51731a
      size: 3944448
  run-random-sweep-best-IKNN-Implicit:
    cmd: python ../../action.py generate --param-file=sweeps/random/IKNN-Implicit.json
      --test-part=-0 --assignments=splits/random.duckdb --ratings=ratings.duckdb -o
      runs/random-sweep-best/IKNN-Implicit.duckdb IKNN-Implicit
    deps:
    - path: ../../codex/models/IKNN_Implicit.py
      hash: md5
      md5: 3ca2f37d6c1983760fcd2ff03a0a57cb
      size: 363
    - path: ratings.duckdb
      hash: md5
      md5: 4c71c11bc9aa7b5f7fb561c7570e3a48
      size: 11284480
    - path: splits/random.duckdb
      hash: md5
      md5: 23c62fcd51a637d1109d93c6341e9ec0
      size: 536576
    - path: sweeps/random/IKNN-Implicit.json
      hash: md5
      md5: d58675b3abf7d10b9e36d0d3a82746b3
      size: 246
    outs:
    - path: runs/random-sweep-best/IKNN-Implicit.duckdb
      hash: md5
      md5: afa42bfc99470af1a87a14efe0d3eb51
      size: 3944448
  run-random-default-UKNN-Explicit:
    cmd: python ../../action.py generate --default --test-part=-0 --assignments=splits/random.duckdb
      --ratings=ratings.duckdb -o runs/random-default/UKNN-Explicit.duckdb UKNN-Explicit
    deps:
    - path: ../../codex/models/UKNN_Explicit.py
      hash: md5
      md5: ef4186443ab61ef9d7ddfc2d71b86fb4
      size: 378
    - path: ratings.duckdb
      hash: md5
      md5: 4c71c11bc9aa7b5f7fb561c7570e3a48
      size: 11284480
    - path: splits/random.duckdb
      hash: md5
      md5: 23c62fcd51a637d1109d93c6341e9ec0
      size: 536576
    outs:
    - path: runs/random-default/UKNN-Explicit.duckdb
      hash: md5
      md5: a86a1afe43b08d29a9f368772149ee92
      size: 4206592
  sweep-random-UKNN-Explicit:
    cmd: lenskit-codex sweep run --ds-name=ML1M --split=splits/random.toml --test-part=0
      UKNN-Explicit sweeps/random/UKNN-Explicit
    deps:
    - path: ../../models/UKNN-Explicit.toml
      hash: md5
      md5: 89a00ff4388a0c347c22d09854f61dd0
      size: 169
    - path: ratings.duckdb
      hash: md5
      md5: 6f48e3d41018b7f1deb4a9f5aa2c0ecf
      size: 11284480
    - path: splits/random.duckdb
      hash: md5
      md5: 73e24193c1454e73ad0845182e86782d
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/UKNN-Explicit
      hash: md5
      md5: d77e3a1485e49dce7d8a635a071ded85.dir
      size: 51588877
      nfiles: 196
  export-random-UKNN-Explicit:
    cmd: python ../../action.py sweep export sweeps/random/UKNN-Explicit.duckdb rmse
    deps:
    - path: sweeps/random/UKNN-Explicit.duckdb
      hash: md5
      md5: 43c79dd3c2d6164e26cfed9786e5017d
      size: 328740864
    outs:
    - path: sweeps/random/UKNN-Explicit.csv
      hash: md5
      md5: 9a61096c17c032de4a8c6926d57f3994
      size: 1713
    - path: sweeps/random/UKNN-Explicit.json
      hash: md5
      md5: a5aeb090589f0207f59f210c1a21cc56
      size: 320
  run-random-sweep-best-UKNN-Explicit:
    cmd: python ../../action.py generate --param-file=sweeps/random/UKNN-Explicit.json
      --test-part=-0 --assignments=splits/random.duckdb --ratings=ratings.duckdb -o
      runs/random-sweep-best/UKNN-Explicit.duckdb UKNN-Explicit
    deps:
    - path: ../../codex/models/UKNN_Explicit.py
      hash: md5
      md5: ef4186443ab61ef9d7ddfc2d71b86fb4
      size: 378
    - path: ratings.duckdb
      hash: md5
      md5: 4c71c11bc9aa7b5f7fb561c7570e3a48
      size: 11284480
    - path: splits/random.duckdb
      hash: md5
      md5: 23c62fcd51a637d1109d93c6341e9ec0
      size: 536576
    - path: sweeps/random/UKNN-Explicit.json
      hash: md5
      md5: a5aeb090589f0207f59f210c1a21cc56
      size: 320
    outs:
    - path: runs/random-sweep-best/UKNN-Explicit.duckdb
      hash: md5
      md5: 03135b2aeced9146170f9c676beedd8c
      size: 4206592
  run-random-default-UKNN-Implicit:
    cmd: python ../../action.py generate --default --test-part=-0 --assignments=splits/random.duckdb
      --ratings=ratings.duckdb -o runs/random-default/UKNN-Implicit.duckdb UKNN-Implicit
    deps:
    - path: ../../codex/models/UKNN_Implicit.py
      hash: md5
      md5: fd52b2729524c3279709cc034aea9df5
      size: 363
    - path: ratings.duckdb
      hash: md5
      md5: 4c71c11bc9aa7b5f7fb561c7570e3a48
      size: 11284480
    - path: splits/random.duckdb
      hash: md5
      md5: 23c62fcd51a637d1109d93c6341e9ec0
      size: 536576
    outs:
    - path: runs/random-default/UKNN-Implicit.duckdb
      hash: md5
      md5: bdb011365106e9ff3bbd6e6bd48b0baa
      size: 3944448
  sweep-random-UKNN-Implicit:
    cmd: python ../../action.py sweep run -p 0 --ratings=ratings.duckdb --assignments=splits/random.duckdb
      UKNN-Implicit sweeps/random/UKNN-Implicit.duckdb
    deps:
    - path: ../../codex/models/UKNN_Implicit.py
      hash: md5
      md5: fd52b2729524c3279709cc034aea9df5
      size: 363
    - path: ratings.duckdb
      hash: md5
      md5: 4c71c11bc9aa7b5f7fb561c7570e3a48
      size: 11284480
    - path: splits/random.duckdb
      hash: md5
      md5: 23c62fcd51a637d1109d93c6341e9ec0
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/UKNN-Implicit.duckdb
      hash: md5
      md5: f5c3e79bf27e8a3d33ac7455252b1a68
      size: 54013952
  export-random-UKNN-Implicit:
    cmd: python ../../action.py sweep export sweeps/random/UKNN-Implicit.duckdb ndcg
    deps:
    - path: sweeps/random/UKNN-Implicit.duckdb
      hash: md5
      md5: eedc603c99657ede51e079cd281d1a8d
      size: 343945216
    outs:
    - path: sweeps/random/UKNN-Implicit.csv
      hash: md5
      md5: 5dd277d7cd31cf366ad19b0b9f197506
      size: 1255
    - path: sweeps/random/UKNN-Implicit.json
      hash: md5
      md5: a1a6b9f84560109f89140748c3989673
      size: 262
  run-random-sweep-best-UKNN-Implicit:
    cmd: python ../../action.py generate --param-file=sweeps/random/UKNN-Implicit.json
      --test-part=-0 --assignments=splits/random.duckdb --ratings=ratings.duckdb -o
      runs/random-sweep-best/UKNN-Implicit.duckdb UKNN-Implicit
    deps:
    - path: ../../codex/models/UKNN_Implicit.py
      hash: md5
      md5: fd52b2729524c3279709cc034aea9df5
      size: 363
    - path: ratings.duckdb
      hash: md5
      md5: 4c71c11bc9aa7b5f7fb561c7570e3a48
      size: 11284480
    - path: splits/random.duckdb
      hash: md5
      md5: 23c62fcd51a637d1109d93c6341e9ec0
      size: 536576
    - path: sweeps/random/UKNN-Implicit.json
      hash: md5
      md5: a1a6b9f84560109f89140748c3989673
      size: 262
    outs:
    - path: runs/random-sweep-best/UKNN-Implicit.duckdb
      hash: md5
      md5: 0bcc1ffaed9bbf011233f287eddbb8f1
      size: 3944448
  run-random-default-Implicit-BPR:
    cmd: python ../../action.py generate --default --test-part=-0 --assignments=splits/random.duckdb
      --ratings=ratings.duckdb -o runs/random-default/Implicit-BPR.duckdb Implicit-BPR
    deps:
    - path: ../../codex/models/Implicit_BPR.py
      hash: md5
      md5: ead16dddccd03e2611e9e0bef3e4686c
      size: 360
    - path: ratings.duckdb
      hash: md5
      md5: 4c71c11bc9aa7b5f7fb561c7570e3a48
      size: 11284480
    - path: splits/random.duckdb
      hash: md5
      md5: 23c62fcd51a637d1109d93c6341e9ec0
      size: 536576
    outs:
    - path: runs/random-default/Implicit-BPR.duckdb
      hash: md5
      md5: cbb62173eae815288d5a41a7e6cdd29b
      size: 3944448
  sweep-random-Implicit-BPR:
    cmd: python ../../action.py sweep run -p 0 --ratings=ratings.duckdb --assignments=splits/random.duckdb
      Implicit-BPR sweeps/random/Implicit-BPR.duckdb
    deps:
    - path: ../../codex/models/Implicit_BPR.py
      hash: md5
      md5: ead16dddccd03e2611e9e0bef3e4686c
      size: 360
    - path: ratings.duckdb
      hash: md5
      md5: 4c71c11bc9aa7b5f7fb561c7570e3a48
      size: 11284480
    - path: splits/random.duckdb
      hash: md5
      md5: 23c62fcd51a637d1109d93c6341e9ec0
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/Implicit-BPR.duckdb
      hash: md5
      md5: edd993f70d928f17f0e7d1a91be572e0
      size: 151007232
  export-random-Implicit-BPR:
    cmd: python ../../action.py sweep export sweeps/random/Implicit-BPR.duckdb ndcg
    deps:
    - path: sweeps/random/Implicit-BPR.duckdb
      hash: md5
      md5: f1a4d2a3081bd50aec5e7774a7f684f7
      size: 1005072384
    outs:
    - path: sweeps/random/Implicit-BPR.csv
      hash: md5
      md5: cc19bdd51610c95c7d47c070f9370944
      size: 2767
    - path: sweeps/random/Implicit-BPR.json
      hash: md5
      md5: 80b0bfaac5688526fb77aaf304c1893e
      size: 263
  run-random-sweep-best-Implicit-BPR:
    cmd: python ../../action.py generate --param-file=sweeps/random/Implicit-BPR.json
      --test-part=-0 --assignments=splits/random.duckdb --ratings=ratings.duckdb -o
      runs/random-sweep-best/Implicit-BPR.duckdb Implicit-BPR
    deps:
    - path: ../../codex/models/Implicit_BPR.py
      hash: md5
      md5: ead16dddccd03e2611e9e0bef3e4686c
      size: 360
    - path: ratings.duckdb
      hash: md5
      md5: 4c71c11bc9aa7b5f7fb561c7570e3a48
      size: 11284480
    - path: splits/random.duckdb
      hash: md5
      md5: 23c62fcd51a637d1109d93c6341e9ec0
      size: 536576
    - path: sweeps/random/Implicit-BPR.json
      hash: md5
      md5: 80b0bfaac5688526fb77aaf304c1893e
      size: 263
    outs:
    - path: runs/random-sweep-best/Implicit-BPR.duckdb
      hash: md5
      md5: 0ee65b4e4693d11176985e0690f04bdc
      size: 3944448
  run-random-default-HPF:
    cmd: python ../../action.py generate --default --test-part=-0 --assignments=splits/random.duckdb
      --ratings=ratings.duckdb -o runs/random-default/HPF.duckdb HPF
    deps:
    - path: ../../codex/models/HPF.py
      hash: md5
      md5: 2d51c82536e7137ac38f1217a3d551b1
      size: 313
    - path: ratings.duckdb
      hash: md5
      md5: 4c71c11bc9aa7b5f7fb561c7570e3a48
      size: 11284480
    - path: splits/random.duckdb
      hash: md5
      md5: 23c62fcd51a637d1109d93c6341e9ec0
      size: 536576
    outs:
    - path: runs/random-default/HPF.duckdb
      hash: md5
      md5: e3c82406099442c76d735750d51b3cdf
      size: 4206592
  sweep-random-HPF:
    cmd: lenskit-codex sweep run --ds-name=ML1M --split=splits/random.toml --test-part=0
      HPF sweeps/random/HPF
    deps:
    - path: ../../models/HPF.toml
      hash: md5
      md5: 0b2c295f5f53e6c0e41cddc0f31b85b2
      size: 146
    - path: ratings.duckdb
      hash: md5
      md5: 6f48e3d41018b7f1deb4a9f5aa2c0ecf
      size: 11284480
    - path: splits/random.duckdb
      hash: md5
      md5: 73e24193c1454e73ad0845182e86782d
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/HPF
      hash: md5
      md5: ae9c390d51640754269df375e3ba28ab.dir
      size: 44601340
      nfiles: 84

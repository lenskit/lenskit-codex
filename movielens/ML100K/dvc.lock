schema: '2.0'
stages:
  import-data:
    cmd: python ../import-ml.py ml-100k.zip
    deps:
    - path: ../import-ml.py
      hash: md5
      md5: 4af94250c13bdd7beff8235e442549c6
      size: 3732
    - path: ml-100k.zip
      hash: md5
      md5: 0e33842e24a9c977be4e0107933c0723
      size: 4924029
    outs:
    - path: ratings.duckdb
      hash: md5
      md5: 547f56bb2ade8993dd3a1098db3f7138
      size: 1323008
  import-ml-100k:
    cmd: python ../import-ml.py ml-100k.zip
    deps:
    - path: ../import-ml.py
      hash: md5
      md5: af82da24d16bfef7681fe0b7910d5069
      size: 3678
    - path: ../ml-stats.sql
      hash: md5
      md5: b016dc983a2156e0712a846097a968e7
      size: 1307
    - path: ml-100k.zip
      hash: md5
      md5: 0e33842e24a9c977be4e0107933c0723
      size: 4924029
    outs:
    - path: ratings.duckdb
      hash: md5
      md5: a770a8e6c558a398515b74def824e7b8
      size: 2371584
  ml-100k-stats:
    cmd: python ../../scripts/duckdb-sql.py -d stats.duckdb ../ml-stats.sql
    deps:
    - path: ../ml-stats.sql
      hash: md5
      md5: bf09f212fabc98275ae949932889654c
      size: 1374
    - path: ratings.parquet
      hash: md5
      md5: 17acf184eb0bfe350d35f4c39fceb314
      size: 846024
    outs:
    - path: stats.duckdb
      hash: md5
      md5: 005070d0bc196fbcbfec774407d7b0a8
      size: 1323008
  split-random:
    cmd: lenskit-codex split random.toml
    deps:
    - path: ../ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: random.toml
      hash: md5
      md5: 9d1d0dfd07c3cea4845016496b4294a5
      size: 165
    params:
      ../../../config.toml:
        random.seed: 20240717
    outs:
    - path: random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
  Bias:
    cmd: python ../../scripts/sweep.py -p 1 Bias splits/random.duckdb ratings.duckdb
      sweeps/random/Bias.duckdb
    deps:
    - path: ../../codex/models/Bias.py
      hash: md5
      md5: e35eac761bf892674a6fb8570132e7f1
      size: 375
    - path: ratings.duckdb
      hash: md5
      md5: a770a8e6c558a398515b74def824e7b8
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 104d0924001308c5c1af255bea2d2825
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/Bias.duckdb
      hash: md5
      md5: 4c3d84d04a4885aa47f9ae54d908bc0f
      size: 2633728
  BiasedMF-ALS:
    cmd: python ../../scripts/sweep.py -p 1 BiasedMF-ALS splits/random.duckdb ratings.duckdb
      sweeps/random/BiasedMF-ALS.duckdb
    deps:
    - path: ../../codex/models/BiasedMF_ALS.py
      hash: md5
      md5: 70b01ec78dc3f1c3d09190c032bc05a6
      size: 349
    - path: ratings.duckdb
      hash: md5
      md5: a770a8e6c558a398515b74def824e7b8
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 104d0924001308c5c1af255bea2d2825
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/BiasedMF-ALS.duckdb
      hash: md5
      md5: f353cb748be0455329378bc0d79bdfac
      size: 4993024
  ImplicitMF-ALS:
    cmd: python ../../scripts/sweep.py -p 1 ImplicitMF-ALS splits/random.duckdb ratings.duckdb
      sweeps/random/ImplicitMF-ALS.duckdb
    deps:
    - path: ../../codex/models/ImplicitMF_ALS.py
      hash: md5
      md5: 69f84877400748da1886d63579ec2f3e
      size: 340
    - path: ratings.duckdb
      hash: md5
      md5: a770a8e6c558a398515b74def824e7b8
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 104d0924001308c5c1af255bea2d2825
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/ImplicitMF-ALS.duckdb
      hash: md5
      md5: d7e33a3b57eae8f26ba846aff1ba0b14
      size: 4993024
  IKNN_Explicit:
    cmd: python ../../scripts/sweep.py -p 1 IKNN_Explicit splits/random.duckdb ratings.duckdb
      sweeps/random/IKNN_Explicit.duckdb
    deps:
    - path: ../../codex/models/IKNN_Explicit.py
      hash: md5
      md5: d7b6a1734bea39997f94df4fa0c4900e
      size: 378
    - path: ratings.duckdb
      hash: md5
      md5: a770a8e6c558a398515b74def824e7b8
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 104d0924001308c5c1af255bea2d2825
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/IKNN_Explicit.duckdb
      hash: md5
      md5: bc1e581e78bc92089c1ff4ea78b8459d
      size: 1585152
  sweep-random-Bias:
    cmd: lenskit-codex sweep run --ds-name=ML100K --split=splits/random.toml --test-part=0
      Bias sweeps/random/Bias
    deps:
    - path: ../../models/Bias.toml
      hash: md5
      md5: b6dcedd9edc5792a18294130a71c6335
      size: 152
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/Bias
      hash: md5
      md5: 8c64a78f8b3b50c77f718b81e6271652.dir
      size: 151757
      nfiles: 6
  sweep-random-BiasedMF-ALS:
    cmd: lenskit-codex sweep run --ds-name=ML100K --split=splits/random.toml --test-part=0
      BiasedMF-ALS sweeps/random/BiasedMF-ALS
    deps:
    - path: ../../models/BiasedMF-ALS.toml
      hash: md5
      md5: e6cb9274cf0c63db90cbf272212932da
      size: 165
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/BiasedMF-ALS
      hash: md5
      md5: c804063967d3ecf8492f004d8b1b12b2.dir
      size: 279963
      nfiles: 6
  sweep-random-ImplicitMF-ALS:
    cmd: lenskit-codex sweep run --ds-name=ML100K --split=splits/random.toml --test-part=0
      ImplicitMF-ALS sweeps/random/ImplicitMF-ALS
    deps:
    - path: ../../models/ImplicitMF-ALS.toml
      hash: md5
      md5: 1d621be010b6a13b8ef6ced024a6ba25
      size: 150
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/ImplicitMF-ALS
      hash: md5
      md5: 6e46a9e0b4f1b4a327948355c6a801b6.dir
      size: 231148
      nfiles: 5
  sweep-random-IKNN-Explicit:
    cmd: lenskit-codex sweep run --ds-name=ML100K --split=splits/random.toml --test-part=0
      IKNN-Explicit sweeps/random/IKNN-Explicit
    deps:
    - path: ../../models/IKNN-Explicit.toml
      hash: md5
      md5: 3cea5881e1b685e8591834ba606d7b6c
      size: 168
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/IKNN-Explicit
      hash: md5
      md5: 9db9ba367886b697f874ca4e94d0aab8.dir
      size: 97092
      nfiles: 6
  sweep-random-IKNN-Implicit:
    cmd: lenskit-codex sweep run --ds-name=ML100K --split=splits/random.toml --test-part=0
      IKNN-Implicit sweeps/random/IKNN-Implicit
    deps:
    - path: ../../models/IKNN-Implicit.toml
      hash: md5
      md5: a44edac6bd383657b0fe8c88d12b69cf
      size: 151
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/IKNN-Implicit
      hash: md5
      md5: e617ed6aeaf6b2102a2cc1ab1d1b5301.dir
      size: 66901
      nfiles: 5
  export-random-ImplicitMF-ALS:
    cmd: lenskit-codex sweep export -o sweeps/random/ImplicitMF-ALS-grid.json sweeps/random/ImplicitMF-ALS-grid
      RBP
    deps:
    - path: sweeps/random/ImplicitMF-ALS-grid
      hash: md5
      md5: 6e46a9e0b4f1b4a327948355c6a801b6.dir
      size: 231148
      nfiles: 5
    outs:
    - path: sweeps/random/ImplicitMF-ALS-grid.json
      hash: md5
      md5: 88d43b130c3b066ed5dbe120a61c7d81
      size: 232
  export-random-IKNN-Implicit:
    cmd: lenskit-codex sweep export -o sweeps/random/IKNN-Implicit-grid.json sweeps/random/IKNN-Implicit-grid
      RBP
    deps:
    - path: sweeps/random/IKNN-Implicit-grid
      hash: md5
      md5: e617ed6aeaf6b2102a2cc1ab1d1b5301.dir
      size: 66901
      nfiles: 5
    outs:
    - path: sweeps/random/IKNN-Implicit-grid.json
      hash: md5
      md5: bd7f1d549c83af129d29b5c4ac8b2425
      size: 254
  export-random-Bias:
    cmd: lenskit-codex sweep export -o sweeps/random/Bias-random.json sweeps/random/Bias-random
      RMSE
    deps:
    - path: sweeps/random/Bias-random
      hash: md5
      md5: 767ccd95fd8d5217cce6ba5ad7f0b35a.dir
      size: 1078033
      nfiles: 6
    outs:
    - path: sweeps/random/Bias-random.json
      hash: md5
      md5: c4a09488af96106f8a63cdedf58d5085
      size: 314
  export-random-IKNN-Explicit:
    cmd: lenskit-codex sweep export -o sweeps/random/IKNN-Explicit-grid.json sweeps/random/IKNN-Explicit-grid
      RMSE
    deps:
    - path: sweeps/random/IKNN-Explicit-grid
      hash: md5
      md5: 9db9ba367886b697f874ca4e94d0aab8.dir
      size: 97092
      nfiles: 6
    outs:
    - path: sweeps/random/IKNN-Explicit-grid.json
      hash: md5
      md5: 3f90fc36f8222a49cf1a5a5f90717607
      size: 326
  export-random-BiasedMF-ALS:
    cmd: lenskit-codex sweep export -o sweeps/random/BiasedMF-ALS-grid.json sweeps/random/BiasedMF-ALS-grid
      RMSE
    deps:
    - path: sweeps/random/BiasedMF-ALS-grid
      hash: md5
      md5: c804063967d3ecf8492f004d8b1b12b2.dir
      size: 279963
      nfiles: 6
    outs:
    - path: sweeps/random/BiasedMF-ALS-grid.json
      hash: md5
      md5: f59b041122584934ac600b197dbb345c
      size: 298
  import:
    cmd: lenskit-codex movielens import --stat-sql=../ml-stats.sql ml-100k.zip
    deps:
    - path: ../ml-stats.sql
      hash: md5
      md5: b016dc983a2156e0712a846097a968e7
      size: 1307
    - path: ml-100k.zip
      hash: md5
      md5: 0e33842e24a9c977be4e0107933c0723
      size: 4924029
    outs:
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
  run-random-grid-best-Bias:
    cmd: lenskit-codex generate --param-file=sweeps/random/Bias-grid.json --test-part=-0
      --ds-name=ML100K --split=splits/random.toml -o runs/random-grid-best/Bias Bias
    deps:
    - path: ../../models/Bias.toml
      hash: md5
      md5: 3eeb8179cedf97e8b91f6cb91ed40524
      size: 320
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    - path: sweeps/random/Bias-grid.json
      hash: md5
      md5: fb3659fda3d936b80099e1fa69e925d1
      size: 283
    outs:
    - path: runs/random-grid-best/Bias
      hash: md5
      md5: 89cb20fec74e0427fca3fa8badc51721.dir
      size: 34149
      nfiles: 5
  run-random-default-ImplicitMF-ALS:
    cmd: lenskit-codex generate --default --ds-name=ML100K --split=splits/random.toml
      -o runs/random-default/ImplicitMF-ALS ImplicitMF-ALS
    deps:
    - path: ../../models/ImplicitMF-ALS.toml
      hash: md5
      md5: 5c7d13e705c5945812cd47b8fc8fbfc9
      size: 157
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    outs:
    - path: runs/random-default/ImplicitMF-ALS
      hash: md5
      md5: bcd642a954031ed63666f293e869f68b.dir
      size: 31386
      nfiles: 4
  collect-metrics:
    cmd: lenskit-codex collect metrics -S run-summary.csv -U run-user-metrics.parquet
      -L runs/manifest.csv
    deps:
    - path: runs/random-default/Bias
      hash: md5
      md5: 7e0774b6767814b10096f5b9cb5642c4.dir
      size: 43508
      nfiles: 5
    - path: runs/random-default/BiasedMF-ALS
      hash: md5
      md5: ad951ec90a29a58fbf26cc1a7e3c60bb.dir
      size: 41745
      nfiles: 5
    - path: runs/random-default/IKNN-Explicit
      hash: md5
      md5: f11639e6df7178aca775d14440b97030.dir
      size: 40844
      nfiles: 5
    - path: runs/random-default/IKNN-Implicit
      hash: md5
      md5: 7e0a282500df14431efc469f1f17abac.dir
      size: 28865
      nfiles: 4
    - path: runs/random-default/ImplicitMF-ALS
      hash: md5
      md5: bcd642a954031ed63666f293e869f68b.dir
      size: 31386
      nfiles: 4
    - path: runs/random-default/Popular
      hash: md5
      md5: 8f9c5a2bb9e2de2a8f160496ca3f9756.dir
      size: 27100
      nfiles: 4
    - path: runs/random-grid-best/Bias
      hash: md5
      md5: 89cb20fec74e0427fca3fa8badc51721.dir
      size: 34149
      nfiles: 5
    - path: runs/random-grid-best/BiasedMF-ALS
      hash: md5
      md5: 05d2d1dac7b0e0c2ff1373e5080602f8.dir
      size: 34178
      nfiles: 5
    - path: runs/random-grid-best/IKNN-Explicit
      hash: md5
      md5: 40a103f774d1c63b5c9f58fd88ab33a6.dir
      size: 33518
      nfiles: 5
    - path: runs/random-grid-best/IKNN-Implicit
      hash: md5
      md5: c7932e6fd235a23a97b0d32725aa4b15.dir
      size: 23572
      nfiles: 4
    - path: runs/random-grid-best/ImplicitMF-ALS
      hash: md5
      md5: 29c19304609a1ab5d50665597441050c.dir
      size: 23534
      nfiles: 4
    - path: runs/random-random-best/Bias
      hash: md5
      md5: ffe7b5a0cc36cf794084c27b51ee3d5e.dir
      size: 34466
      nfiles: 5
    outs:
    - path: run-summary.csv
      hash: md5
      md5: fbf0263815e065949c675b61861fd60e
      size: 15645
    - path: run-user-metrics.parquet
      hash: md5
      md5: d0d643187110680e13896036021d8a64
      size: 180408
  run-random-grid-best-IKNN-Implicit:
    cmd: lenskit-codex generate --param-file=sweeps/random/IKNN-Implicit-grid.json
      --test-part=-0 --ds-name=ML100K --split=splits/random.toml -o runs/random-grid-best/IKNN-Implicit
      IKNN-Implicit
    deps:
    - path: ../../models/IKNN-Implicit.toml
      hash: md5
      md5: b583d0f97b6363e190f0dd14f7e70b83
      size: 158
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    - path: sweeps/random/IKNN-Implicit-grid.json
      hash: md5
      md5: bd7f1d549c83af129d29b5c4ac8b2425
      size: 254
    outs:
    - path: runs/random-grid-best/IKNN-Implicit
      hash: md5
      md5: c7932e6fd235a23a97b0d32725aa4b15.dir
      size: 23572
      nfiles: 4
  run-random-default-IKNN-Implicit:
    cmd: lenskit-codex generate --default --ds-name=ML100K --split=splits/random.toml
      -o runs/random-default/IKNN-Implicit IKNN-Implicit
    deps:
    - path: ../../models/IKNN-Implicit.toml
      hash: md5
      md5: b583d0f97b6363e190f0dd14f7e70b83
      size: 158
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    outs:
    - path: runs/random-default/IKNN-Implicit
      hash: md5
      md5: 7e0a282500df14431efc469f1f17abac.dir
      size: 28865
      nfiles: 4
  run-random-grid-best-IKNN-Explicit:
    cmd: lenskit-codex generate --param-file=sweeps/random/IKNN-Explicit-grid.json
      --test-part=-0 --ds-name=ML100K --split=splits/random.toml -o runs/random-grid-best/IKNN-Explicit
      IKNN-Explicit
    deps:
    - path: ../../models/IKNN-Explicit.toml
      hash: md5
      md5: 2a940890725e9089b96ffaea51c6445a
      size: 175
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    - path: sweeps/random/IKNN-Explicit-grid.json
      hash: md5
      md5: 3f90fc36f8222a49cf1a5a5f90717607
      size: 326
    outs:
    - path: runs/random-grid-best/IKNN-Explicit
      hash: md5
      md5: 40a103f774d1c63b5c9f58fd88ab33a6.dir
      size: 33518
      nfiles: 5
  run-random-grid-best-BiasedMF-ALS:
    cmd: lenskit-codex generate --param-file=sweeps/random/BiasedMF-ALS-grid.json
      --test-part=-0 --ds-name=ML100K --split=splits/random.toml -o runs/random-grid-best/BiasedMF-ALS
      BiasedMF-ALS
    deps:
    - path: ../../models/BiasedMF-ALS.toml
      hash: md5
      md5: 7629ab519f3017f4e66782bdc61dfa0f
      size: 172
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    - path: sweeps/random/BiasedMF-ALS-grid.json
      hash: md5
      md5: f59b041122584934ac600b197dbb345c
      size: 298
    outs:
    - path: runs/random-grid-best/BiasedMF-ALS
      hash: md5
      md5: 05d2d1dac7b0e0c2ff1373e5080602f8.dir
      size: 34178
      nfiles: 5
  run-random-default-BiasedMF-ALS:
    cmd: lenskit-codex generate --default --ds-name=ML100K --split=splits/random.toml
      -o runs/random-default/BiasedMF-ALS BiasedMF-ALS
    deps:
    - path: ../../models/BiasedMF-ALS.toml
      hash: md5
      md5: 7629ab519f3017f4e66782bdc61dfa0f
      size: 172
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    outs:
    - path: runs/random-default/BiasedMF-ALS
      hash: md5
      md5: ad951ec90a29a58fbf26cc1a7e3c60bb.dir
      size: 41745
      nfiles: 5
  run-random-default-IKNN-Explicit:
    cmd: lenskit-codex generate --default --ds-name=ML100K --split=splits/random.toml
      -o runs/random-default/IKNN-Explicit IKNN-Explicit
    deps:
    - path: ../../models/IKNN-Explicit.toml
      hash: md5
      md5: 2a940890725e9089b96ffaea51c6445a
      size: 175
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    outs:
    - path: runs/random-default/IKNN-Explicit
      hash: md5
      md5: f11639e6df7178aca775d14440b97030.dir
      size: 40844
      nfiles: 5
  run-random-default-Bias:
    cmd: lenskit-codex generate --default --ds-name=ML100K --split=splits/random.toml
      -o runs/random-default/Bias Bias
    deps:
    - path: ../../models/Bias.toml
      hash: md5
      md5: 3eeb8179cedf97e8b91f6cb91ed40524
      size: 320
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    outs:
    - path: runs/random-default/Bias
      hash: md5
      md5: 7e0774b6767814b10096f5b9cb5642c4.dir
      size: 43508
      nfiles: 5
  run-random-default-Popular:
    cmd: lenskit-codex generate --default --ds-name=ML100K --split=splits/random.toml
      -o runs/random-default/Popular Popular
    deps:
    - path: ../../models/Popular.toml
      hash: md5
      md5: c25817c7ea3901786434261d27af0aad
      size: 35
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    outs:
    - path: runs/random-default/Popular
      hash: md5
      md5: 8f9c5a2bb9e2de2a8f160496ca3f9756.dir
      size: 27100
      nfiles: 4
  run-random-default-Implicit-BPR:
    cmd: python ../../action.py generate --default --test-part=-0 --assignments=splits/random.duckdb
      --ratings=ratings.duckdb -o runs/random-default/Implicit-BPR.duckdb Implicit-BPR
    deps:
    - path: ../../codex/models/Implicit_BPR.py
      hash: md5
      md5: ead16dddccd03e2611e9e0bef3e4686c
      size: 360
    - path: ratings.duckdb
      hash: md5
      md5: a770a8e6c558a398515b74def824e7b8
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 0341a9b25f8c8d872957470e9f29df47
      size: 536576
    outs:
    - path: runs/random-default/Implicit-BPR.duckdb
      hash: md5
      md5: 488f024339cf2a7e6124b784383d1114
      size: 1323008
  run-random-default-HPF:
    cmd: lenskit-codex generate --default --split=splits/random.toml --test-part=-0
      -o runs/random-default/HPF HPF
    deps:
    - path: ../../models/HPF.toml
      hash: md5
      md5: 0b2c295f5f53e6c0e41cddc0f31b85b2
      size: 146
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    outs:
    - path: runs/random-default/HPF
      hash: md5
      md5: 9124c11ff7a919c77b615f9774db0767.dir
      size: 25718
      nfiles: 7
  run-random-grid-best-ImplicitMF-ALS:
    cmd: lenskit-codex generate --param-file=sweeps/random/ImplicitMF-ALS-grid.json
      --test-part=-0 --ds-name=ML100K --split=splits/random.toml -o runs/random-grid-best/ImplicitMF-ALS
      ImplicitMF-ALS
    deps:
    - path: ../../models/ImplicitMF-ALS.toml
      hash: md5
      md5: 5c7d13e705c5945812cd47b8fc8fbfc9
      size: 157
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    - path: sweeps/random/ImplicitMF-ALS-grid.json
      hash: md5
      md5: 88d43b130c3b066ed5dbe120a61c7d81
      size: 232
    outs:
    - path: runs/random-grid-best/ImplicitMF-ALS
      hash: md5
      md5: 29c19304609a1ab5d50665597441050c.dir
      size: 23534
      nfiles: 4
  run-random-default-UKNN-Explicit:
    cmd: lenskit-codex generate --default --split=splits/random.toml --test-part=-0
      -o runs/random-default/UKNN-Explicit UKNN-Explicit
    deps:
    - path: ../../models/UKNN-Explicit.toml
      hash: md5
      md5: 89a00ff4388a0c347c22d09854f61dd0
      size: 169
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    outs:
    - path: runs/random-default/UKNN-Explicit
      hash: md5
      md5: b13ea031081648e6448bdb0777f8b3b0.dir
      size: 35074
      nfiles: 11
  sweep-random-UKNN-Explicit:
    cmd: lenskit-codex sweep run --ds-name=ML100K --split=splits/random.toml --test-part=0
      UKNN-Explicit sweeps/random/UKNN-Explicit
    deps:
    - path: ../../models/UKNN-Explicit.toml
      hash: md5
      md5: 89a00ff4388a0c347c22d09854f61dd0
      size: 169
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/UKNN-Explicit
      hash: md5
      md5: adeee32e0938ec37a4184820aeb360c4.dir
      size: 135858
      nfiles: 28
  export-random-UKNN-Explicit:
    cmd: lenskit-codex sweep export -o sweeps/random/UKNN-Explicit.json sweeps/random/UKNN-Explicit
      RMSE
    deps:
    - path: sweeps/random/UKNN-Explicit
      hash: md5
      md5: adeee32e0938ec37a4184820aeb360c4.dir
      size: 135858
      nfiles: 28
    outs:
    - path: sweeps/random/UKNN-Explicit.json
      hash: md5
      md5: 0181ccd6c9019ef9ba31b9bc3b388162
      size: 325
  run-random-grid-best-UKNN-Explicit:
    cmd: lenskit-codex generate --param-file=sweeps/random/UKNN-Explicit.json --split=splits/random.toml
      --test-part=-0 -o runs/random-grid-best/UKNN-Explicit UKNN-Explicit
    deps:
    - path: ../../models/UKNN-Explicit.toml
      hash: md5
      md5: 89a00ff4388a0c347c22d09854f61dd0
      size: 169
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    - path: sweeps/random/UKNN-Explicit.json
      hash: md5
      md5: 0181ccd6c9019ef9ba31b9bc3b388162
      size: 325
    outs:
    - path: runs/random-grid-best/UKNN-Explicit
      hash: md5
      md5: 28cf7d0d2acf2dc9e29d530a1d42a760.dir
      size: 35148
      nfiles: 11
  run-random-default-UKNN-Implicit:
    cmd: lenskit-codex generate --default --split=splits/random.toml --test-part=-0
      -o runs/random-default/UKNN-Implicit UKNN-Implicit
    deps:
    - path: ../../models/UKNN-Implicit.toml
      hash: md5
      md5: a58a3e7ad35116cb737f895bab17c799
      size: 152
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    outs:
    - path: runs/random-default/UKNN-Implicit
      hash: md5
      md5: 10fb7857a94cc2a3623ecd9e1284e9bb.dir
      size: 25888
      nfiles: 7
  sweep-random-UKNN-Implicit:
    cmd: lenskit-codex sweep run --ds-name=ML100K --split=splits/random.toml --test-part=0
      UKNN-Implicit sweeps/random/UKNN-Implicit
    deps:
    - path: ../../models/UKNN-Implicit.toml
      hash: md5
      md5: a58a3e7ad35116cb737f895bab17c799
      size: 152
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/UKNN-Implicit
      hash: md5
      md5: 0608b4820e4c98a36c8e98899a654410.dir
      size: 79323
      nfiles: 16
  export-random-UKNN-Implicit:
    cmd: lenskit-codex sweep export -o sweeps/random/UKNN-Implicit.json sweeps/random/UKNN-Implicit
      RBP
    deps:
    - path: sweeps/random/UKNN-Implicit
      hash: md5
      md5: 0608b4820e4c98a36c8e98899a654410.dir
      size: 79323
      nfiles: 16
    outs:
    - path: sweeps/random/UKNN-Implicit.json
      hash: md5
      md5: ee32cfbf9f790c9e058be4cfcd2c6982
      size: 259
  run-random-grid-best-UKNN-Implicit:
    cmd: lenskit-codex generate --param-file=sweeps/random/UKNN-Implicit.json --split=splits/random.toml
      --test-part=-0 -o runs/random-grid-best/UKNN-Implicit UKNN-Implicit
    deps:
    - path: ../../models/UKNN-Implicit.toml
      hash: md5
      md5: a58a3e7ad35116cb737f895bab17c799
      size: 152
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    - path: sweeps/random/UKNN-Implicit.json
      hash: md5
      md5: ee32cfbf9f790c9e058be4cfcd2c6982
      size: 259
    outs:
    - path: runs/random-grid-best/UKNN-Implicit
      hash: md5
      md5: 9df67f49f3511a2c68bad11f1d70ec49.dir
      size: 25831
      nfiles: 7
  sweep-random-Implicit-BPR:
    cmd: python ../../action.py sweep run -p 0 --ratings=ratings.duckdb --assignments=splits/random.duckdb
      Implicit-BPR sweeps/random/Implicit-BPR.duckdb
    deps:
    - path: ../../codex/models/Implicit_BPR.py
      hash: md5
      md5: ead16dddccd03e2611e9e0bef3e4686c
      size: 360
    - path: ratings.duckdb
      hash: md5
      md5: a770a8e6c558a398515b74def824e7b8
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 0341a9b25f8c8d872957470e9f29df47
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/Implicit-BPR.duckdb
      hash: md5
      md5: 303b85b90475d069cec4fad6ffe70f27
      size: 25964544
  export-random-Implicit-BPR:
    cmd: python ../../action.py sweep export sweeps/random/Implicit-BPR.duckdb ndcg
    deps:
    - path: sweeps/random/Implicit-BPR.duckdb
      hash: md5
      md5: 303b85b90475d069cec4fad6ffe70f27
      size: 25964544
    outs:
    - path: sweeps/random/Implicit-BPR.csv
      hash: md5
      md5: 4ba7acfd40c08850e1aeabb6eea004ba
      size: 2732
    - path: sweeps/random/Implicit-BPR.json
      hash: md5
      md5: bb1ac9efbaca3e06f05b42da55e3a53f
      size: 260
  run-random-grid-best-Implicit-BPR:
    cmd: python ../../action.py generate --param-file=sweeps/random/Implicit-BPR.json
      --test-part=-0 --assignments=splits/random.duckdb --ratings=ratings.duckdb -o
      runs/random-grid-best/Implicit-BPR.duckdb Implicit-BPR
    deps:
    - path: ../../codex/models/Implicit_BPR.py
      hash: md5
      md5: ead16dddccd03e2611e9e0bef3e4686c
      size: 360
    - path: ratings.duckdb
      hash: md5
      md5: a770a8e6c558a398515b74def824e7b8
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 0341a9b25f8c8d872957470e9f29df47
      size: 536576
    - path: sweeps/random/Implicit-BPR.json
      hash: md5
      md5: bb1ac9efbaca3e06f05b42da55e3a53f
      size: 260
    outs:
    - path: runs/random-grid-best/Implicit-BPR.duckdb
      hash: md5
      md5: ff4bceb3ea33c3efc27f2a905113c432
      size: 1323008
  sweep-random-HPF:
    cmd: lenskit-codex sweep run --ds-name=ML100K --split=splits/random.toml --test-part=0
      HPF sweeps/random/HPF
    deps:
    - path: ../../models/HPF.toml
      hash: md5
      md5: 0b2c295f5f53e6c0e41cddc0f31b85b2
      size: 146
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/HPF
      hash: md5
      md5: 68ca3bfcd2dcb13285db1bcf8cb3fd77.dir
      size: 79162
      nfiles: 14
  export-random-HPF:
    cmd: lenskit-codex sweep export -o sweeps/random/HPF.json sweeps/random/HPF RBP
    deps:
    - path: sweeps/random/HPF
      hash: md5
      md5: 68ca3bfcd2dcb13285db1bcf8cb3fd77.dir
      size: 79162
      nfiles: 14
    outs:
    - path: sweeps/random/HPF.json
      hash: md5
      md5: 7226b40dbeb18f94862e76e7f07f2142
      size: 195
  run-random-grid-best-HPF:
    cmd: lenskit-codex generate --param-file=sweeps/random/HPF.json --split=splits/random.toml
      --test-part=-0 -o runs/random-grid-best/HPF HPF
    deps:
    - path: ../../models/HPF.toml
      hash: md5
      md5: 0b2c295f5f53e6c0e41cddc0f31b85b2
      size: 146
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    - path: sweeps/random/HPF.json
      hash: md5
      md5: 7226b40dbeb18f94862e76e7f07f2142
      size: 195
    outs:
    - path: runs/random-grid-best/HPF
      hash: md5
      md5: 5ce4fb54c8c6c9e1789b25b04143b52e.dir
      size: 25737
      nfiles: 7
  sweep-random-grid-Bias:
    cmd: lenskit-codex sweep run --grid --ds-name=ML100K --split=splits/random.toml
      --test-part=0 Bias sweeps/random/Bias-grid
    deps:
    - path: ../../models/Bias.toml
      hash: md5
      md5: 3eeb8179cedf97e8b91f6cb91ed40524
      size: 320
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/Bias-grid
      hash: md5
      md5: 334610cb57069f335f3a84ac359de0bb.dir
      size: 151823
      nfiles: 6
  sweep-random-grid-BiasedMF-ALS:
    cmd: lenskit-codex sweep run --grid --ds-name=ML100K --split=splits/random.toml
      --test-part=0 BiasedMF-ALS sweeps/random/BiasedMF-ALS-grid
    deps:
    - path: ../../models/BiasedMF-ALS.toml
      hash: md5
      md5: 7629ab519f3017f4e66782bdc61dfa0f
      size: 172
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/BiasedMF-ALS-grid
      hash: md5
      md5: c804063967d3ecf8492f004d8b1b12b2.dir
      size: 279963
      nfiles: 6
  sweep-random-grid-IKNN-Explicit:
    cmd: lenskit-codex sweep run --grid --ds-name=ML100K --split=splits/random.toml
      --test-part=0 IKNN-Explicit sweeps/random/IKNN-Explicit-grid
    deps:
    - path: ../../models/IKNN-Explicit.toml
      hash: md5
      md5: 2a940890725e9089b96ffaea51c6445a
      size: 175
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/IKNN-Explicit-grid
      hash: md5
      md5: 9db9ba367886b697f874ca4e94d0aab8.dir
      size: 97092
      nfiles: 6
  sweep-random-grid-IKNN-Implicit:
    cmd: lenskit-codex sweep run --grid --ds-name=ML100K --split=splits/random.toml
      --test-part=0 IKNN-Implicit sweeps/random/IKNN-Implicit-grid
    deps:
    - path: ../../models/IKNN-Implicit.toml
      hash: md5
      md5: b583d0f97b6363e190f0dd14f7e70b83
      size: 158
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/IKNN-Implicit-grid
      hash: md5
      md5: e617ed6aeaf6b2102a2cc1ab1d1b5301.dir
      size: 66901
      nfiles: 5
  sweep-random-grid-ImplicitMF-ALS:
    cmd: lenskit-codex sweep run --grid --ds-name=ML100K --split=splits/random.toml
      --test-part=0 ImplicitMF-ALS sweeps/random/ImplicitMF-ALS-grid
    deps:
    - path: ../../models/ImplicitMF-ALS.toml
      hash: md5
      md5: 5c7d13e705c5945812cd47b8fc8fbfc9
      size: 157
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/ImplicitMF-ALS-grid
      hash: md5
      md5: 6e46a9e0b4f1b4a327948355c6a801b6.dir
      size: 231148
      nfiles: 5
  sweep-random-random-Bias:
    cmd: lenskit-codex sweep run --random --ds-name=ML100K --split=splits/random.toml
      --test-part=0 Bias sweeps/random/Bias-random
    deps:
    - path: ../../models/Bias.toml
      hash: md5
      md5: 3eeb8179cedf97e8b91f6cb91ed40524
      size: 320
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/Bias-random
      hash: md5
      md5: 767ccd95fd8d5217cce6ba5ad7f0b35a.dir
      size: 1078033
      nfiles: 6
  run-random-random-best-Bias:
    cmd: lenskit-codex generate --param-file=sweeps/random/Bias-random.json --test-part=-0
      --ds-name=ML100K --split=splits/random.toml -o runs/random-random-best/Bias
      Bias
    deps:
    - path: ../../models/Bias.toml
      hash: md5
      md5: 3eeb8179cedf97e8b91f6cb91ed40524
      size: 320
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    - path: sweeps/random/Bias-random.json
      hash: md5
      md5: c4a09488af96106f8a63cdedf58d5085
      size: 314
    outs:
    - path: runs/random-random-best/Bias
      hash: md5
      md5: ffe7b5a0cc36cf794084c27b51ee3d5e.dir
      size: 34466
      nfiles: 5
  export-random-grid-Bias:
    cmd: lenskit-codex sweep export -o sweeps/random/Bias-grid.json sweeps/random/Bias-grid
      RMSE
    deps:
    - path: sweeps/random/Bias-grid
      hash: md5
      md5: 334610cb57069f335f3a84ac359de0bb.dir
      size: 151823
      nfiles: 6
    outs:
    - path: sweeps/random/Bias-grid.json
      hash: md5
      md5: fb3659fda3d936b80099e1fa69e925d1
      size: 283
  export-random-grid-BiasedMF-ALS:
    cmd: lenskit-codex sweep export -o sweeps/random/BiasedMF-ALS-grid.json sweeps/random/BiasedMF-ALS-grid
      RMSE
    deps:
    - path: sweeps/random/BiasedMF-ALS-grid
      hash: md5
      md5: c804063967d3ecf8492f004d8b1b12b2.dir
      size: 279963
      nfiles: 6
    outs:
    - path: sweeps/random/BiasedMF-ALS-grid.json
      hash: md5
      md5: f59b041122584934ac600b197dbb345c
      size: 298
  export-random-grid-IKNN-Explicit:
    cmd: lenskit-codex sweep export -o sweeps/random/IKNN-Explicit-grid.json sweeps/random/IKNN-Explicit-grid
      RMSE
    deps:
    - path: sweeps/random/IKNN-Explicit-grid
      hash: md5
      md5: 9db9ba367886b697f874ca4e94d0aab8.dir
      size: 97092
      nfiles: 6
    outs:
    - path: sweeps/random/IKNN-Explicit-grid.json
      hash: md5
      md5: 3f90fc36f8222a49cf1a5a5f90717607
      size: 326
  export-random-grid-IKNN-Implicit:
    cmd: lenskit-codex sweep export -o sweeps/random/IKNN-Implicit-grid.json sweeps/random/IKNN-Implicit-grid
      RBP
    deps:
    - path: sweeps/random/IKNN-Implicit-grid
      hash: md5
      md5: e617ed6aeaf6b2102a2cc1ab1d1b5301.dir
      size: 66901
      nfiles: 5
    outs:
    - path: sweeps/random/IKNN-Implicit-grid.json
      hash: md5
      md5: bd7f1d549c83af129d29b5c4ac8b2425
      size: 254
  export-random-grid-ImplicitMF-ALS:
    cmd: lenskit-codex sweep export -o sweeps/random/ImplicitMF-ALS-grid.json sweeps/random/ImplicitMF-ALS-grid
      RBP
    deps:
    - path: sweeps/random/ImplicitMF-ALS-grid
      hash: md5
      md5: 6e46a9e0b4f1b4a327948355c6a801b6.dir
      size: 231148
      nfiles: 5
    outs:
    - path: sweeps/random/ImplicitMF-ALS-grid.json
      hash: md5
      md5: 88d43b130c3b066ed5dbe120a61c7d81
      size: 232
  export-random-random-Bias:
    cmd: lenskit-codex sweep export -o sweeps/random/Bias-random.json sweeps/random/Bias-random
      RMSE
    deps:
    - path: sweeps/random/Bias-random
      hash: md5
      md5: 767ccd95fd8d5217cce6ba5ad7f0b35a.dir
      size: 1078033
      nfiles: 6
    outs:
    - path: sweeps/random/Bias-random.json
      hash: md5
      md5: c4a09488af96106f8a63cdedf58d5085
      size: 314

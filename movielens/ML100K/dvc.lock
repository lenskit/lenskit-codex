schema: '2.0'
stages:
  import-data:
    cmd: python ../import-ml.py ml-100k.zip
    deps:
    - path: ../import-ml.py
      hash: md5
      md5: 4af94250c13bdd7beff8235e442549c6
      size: 3732
    - path: ml-100k.zip
      hash: md5
      md5: 0e33842e24a9c977be4e0107933c0723
      size: 4924029
    outs:
    - path: ratings.duckdb
      hash: md5
      md5: 547f56bb2ade8993dd3a1098db3f7138
      size: 1323008
  import-ml-100k:
    cmd: python ../import-ml.py ml-100k.zip
    deps:
    - path: ../import-ml.py
      hash: md5
      md5: af82da24d16bfef7681fe0b7910d5069
      size: 3678
    - path: ../ml-stats.sql
      hash: md5
      md5: b016dc983a2156e0712a846097a968e7
      size: 1307
    - path: ml-100k.zip
      hash: md5
      md5: 0e33842e24a9c977be4e0107933c0723
      size: 4924029
    outs:
    - path: ratings.duckdb
      hash: md5
      md5: a770a8e6c558a398515b74def824e7b8
      size: 2371584
  ml-100k-stats:
    cmd: python ../../scripts/duckdb-sql.py -d stats.duckdb ../ml-stats.sql
    deps:
    - path: ../ml-stats.sql
      hash: md5
      md5: bf09f212fabc98275ae949932889654c
      size: 1374
    - path: ratings.parquet
      hash: md5
      md5: 17acf184eb0bfe350d35f4c39fceb314
      size: 846024
    outs:
    - path: stats.duckdb
      hash: md5
      md5: 005070d0bc196fbcbfec774407d7b0a8
      size: 1323008
  split-random:
    cmd: lenskit-codex split random.toml
    deps:
    - path: ../ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: random.toml
      hash: md5
      md5: 9d1d0dfd07c3cea4845016496b4294a5
      size: 165
    params:
      ../../../config.toml:
        random.seed: 20240717
    outs:
    - path: random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
  Bias:
    cmd: python ../../scripts/sweep.py -p 1 Bias splits/random.duckdb ratings.duckdb
      sweeps/random/Bias.duckdb
    deps:
    - path: ../../codex/models/Bias.py
      hash: md5
      md5: e35eac761bf892674a6fb8570132e7f1
      size: 375
    - path: ratings.duckdb
      hash: md5
      md5: a770a8e6c558a398515b74def824e7b8
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 104d0924001308c5c1af255bea2d2825
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/Bias.duckdb
      hash: md5
      md5: 4c3d84d04a4885aa47f9ae54d908bc0f
      size: 2633728
  BiasedMF-ALS:
    cmd: python ../../scripts/sweep.py -p 1 BiasedMF-ALS splits/random.duckdb ratings.duckdb
      sweeps/random/BiasedMF-ALS.duckdb
    deps:
    - path: ../../codex/models/BiasedMF_ALS.py
      hash: md5
      md5: 70b01ec78dc3f1c3d09190c032bc05a6
      size: 349
    - path: ratings.duckdb
      hash: md5
      md5: a770a8e6c558a398515b74def824e7b8
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 104d0924001308c5c1af255bea2d2825
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/BiasedMF-ALS.duckdb
      hash: md5
      md5: f353cb748be0455329378bc0d79bdfac
      size: 4993024
  ImplicitMF-ALS:
    cmd: python ../../scripts/sweep.py -p 1 ImplicitMF-ALS splits/random.duckdb ratings.duckdb
      sweeps/random/ImplicitMF-ALS.duckdb
    deps:
    - path: ../../codex/models/ImplicitMF_ALS.py
      hash: md5
      md5: 69f84877400748da1886d63579ec2f3e
      size: 340
    - path: ratings.duckdb
      hash: md5
      md5: a770a8e6c558a398515b74def824e7b8
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 104d0924001308c5c1af255bea2d2825
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/ImplicitMF-ALS.duckdb
      hash: md5
      md5: d7e33a3b57eae8f26ba846aff1ba0b14
      size: 4993024
  IKNN_Explicit:
    cmd: python ../../scripts/sweep.py -p 1 IKNN_Explicit splits/random.duckdb ratings.duckdb
      sweeps/random/IKNN_Explicit.duckdb
    deps:
    - path: ../../codex/models/IKNN_Explicit.py
      hash: md5
      md5: d7b6a1734bea39997f94df4fa0c4900e
      size: 378
    - path: ratings.duckdb
      hash: md5
      md5: a770a8e6c558a398515b74def824e7b8
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 104d0924001308c5c1af255bea2d2825
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/IKNN_Explicit.duckdb
      hash: md5
      md5: bc1e581e78bc92089c1ff4ea78b8459d
      size: 1585152
  sweep-random-Bias:
    cmd: lenskit-codex sweep run --ds-name=ML100K --split=splits/random.toml --test-part=0
      Bias sweeps/random/Bias
    deps:
    - path: ../../models/Bias.toml
      hash: md5
      md5: 97f305e8c04fb52cff715d59711b5eed
      size: 146
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/Bias
      hash: md5
      md5: f86102ebd41a1bfd13a9dbb20bc13657.dir
      size: 171005
      nfiles: 36
  sweep-random-BiasedMF-ALS:
    cmd: lenskit-codex sweep run --ds-name=ML100K --split=splits/random.toml --test-part=0
      BiasedMF-ALS sweeps/random/BiasedMF-ALS
    deps:
    - path: ../../models/BiasedMF-ALS.toml
      hash: md5
      md5: d6a4dc846449f893683a847940f9c176
      size: 166
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/BiasedMF-ALS
      hash: md5
      md5: 4c85e3e9baef6ef583de192e5d49d52e.dir
      size: 317574
      nfiles: 64
  sweep-random-ImplicitMF-ALS:
    cmd: lenskit-codex sweep run --ds-name=ML100K --split=splits/random.toml --test-part=0
      ImplicitMF-ALS sweeps/random/ImplicitMF-ALS
    deps:
    - path: ../../models/ImplicitMF-ALS.toml
      hash: md5
      md5: e3b0120ab5820325128a9eb87d851e7f
      size: 151
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/ImplicitMF-ALS
      hash: md5
      md5: e886dd6d73bcdadc4f9c3cf025e3e92d.dir
      size: 251157
      nfiles: 34
  sweep-random-IKNN-Explicit:
    cmd: lenskit-codex sweep run --ds-name=ML100K --split=splits/random.toml --test-part=0
      IKNN-Explicit sweeps/random/IKNN-Explicit
    deps:
    - path: ../../models/IKNN-Explicit.toml
      hash: md5
      md5: cb85c79c654c8e897015241c0f670c0d
      size: 169
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/IKNN-Explicit
      hash: md5
      md5: b54e8c8092ab4d182f635c06cdf68497.dir
      size: 110763
      nfiles: 28
  sweep-random-IKNN-Implicit:
    cmd: lenskit-codex sweep run --ds-name=ML100K --split=splits/random.toml --test-part=0
      IKNN-Implicit sweeps/random/IKNN-Implicit
    deps:
    - path: ../../models/IKNN-Implicit.toml
      hash: md5
      md5: 2bfec2d4beb12854e5e7d632f0fd6396
      size: 152
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/IKNN-Implicit
      hash: md5
      md5: 1ac2c23ac75a181449e719008a6ea0d0.dir
      size: 74166
      nfiles: 16
  export-random-ImplicitMF-ALS:
    cmd: lenskit-codex sweep export -o sweeps/random/ImplicitMF-ALS.json sweeps/random/ImplicitMF-ALS
      RBP
    deps:
    - path: sweeps/random/ImplicitMF-ALS
      hash: md5
      md5: e886dd6d73bcdadc4f9c3cf025e3e92d.dir
      size: 251157
      nfiles: 34
    outs:
    - path: sweeps/random/ImplicitMF-ALS.json
      hash: md5
      md5: 88d43b130c3b066ed5dbe120a61c7d81
      size: 232
  export-random-IKNN-Implicit:
    cmd: lenskit-codex sweep export -o sweeps/random/IKNN-Implicit.json sweeps/random/IKNN-Implicit
      RBP
    deps:
    - path: sweeps/random/IKNN-Implicit
      hash: md5
      md5: 1ac2c23ac75a181449e719008a6ea0d0.dir
      size: 74166
      nfiles: 16
    outs:
    - path: sweeps/random/IKNN-Implicit.json
      hash: md5
      md5: bd7f1d549c83af129d29b5c4ac8b2425
      size: 254
  export-random-Bias:
    cmd: lenskit-codex sweep export -o sweeps/random/Bias.json sweeps/random/Bias
      RMSE
    deps:
    - path: sweeps/random/Bias
      hash: md5
      md5: f86102ebd41a1bfd13a9dbb20bc13657.dir
      size: 171005
      nfiles: 36
    outs:
    - path: sweeps/random/Bias.json
      hash: md5
      md5: 9ba5f36681b22dfc8da204e40e4d795b
      size: 313
  export-random-IKNN-Explicit:
    cmd: python ../../action.py sweep export sweeps/random/IKNN-Explicit.duckdb rmse
    deps:
    - path: sweeps/random/IKNN-Explicit.duckdb
      hash: md5
      md5: 4f9cac7224bbcd250e428053d993c26b
      size: 10235904
    outs:
    - path: sweeps/random/IKNN-Explicit.csv
      hash: md5
      md5: 4bc6952a3fc859a8304cbf4e2a7984e4
      size: 1556
    - path: sweeps/random/IKNN-Explicit.json
      hash: md5
      md5: 3a8e05ab2b39a85c57ec5a9e841957cd
      size: 304
  export-random-BiasedMF-ALS:
    cmd: lenskit-codex sweep export -o sweeps/random/BiasedMF-ALS.json sweeps/random/BiasedMF-ALS
      RMSE
    deps:
    - path: sweeps/random/BiasedMF-ALS
      hash: md5
      md5: 4c85e3e9baef6ef583de192e5d49d52e.dir
      size: 317574
      nfiles: 64
    outs:
    - path: sweeps/random/BiasedMF-ALS.json
      hash: md5
      md5: f59b041122584934ac600b197dbb345c
      size: 298
  import:
    cmd: lenskit-codex movielens import --stat-sql=../ml-stats.sql ml-100k.zip
    deps:
    - path: ../ml-stats.sql
      hash: md5
      md5: b016dc983a2156e0712a846097a968e7
      size: 1307
    - path: ml-100k.zip
      hash: md5
      md5: 0e33842e24a9c977be4e0107933c0723
      size: 4924029
    outs:
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
  run-random-sweep-best-Bias:
    cmd: lenskit-codex generate --param-file=sweeps/random/Bias.json --split=splits/random.toml
      --test-part=-0 -o runs/random-sweep-best/Bias Bias
    deps:
    - path: ../../models/Bias.toml
      hash: md5
      md5: 97f305e8c04fb52cff715d59711b5eed
      size: 146
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    - path: sweeps/random/Bias.json
      hash: md5
      md5: 9ba5f36681b22dfc8da204e40e4d795b
      size: 313
    outs:
    - path: runs/random-sweep-best/Bias
      hash: md5
      md5: 02f27e6411a94f84421088a815b8cee6.dir
      size: 36964
      nfiles: 11
  run-random-default-ImplicitMF-ALS:
    cmd: lenskit-codex generate --default --test-part=-0 --assignments=splits/random.duckdb
      --ratings=ratings.duckdb -o runs/random-default/ImplicitMF-ALS ImplicitMF-ALS
    deps:
    - path: ../../models/ImplicitMF-ALS.toml
      hash: md5
      md5: e3b0120ab5820325128a9eb87d851e7f
      size: 151
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 796dd13b48c8a99435002d3d68ab8d0b
      size: 536576
    outs:
    - path: runs/random-default/ImplicitMF-ALS
      hash: md5
      md5: 4980451522ab7452acf36a1f255b0672.dir
      size: 612738
      nfiles: 35
  collect-metrics:
    cmd: python ../../action.py collect metrics run-metrics.duckdb --view-script=../ml-run-metrics.sql
      runs
    deps:
    - path: runs/random-default/Bias.duckdb
      hash: md5
      md5: 510410d851c75a71479ed5b27a2959c2
      size: 1585152
    - path: runs/random-default/BiasedMF-ALS.duckdb
      hash: md5
      md5: 537a7143a9a275094a077869e76852fe
      size: 1585152
    - path: runs/random-default/HPF.duckdb
      hash: md5
      md5: bb061b7142641aba73fa5f5474cf5936
      size: 1323008
    - path: runs/random-default/IKNN-Explicit.duckdb
      hash: md5
      md5: 4a5d925ad8ddfdc55cf34b2463b6c7a6
      size: 1585152
    - path: runs/random-default/IKNN-Implicit.duckdb
      hash: md5
      md5: ab87856e1694282d3f07cb2aaf40b742
      size: 1323008
    - path: runs/random-default/Implicit-BPR.duckdb
      hash: md5
      md5: 488f024339cf2a7e6124b784383d1114
      size: 1323008
    - path: runs/random-default/ImplicitMF-ALS.duckdb
      hash: md5
      md5: b82eb915327d765576016a9612189256
      size: 1323008
    - path: runs/random-default/Popular.duckdb
      hash: md5
      md5: 62ed4622baf18b10bbfd1e4fba6afc50
      size: 1323008
    - path: runs/random-default/UKNN-Explicit.duckdb
      hash: md5
      md5: 58918aadd903ef548b233ecd7de507d8
      size: 1585152
    - path: runs/random-default/UKNN-Implicit.duckdb
      hash: md5
      md5: 8549ad0440fdf97d9edc07e21aab1943
      size: 1323008
    - path: runs/random-sweep-best/Bias.duckdb
      hash: md5
      md5: 7110e3c903476b66478df4a521b46766
      size: 1585152
    - path: runs/random-sweep-best/BiasedMF-ALS.duckdb
      hash: md5
      md5: eb70c4c355007d3d2abddffd6bfcf14f
      size: 1585152
    - path: runs/random-sweep-best/HPF.duckdb
      hash: md5
      md5: bdb63272fb959fcfd0b91d91ac0b6e8e
      size: 1323008
    - path: runs/random-sweep-best/IKNN-Explicit.duckdb
      hash: md5
      md5: 972c3617f8ce23e2512fac1a5c0fcefc
      size: 1585152
    - path: runs/random-sweep-best/IKNN-Implicit.duckdb
      hash: md5
      md5: f5ddf24573910d2dd546cd7ccae729c0
      size: 1323008
    - path: runs/random-sweep-best/Implicit-BPR.duckdb
      hash: md5
      md5: ff4bceb3ea33c3efc27f2a905113c432
      size: 1323008
    - path: runs/random-sweep-best/ImplicitMF-ALS.duckdb
      hash: md5
      md5: 596ab32a28dd3d33a8457a7d88992177
      size: 1323008
    - path: runs/random-sweep-best/UKNN-Explicit.duckdb
      hash: md5
      md5: b93bc4f0fd6d5f6e5c8181ea92261ffb
      size: 1585152
    - path: runs/random-sweep-best/UKNN-Implicit.duckdb
      hash: md5
      md5: 67b0221f4c602b034b2ecae55e884c18
      size: 1323008
    outs:
    - path: run-metrics.duckdb
      hash: md5
      md5: da8e2bdf404f4f0429ed6bd0d0c0578d
      size: 1847296
  run-random-sweep-best-IKNN-Implicit:
    cmd: lenskit-codex generate --param-file=sweeps/random/IKNN-Implicit.json --split=splits/random.toml
      --test-part=-0 -o runs/random-sweep-best/IKNN-Implicit IKNN-Implicit
    deps:
    - path: ../../models/IKNN-Implicit.toml
      hash: md5
      md5: 2bfec2d4beb12854e5e7d632f0fd6396
      size: 152
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    - path: sweeps/random/IKNN-Implicit.json
      hash: md5
      md5: bd7f1d549c83af129d29b5c4ac8b2425
      size: 254
    outs:
    - path: runs/random-sweep-best/IKNN-Implicit
      hash: md5
      md5: 5ba1b23b560c3073aed8ffb03e6ebb65.dir
      size: 25173
      nfiles: 7
  run-random-default-IKNN-Implicit:
    cmd: lenskit-codex generate --default --split=splits/random.toml --test-part=-0
      -o runs/random-default/IKNN-Implicit IKNN-Implicit
    deps:
    - path: ../../models/IKNN-Implicit.toml
      hash: md5
      md5: 2bfec2d4beb12854e5e7d632f0fd6396
      size: 152
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    outs:
    - path: runs/random-default/IKNN-Implicit
      hash: md5
      md5: fb6991d3bcb05073344ec53e9dc04500.dir
      size: 25038
      nfiles: 7
  run-random-sweep-best-IKNN-Explicit:
    cmd: python ../../action.py generate --param-file=sweeps/random/IKNN-Explicit.json
      --test-part=-0 --assignments=splits/random.duckdb --ratings=ratings.duckdb -o
      runs/random-sweep-best/IKNN-Explicit.duckdb IKNN-Explicit
    deps:
    - path: ../../codex/models/IKNN_Explicit.py
      hash: md5
      md5: d7b6a1734bea39997f94df4fa0c4900e
      size: 378
    - path: ratings.duckdb
      hash: md5
      md5: a770a8e6c558a398515b74def824e7b8
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 0341a9b25f8c8d872957470e9f29df47
      size: 536576
    - path: sweeps/random/IKNN-Explicit.json
      hash: md5
      md5: 3a8e05ab2b39a85c57ec5a9e841957cd
      size: 304
    outs:
    - path: runs/random-sweep-best/IKNN-Explicit.duckdb
      hash: md5
      md5: 972c3617f8ce23e2512fac1a5c0fcefc
      size: 1585152
  run-random-sweep-best-BiasedMF-ALS:
    cmd: python ../../action.py generate --param-file=sweeps/random/BiasedMF-ALS.json
      --test-part=-0 --assignments=splits/random.duckdb --ratings=ratings.duckdb -o
      runs/random-sweep-best/BiasedMF-ALS.duckdb BiasedMF-ALS
    deps:
    - path: ../../codex/models/BiasedMF_ALS.py
      hash: md5
      md5: 70b01ec78dc3f1c3d09190c032bc05a6
      size: 349
    - path: ratings.duckdb
      hash: md5
      md5: a770a8e6c558a398515b74def824e7b8
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 0341a9b25f8c8d872957470e9f29df47
      size: 536576
    - path: sweeps/random/BiasedMF-ALS.json
      hash: md5
      md5: a1841076ccc51cdffd7c812d9f2f9ed7
      size: 305
    outs:
    - path: runs/random-sweep-best/BiasedMF-ALS.duckdb
      hash: md5
      md5: eb70c4c355007d3d2abddffd6bfcf14f
      size: 1585152
  run-random-default-BiasedMF-ALS:
    cmd: lenskit-codex generate --default --split=splits/random.toml --test-part=-0
      -o runs/random-default/BiasedMF-ALS BiasedMF-ALS
    deps:
    - path: ../../models/BiasedMF-ALS.toml
      hash: md5
      md5: d6a4dc846449f893683a847940f9c176
      size: 166
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    outs:
    - path: runs/random-default/BiasedMF-ALS
      hash: md5
      md5: 584214d1144fab86e885de1b39a03274.dir
      size: 37019
      nfiles: 11
  run-random-default-IKNN-Explicit:
    cmd: lenskit-codex generate --default --split=splits/random.toml --test-part=-0
      -o runs/random-default/IKNN-Explicit IKNN-Explicit
    deps:
    - path: ../../models/IKNN-Explicit.toml
      hash: md5
      md5: cb85c79c654c8e897015241c0f670c0d
      size: 169
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    outs:
    - path: runs/random-default/IKNN-Explicit
      hash: md5
      md5: 4ee14972316ae9b607c0add346d39279.dir
      size: 36244
      nfiles: 11
  run-random-default-Bias:
    cmd: lenskit-codex generate --default --split=splits/random.toml --test-part=-0
      -o runs/random-default/Bias Bias
    deps:
    - path: ../../models/Bias.toml
      hash: md5
      md5: 97f305e8c04fb52cff715d59711b5eed
      size: 146
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    outs:
    - path: runs/random-default/Bias
      hash: md5
      md5: 61eaa02c4a971ad5c62cb8f5469615c7.dir
      size: 587096
      nfiles: 67
  run-random-default-Popular:
    cmd: lenskit-codex generate --default --split=splits/random.toml --test-part=-0
      -o runs/random-default/Popular Popular
    deps:
    - path: ../../models/Popular.toml
      hash: md5
      md5: c25817c7ea3901786434261d27af0aad
      size: 35
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    outs:
    - path: runs/random-default/Popular
      hash: md5
      md5: e7d5775549f140ff7864588d8a7dfa9b.dir
      size: 23808
      nfiles: 7
  run-random-default-Implicit-BPR:
    cmd: python ../../action.py generate --default --test-part=-0 --assignments=splits/random.duckdb
      --ratings=ratings.duckdb -o runs/random-default/Implicit-BPR.duckdb Implicit-BPR
    deps:
    - path: ../../codex/models/Implicit_BPR.py
      hash: md5
      md5: ead16dddccd03e2611e9e0bef3e4686c
      size: 360
    - path: ratings.duckdb
      hash: md5
      md5: a770a8e6c558a398515b74def824e7b8
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 0341a9b25f8c8d872957470e9f29df47
      size: 536576
    outs:
    - path: runs/random-default/Implicit-BPR.duckdb
      hash: md5
      md5: 488f024339cf2a7e6124b784383d1114
      size: 1323008
  run-random-default-HPF:
    cmd: lenskit-codex generate --default --split=splits/random.toml --test-part=-0
      -o runs/random-default/HPF HPF
    deps:
    - path: ../../models/HPF.toml
      hash: md5
      md5: 30b7ea7799d7508c2b12b4769f8afe16
      size: 144
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    outs:
    - path: runs/random-default/HPF
      hash: md5
      md5: 8960bb101849a96079aa7f03ca8005cc.dir
      size: 25785
      nfiles: 7
  run-random-sweep-best-ImplicitMF-ALS:
    cmd: python ../../action.py generate --param-file=sweeps/random/ImplicitMF-ALS.json
      --test-part=-0 --assignments=splits/random.duckdb --ratings=ratings.duckdb -o
      runs/random-sweep-best/ImplicitMF-ALS.duckdb ImplicitMF-ALS
    deps:
    - path: ../../codex/models/ImplicitMF_ALS.py
      hash: md5
      md5: f88cb5bd1014e55b8c0d9a1650863c94
      size: 359
    - path: ratings.duckdb
      hash: md5
      md5: a770a8e6c558a398515b74def824e7b8
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 0341a9b25f8c8d872957470e9f29df47
      size: 536576
    - path: sweeps/random/ImplicitMF-ALS.json
      hash: md5
      md5: e77bc25be8ea6bf97b535777d93ef0ef
      size: 249
    outs:
    - path: runs/random-sweep-best/ImplicitMF-ALS.duckdb
      hash: md5
      md5: 596ab32a28dd3d33a8457a7d88992177
      size: 1323008
  run-random-default-UKNN-Explicit:
    cmd: lenskit-codex generate --default --test-part=-0 --assignments=splits/random.duckdb
      --ratings=ratings.duckdb -o runs/random-default/UKNN-Explicit UKNN-Explicit
    deps:
    - path: ../../models/UKNN-Explicit.toml
      hash: md5
      md5: 89a00ff4388a0c347c22d09854f61dd0
      size: 169
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 796dd13b48c8a99435002d3d68ab8d0b
      size: 536576
    outs:
    - path: runs/random-default/UKNN-Explicit
      hash: md5
      md5: 558321ce637b18bf6674950e216028f6.dir
      size: 639593
      nfiles: 67
  sweep-random-UKNN-Explicit:
    cmd: lenskit-codex sweep run --ds-name=ML100K --split=splits/random.toml --test-part=0
      UKNN-Explicit sweeps/random/UKNN-Explicit
    deps:
    - path: ../../models/UKNN-Explicit.toml
      hash: md5
      md5: 89a00ff4388a0c347c22d09854f61dd0
      size: 169
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/UKNN-Explicit
      hash: md5
      md5: adeee32e0938ec37a4184820aeb360c4.dir
      size: 135858
      nfiles: 28
  export-random-UKNN-Explicit:
    cmd: lenskit-codex sweep export -o sweeps/random/UKNN-Explicit.json sweeps/random/UKNN-Explicit
      RMSE
    deps:
    - path: sweeps/random/UKNN-Explicit
      hash: md5
      md5: adeee32e0938ec37a4184820aeb360c4.dir
      size: 135858
      nfiles: 28
    outs:
    - path: sweeps/random/UKNN-Explicit.json
      hash: md5
      md5: 0181ccd6c9019ef9ba31b9bc3b388162
      size: 325
  run-random-sweep-best-UKNN-Explicit:
    cmd: lenskit-codex generate --param-file=sweeps/random/UKNN-Explicit.json --split=splits/random.toml
      --test-part=-0 -o runs/random-sweep-best/UKNN-Explicit UKNN-Explicit
    deps:
    - path: ../../models/UKNN-Explicit.toml
      hash: md5
      md5: 89a00ff4388a0c347c22d09854f61dd0
      size: 169
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    - path: sweeps/random/UKNN-Explicit.json
      hash: md5
      md5: 0181ccd6c9019ef9ba31b9bc3b388162
      size: 325
    outs:
    - path: runs/random-sweep-best/UKNN-Explicit
      hash: md5
      md5: 28cf7d0d2acf2dc9e29d530a1d42a760.dir
      size: 35148
      nfiles: 11
  run-random-default-UKNN-Implicit:
    cmd: lenskit-codex generate --default --split=splits/random.toml --test-part=-0
      -o runs/random-default/UKNN-Implicit UKNN-Implicit
    deps:
    - path: ../../models/UKNN-Implicit.toml
      hash: md5
      md5: a58a3e7ad35116cb737f895bab17c799
      size: 152
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    outs:
    - path: runs/random-default/UKNN-Implicit
      hash: md5
      md5: 10fb7857a94cc2a3623ecd9e1284e9bb.dir
      size: 25888
      nfiles: 7
  sweep-random-UKNN-Implicit:
    cmd: lenskit-codex sweep run --ds-name=ML100K --split=splits/random.toml --test-part=0
      UKNN-Implicit sweeps/random/UKNN-Implicit
    deps:
    - path: ../../models/UKNN-Implicit.toml
      hash: md5
      md5: a58a3e7ad35116cb737f895bab17c799
      size: 152
    - path: ratings.duckdb
      hash: md5
      md5: 4ebfe15a3b3072086408fdc861bf37ae
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 521fdd73e436db6dfb4295eba802dddd
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/UKNN-Implicit
      hash: md5
      md5: 0608b4820e4c98a36c8e98899a654410.dir
      size: 79323
      nfiles: 16
  export-random-UKNN-Implicit:
    cmd: lenskit-codex sweep export -o sweeps/random/UKNN-Implicit.json sweeps/random/UKNN-Implicit
      RBP
    deps:
    - path: sweeps/random/UKNN-Implicit
      hash: md5
      md5: 0608b4820e4c98a36c8e98899a654410.dir
      size: 79323
      nfiles: 16
    outs:
    - path: sweeps/random/UKNN-Implicit.json
      hash: md5
      md5: ee32cfbf9f790c9e058be4cfcd2c6982
      size: 259
  run-random-sweep-best-UKNN-Implicit:
    cmd: python ../../action.py generate --param-file=sweeps/random/UKNN-Implicit.json
      --test-part=-0 --assignments=splits/random.duckdb --ratings=ratings.duckdb -o
      runs/random-sweep-best/UKNN-Implicit.duckdb UKNN-Implicit
    deps:
    - path: ../../codex/models/UKNN_Implicit.py
      hash: md5
      md5: fd52b2729524c3279709cc034aea9df5
      size: 363
    - path: ratings.duckdb
      hash: md5
      md5: a770a8e6c558a398515b74def824e7b8
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 0341a9b25f8c8d872957470e9f29df47
      size: 536576
    - path: sweeps/random/UKNN-Implicit.json
      hash: md5
      md5: 044ed35cd5ebcd39fa2f81b916efdaf4
      size: 246
    outs:
    - path: runs/random-sweep-best/UKNN-Implicit.duckdb
      hash: md5
      md5: 67b0221f4c602b034b2ecae55e884c18
      size: 1323008
  sweep-random-Implicit-BPR:
    cmd: python ../../action.py sweep run -p 0 --ratings=ratings.duckdb --assignments=splits/random.duckdb
      Implicit-BPR sweeps/random/Implicit-BPR.duckdb
    deps:
    - path: ../../codex/models/Implicit_BPR.py
      hash: md5
      md5: ead16dddccd03e2611e9e0bef3e4686c
      size: 360
    - path: ratings.duckdb
      hash: md5
      md5: a770a8e6c558a398515b74def824e7b8
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 0341a9b25f8c8d872957470e9f29df47
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/Implicit-BPR.duckdb
      hash: md5
      md5: 303b85b90475d069cec4fad6ffe70f27
      size: 25964544
  export-random-Implicit-BPR:
    cmd: python ../../action.py sweep export sweeps/random/Implicit-BPR.duckdb ndcg
    deps:
    - path: sweeps/random/Implicit-BPR.duckdb
      hash: md5
      md5: 303b85b90475d069cec4fad6ffe70f27
      size: 25964544
    outs:
    - path: sweeps/random/Implicit-BPR.csv
      hash: md5
      md5: 4ba7acfd40c08850e1aeabb6eea004ba
      size: 2732
    - path: sweeps/random/Implicit-BPR.json
      hash: md5
      md5: bb1ac9efbaca3e06f05b42da55e3a53f
      size: 260
  run-random-sweep-best-Implicit-BPR:
    cmd: python ../../action.py generate --param-file=sweeps/random/Implicit-BPR.json
      --test-part=-0 --assignments=splits/random.duckdb --ratings=ratings.duckdb -o
      runs/random-sweep-best/Implicit-BPR.duckdb Implicit-BPR
    deps:
    - path: ../../codex/models/Implicit_BPR.py
      hash: md5
      md5: ead16dddccd03e2611e9e0bef3e4686c
      size: 360
    - path: ratings.duckdb
      hash: md5
      md5: a770a8e6c558a398515b74def824e7b8
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 0341a9b25f8c8d872957470e9f29df47
      size: 536576
    - path: sweeps/random/Implicit-BPR.json
      hash: md5
      md5: bb1ac9efbaca3e06f05b42da55e3a53f
      size: 260
    outs:
    - path: runs/random-sweep-best/Implicit-BPR.duckdb
      hash: md5
      md5: ff4bceb3ea33c3efc27f2a905113c432
      size: 1323008
  sweep-random-HPF:
    cmd: python ../../action.py sweep run -p 0 --ratings=ratings.duckdb --assignments=splits/random.duckdb
      HPF sweeps/random/HPF.duckdb
    deps:
    - path: ../../codex/models/HPF.py
      hash: md5
      md5: c407b5a94b468225c08eb86a9642d513
      size: 266
    - path: ratings.duckdb
      hash: md5
      md5: a770a8e6c558a398515b74def824e7b8
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 0341a9b25f8c8d872957470e9f29df47
      size: 536576
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/HPF.duckdb
      hash: md5
      md5: 5fa7d368f79eb0f902c7a0a45d420012
      size: 8663040
  export-random-HPF:
    cmd: python ../../action.py sweep export sweeps/random/HPF.duckdb ndcg
    deps:
    - path: sweeps/random/HPF.duckdb
      hash: md5
      md5: 5fa7d368f79eb0f902c7a0a45d420012
      size: 8663040
    outs:
    - path: sweeps/random/HPF.csv
      hash: md5
      md5: 81913425f8aa047bb44c306dddadb63c
      size: 901
    - path: sweeps/random/HPF.json
      hash: md5
      md5: 9329b47125dc671a644528d22d27d726
      size: 231
  run-random-sweep-best-HPF:
    cmd: python ../../action.py generate --param-file=sweeps/random/HPF.json --test-part=-0
      --assignments=splits/random.duckdb --ratings=ratings.duckdb -o runs/random-sweep-best/HPF.duckdb
      HPF
    deps:
    - path: ../../codex/models/HPF.py
      hash: md5
      md5: c407b5a94b468225c08eb86a9642d513
      size: 266
    - path: ratings.duckdb
      hash: md5
      md5: a770a8e6c558a398515b74def824e7b8
      size: 2371584
    - path: splits/random.duckdb
      hash: md5
      md5: 0341a9b25f8c8d872957470e9f29df47
      size: 536576
    - path: sweeps/random/HPF.json
      hash: md5
      md5: 9329b47125dc671a644528d22d27d726
      size: 231
    outs:
    - path: runs/random-sweep-best/HPF.duckdb
      hash: md5
      md5: bdb63272fb959fcfd0b91d91ac0b6e8e
      size: 1323008

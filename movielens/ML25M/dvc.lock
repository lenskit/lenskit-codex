schema: '2.0'
stages:
  import-data:
    cmd: python ../import-ml.py ml-25m.zip
    deps:
    - path: ../import-ml.py
      hash: md5
      md5: 4af94250c13bdd7beff8235e442549c6
      size: 3732
    - path: ml-25m.zip
      hash: md5
      md5: 6b51fb2759a8657d3bfcbfc42b592ada
      size: 261978986
    outs:
    - path: ratings.duckdb
      hash: md5
      md5: 39db36eb36970ddb8a9d3f5c299e7c62
      size: 243019776
  import-ml-25m:
    cmd: python ../import-ml.py ml-25m.zip
    deps:
    - path: ../import-ml.py
      hash: md5
      md5: 30e3b5d3d15e7797637601877711c1ba
      size: 3648
    - path: ../ml-stats.sql
      hash: md5
      md5: b016dc983a2156e0712a846097a968e7
      size: 1307
    - path: ml-25m.zip
      hash: md5
      md5: 6b51fb2759a8657d3bfcbfc42b592ada
      size: 261978986
    outs:
    - path: ratings.duckdb
      hash: md5
      md5: 9463b4c41e34c62316f2518ffa78b1bd
      size: 299642880
  ml-25m-stats:
    cmd: python ../../scripts/duckdb-sql.py -d stats.duckdb ../ml-stats.sql
    deps:
    - path: ../ml-stats.sql
      hash: md5
      md5: bf09f212fabc98275ae949932889654c
      size: 1374
    - path: ratings.parquet
      hash: md5
      md5: 60a83d1b954209733419580cbfb6d27a
      size: 216741269
    outs:
    - path: stats.duckdb
      hash: md5
      md5: 6dcc1794a0e0d90e2cdeb756c84d55b1
      size: 5255168
  split-random:
    cmd: lenskit-codex split random.toml
    deps:
    - path: ../ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: random.toml
      hash: md5
      md5: 276ffa520abcf2243c9ffee115774a98
      size: 137
    params:
      ../../../config.toml:
        random.seed: 20240717
    outs:
    - path: random.duckdb
      hash: md5
      md5: eeaed1b39ae10a1f857f71871d334914
      size: 6828032
  sweep-random-Bias:
    cmd: python ../../action.py sweep run -p 0 --ratings=ratings.duckdb --assignments=splits/random.duckdb
      Bias sweeps/random/Bias.duckdb
    deps:
    - path: ../../codex/models/Bias.py
      hash: md5
      md5: e35eac761bf892674a6fb8570132e7f1
      size: 375
    - path: ratings.duckdb
      hash: md5
      md5: 9463b4c41e34c62316f2518ffa78b1bd
      size: 299642880
    - path: splits/random.duckdb
      hash: md5
      md5: 92e096f49f7567248cc05f3da698da1b
      size: 4730880
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/Bias.duckdb
      hash: md5
      md5: 018fda6c82ea8971420f3e8204f52972
      size: 1640771584
  sweep-random-BiasedMF-ALS:
    cmd: python ../../action.py sweep run -p 0 --ratings=ratings.duckdb --assignments=splits/random.duckdb
      BiasedMF-ALS sweeps/random/BiasedMF-ALS.duckdb
    deps:
    - path: ../../codex/models/BiasedMF_ALS.py
      hash: md5
      md5: 70b01ec78dc3f1c3d09190c032bc05a6
      size: 349
    - path: ratings.duckdb
      hash: md5
      md5: 9463b4c41e34c62316f2518ffa78b1bd
      size: 299642880
    - path: splits/random.duckdb
      hash: md5
      md5: 92e096f49f7567248cc05f3da698da1b
      size: 4730880
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/BiasedMF-ALS.duckdb
      hash: md5
      md5: f23ccaf82399e58af16688293249cdcd
      size: 693907456
  sweep-random-ImplicitMF-ALS:
    cmd: python ../../action.py sweep run -p 0 --ratings=ratings.duckdb --assignments=splits/random.duckdb
      ImplicitMF-ALS sweeps/random/ImplicitMF-ALS.duckdb
    deps:
    - path: ../../codex/models/ImplicitMF_ALS.py
      hash: md5
      md5: f88cb5bd1014e55b8c0d9a1650863c94
      size: 359
    - path: ratings.duckdb
      hash: md5
      md5: 9463b4c41e34c62316f2518ffa78b1bd
      size: 299642880
    - path: splits/random.duckdb
      hash: md5
      md5: 92e096f49f7567248cc05f3da698da1b
      size: 4730880
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/ImplicitMF-ALS.duckdb
      hash: md5
      md5: 205307fb3e4c44e96293cb6a4226941a
      size: 644362240
  sweep-random-IKNN-Explicit:
    cmd: python ../../action.py sweep run -p 0 --ratings=ratings.duckdb --assignments=splits/random.duckdb
      IKNN-Explicit sweeps/random/IKNN-Explicit.duckdb
    deps:
    - path: ../../codex/models/IKNN_Explicit.py
      hash: md5
      md5: d7b6a1734bea39997f94df4fa0c4900e
      size: 378
    - path: ratings.duckdb
      hash: md5
      md5: 9463b4c41e34c62316f2518ffa78b1bd
      size: 299642880
    - path: splits/random.duckdb
      hash: md5
      md5: 92e096f49f7567248cc05f3da698da1b
      size: 4730880
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/IKNN-Explicit.duckdb
      hash: md5
      md5: 9ba8ff13903ce1930b6615476b4b3279
      size: 278409216
  sweep-random-IKNN-Implicit:
    cmd: python ../../action.py sweep run -p 0 --ratings=ratings.duckdb --assignments=splits/random.duckdb
      IKNN-Implicit sweeps/random/IKNN-Implicit.duckdb
    deps:
    - path: ../../codex/models/IKNN_Implicit.py
      hash: md5
      md5: 3ca2f37d6c1983760fcd2ff03a0a57cb
      size: 363
    - path: ratings.duckdb
      hash: md5
      md5: 9463b4c41e34c62316f2518ffa78b1bd
      size: 299642880
    - path: splits/random.duckdb
      hash: md5
      md5: 92e096f49f7567248cc05f3da698da1b
      size: 4730880
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/random/IKNN-Implicit.duckdb
      hash: md5
      md5: 998ba5aa3fe3bef41fe099d62e306c55
      size: 259534848
  import:
    cmd: lenskit-codex movielens import --stat-sql=../ml-stats.sql ml-25m.zip
    deps:
    - path: ../ml-stats.sql
      hash: md5
      md5: b016dc983a2156e0712a846097a968e7
      size: 1307
    - path: ml-25m.zip
      hash: md5
      md5: 6b51fb2759a8657d3bfcbfc42b592ada
      size: 261978986
    outs:
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
  export-random-Bias:
    cmd: python ../../action.py sweep export sweeps/random/Bias.duckdb rmse
    deps:
    - path: sweeps/random/Bias.duckdb
      hash: md5
      md5: 4c490b5905b2d0533d1d533309738c8c
      size: 325332992
    outs:
    - path: sweeps/random/Bias.csv
      hash: md5
      md5: 55d299af0141b40faec4d993b9fb0faa
      size: 1956
    - path: sweeps/random/Bias.json
      hash: md5
      md5: ddab8d63c37534ded4e02319ef9dfbe1
      size: 319
  export-random-BiasedMF-ALS:
    cmd: python ../../action.py sweep export sweeps/random/BiasedMF-ALS.duckdb rmse
    deps:
    - path: sweeps/random/BiasedMF-ALS.duckdb
      hash: md5
      md5: f23ccaf82399e58af16688293249cdcd
      size: 693907456
    outs:
    - path: sweeps/random/BiasedMF-ALS.csv
      hash: md5
      md5: d0eb24e4d872135aad92ae2d6f7d878e
      size: 3969
    - path: sweeps/random/BiasedMF-ALS.json
      hash: md5
      md5: 61e201bce782d532575b29a429c200b4
      size: 306
  export-random-ImplicitMF-ALS:
    cmd: python ../../action.py sweep export sweeps/random/ImplicitMF-ALS.duckdb ndcg
    deps:
    - path: sweeps/random/ImplicitMF-ALS.duckdb
      hash: md5
      md5: 205307fb3e4c44e96293cb6a4226941a
      size: 644362240
    outs:
    - path: sweeps/random/ImplicitMF-ALS.csv
      hash: md5
      md5: 5d7ce047e4af9faf18d8fc05249fb2b0
      size: 2720
    - path: sweeps/random/ImplicitMF-ALS.json
      hash: md5
      md5: c980cc8e82bef90506dc3e0f7b141737
      size: 248
  export-random-IKNN-Explicit:
    cmd: python ../../action.py sweep export sweeps/random/IKNN-Explicit.duckdb rmse
    deps:
    - path: sweeps/random/IKNN-Explicit.duckdb
      hash: md5
      md5: 9ba8ff13903ce1930b6615476b4b3279
      size: 278409216
    outs:
    - path: sweeps/random/IKNN-Explicit.csv
      hash: md5
      md5: a52c4e97875827086f349c713f25e636
      size: 1619
    - path: sweeps/random/IKNN-Explicit.json
      hash: md5
      md5: bbdd074bbfd4d9d22490a766a7d5d944
      size: 307
  export-random-IKNN-Implicit:
    cmd: python ../../action.py sweep export sweeps/random/IKNN-Implicit.duckdb ndcg
    deps:
    - path: sweeps/random/IKNN-Implicit.duckdb
      hash: md5
      md5: 998ba5aa3fe3bef41fe099d62e306c55
      size: 259534848
    outs:
    - path: sweeps/random/IKNN-Implicit.csv
      hash: md5
      md5: 3ca156ec2f3525992fa533cf4cd96036
      size: 1087
    - path: sweeps/random/IKNN-Implicit.json
      hash: md5
      md5: 2438dd00a9e31a53e669696a6eb9e119
      size: 246
  run-random-default-Bias:
    cmd: python ../../action.py generate --default --test-part=-0 --assignments=splits/random.duckdb
      --ratings=ratings.duckdb -o runs/random-default/Bias.duckdb Bias
    deps:
    - path: ../../codex/models/Bias.py
      hash: md5
      md5: e35eac761bf892674a6fb8570132e7f1
      size: 375
    - path: ratings.duckdb
      hash: md5
      md5: 9463b4c41e34c62316f2518ffa78b1bd
      size: 299642880
    - path: splits/random.duckdb
      hash: md5
      md5: 92e096f49f7567248cc05f3da698da1b
      size: 4730880
    outs:
    - path: runs/random-default/Bias.duckdb
      hash: md5
      md5: 4a526a8b67225870d08ae949cc048145
      size: 105132032
  run-random-sweep-best-Bias:
    cmd: python ../../action.py generate --param-file=sweeps/random/Bias.json --test-part=-0
      --assignments=splits/random.duckdb --ratings=ratings.duckdb -o runs/random-sweep-best/Bias.duckdb
      Bias
    deps:
    - path: ../../codex/models/Bias.py
      hash: md5
      md5: e35eac761bf892674a6fb8570132e7f1
      size: 375
    - path: ratings.duckdb
      hash: md5
      md5: 9463b4c41e34c62316f2518ffa78b1bd
      size: 299642880
    - path: splits/random.duckdb
      hash: md5
      md5: 92e096f49f7567248cc05f3da698da1b
      size: 4730880
    - path: sweeps/random/Bias.json
      hash: md5
      md5: ddab8d63c37534ded4e02319ef9dfbe1
      size: 319
    outs:
    - path: runs/random-sweep-best/Bias.duckdb
      hash: md5
      md5: 409d11c6c47edb0526c353a3a8a5a0fc
      size: 105132032
  run-random-default-Popular:
    cmd: python ../../action.py generate --default --test-part=-0 --assignments=splits/random.duckdb
      --ratings=ratings.duckdb -o runs/random-default/Popular.duckdb Popular
    deps:
    - path: ../../codex/models/Popular.py
      hash: md5
      md5: 6e8ad3acdea3e26808c9796209279f35
      size: 224
    - path: ratings.duckdb
      hash: md5
      md5: 9463b4c41e34c62316f2518ffa78b1bd
      size: 299642880
    - path: splits/random.duckdb
      hash: md5
      md5: 92e096f49f7567248cc05f3da698da1b
      size: 4730880
    outs:
    - path: runs/random-default/Popular.duckdb
      hash: md5
      md5: c20bca8019be4ef1dcebdebeaeebcb86
      size: 93335552
  run-random-default-BiasedMF-ALS:
    cmd: python ../../action.py generate --default --test-part=-0 --assignments=splits/random.duckdb
      --ratings=ratings.duckdb -o runs/random-default/BiasedMF-ALS.duckdb BiasedMF-ALS
    deps:
    - path: ../../codex/models/BiasedMF_ALS.py
      hash: md5
      md5: 70b01ec78dc3f1c3d09190c032bc05a6
      size: 349
    - path: ratings.duckdb
      hash: md5
      md5: 9463b4c41e34c62316f2518ffa78b1bd
      size: 299642880
    - path: splits/random.duckdb
      hash: md5
      md5: 92e096f49f7567248cc05f3da698da1b
      size: 4730880
    outs:
    - path: runs/random-default/BiasedMF-ALS.duckdb
      hash: md5
      md5: 6a815d81545e0c4dc299fd1b4b69eb14
      size: 104607744
  run-random-sweep-best-BiasedMF-ALS:
    cmd: python ../../action.py generate --param-file=sweeps/random/BiasedMF-ALS.json
      --test-part=-0 --assignments=splits/random.duckdb --ratings=ratings.duckdb -o
      runs/random-sweep-best/BiasedMF-ALS.duckdb BiasedMF-ALS
    deps:
    - path: ../../codex/models/BiasedMF_ALS.py
      hash: md5
      md5: 70b01ec78dc3f1c3d09190c032bc05a6
      size: 349
    - path: ratings.duckdb
      hash: md5
      md5: 9463b4c41e34c62316f2518ffa78b1bd
      size: 299642880
    - path: splits/random.duckdb
      hash: md5
      md5: 92e096f49f7567248cc05f3da698da1b
      size: 4730880
    - path: sweeps/random/BiasedMF-ALS.json
      hash: md5
      md5: 61e201bce782d532575b29a429c200b4
      size: 306
    outs:
    - path: runs/random-sweep-best/BiasedMF-ALS.duckdb
      hash: md5
      md5: cf97d9a774a74f7cf100069204dda5d1
      size: 104869888
  run-random-default-ImplicitMF-ALS:
    cmd: python ../../action.py generate --default --test-part=-0 --assignments=splits/random.duckdb
      --ratings=ratings.duckdb -o runs/random-default/ImplicitMF-ALS.duckdb ImplicitMF-ALS
    deps:
    - path: ../../codex/models/ImplicitMF_ALS.py
      hash: md5
      md5: f88cb5bd1014e55b8c0d9a1650863c94
      size: 359
    - path: ratings.duckdb
      hash: md5
      md5: 9463b4c41e34c62316f2518ffa78b1bd
      size: 299642880
    - path: splits/random.duckdb
      hash: md5
      md5: 92e096f49f7567248cc05f3da698da1b
      size: 4730880
    outs:
    - path: runs/random-default/ImplicitMF-ALS.duckdb
      hash: md5
      md5: 0ccc7686ffe856edc6ff2bead1620a90
      size: 93597696
  run-random-sweep-best-ImplicitMF-ALS:
    cmd: python ../../action.py generate --param-file=sweeps/random/ImplicitMF-ALS.json
      --test-part=-0 --assignments=splits/random.duckdb --ratings=ratings.duckdb -o
      runs/random-sweep-best/ImplicitMF-ALS.duckdb ImplicitMF-ALS
    deps:
    - path: ../../codex/models/ImplicitMF_ALS.py
      hash: md5
      md5: f88cb5bd1014e55b8c0d9a1650863c94
      size: 359
    - path: ratings.duckdb
      hash: md5
      md5: 9463b4c41e34c62316f2518ffa78b1bd
      size: 299642880
    - path: splits/random.duckdb
      hash: md5
      md5: 92e096f49f7567248cc05f3da698da1b
      size: 4730880
    - path: sweeps/random/ImplicitMF-ALS.json
      hash: md5
      md5: c980cc8e82bef90506dc3e0f7b141737
      size: 248
    outs:
    - path: runs/random-sweep-best/ImplicitMF-ALS.duckdb
      hash: md5
      md5: 4b4d06ae812972e7d02da63b4e07501e
      size: 95170560
  run-random-default-IKNN-Explicit:
    cmd: python ../../action.py generate --default --test-part=-0 --assignments=splits/random.duckdb
      --ratings=ratings.duckdb -o runs/random-default/IKNN-Explicit.duckdb IKNN-Explicit
    deps:
    - path: ../../codex/models/IKNN_Explicit.py
      hash: md5
      md5: d7b6a1734bea39997f94df4fa0c4900e
      size: 378
    - path: ratings.duckdb
      hash: md5
      md5: 9463b4c41e34c62316f2518ffa78b1bd
      size: 299642880
    - path: splits/random.duckdb
      hash: md5
      md5: 92e096f49f7567248cc05f3da698da1b
      size: 4730880
    outs:
    - path: runs/random-default/IKNN-Explicit.duckdb
      hash: md5
      md5: 922f88ecc15739df49ca0c38332a0ddd
      size: 103559168
  run-random-sweep-best-IKNN-Explicit:
    cmd: python ../../action.py generate --param-file=sweeps/random/IKNN-Explicit.json
      --test-part=-0 --assignments=splits/random.duckdb --ratings=ratings.duckdb -o
      runs/random-sweep-best/IKNN-Explicit.duckdb IKNN-Explicit
    deps:
    - path: ../../codex/models/IKNN_Explicit.py
      hash: md5
      md5: d7b6a1734bea39997f94df4fa0c4900e
      size: 378
    - path: ratings.duckdb
      hash: md5
      md5: 9463b4c41e34c62316f2518ffa78b1bd
      size: 299642880
    - path: splits/random.duckdb
      hash: md5
      md5: 92e096f49f7567248cc05f3da698da1b
      size: 4730880
    - path: sweeps/random/IKNN-Explicit.json
      hash: md5
      md5: bbdd074bbfd4d9d22490a766a7d5d944
      size: 307
    outs:
    - path: runs/random-sweep-best/IKNN-Explicit.duckdb
      hash: md5
      md5: 16673391828b328276e351e3628a7f45
      size: 103559168
  run-random-default-UKNN-Implicit:
    cmd: lenskit-codex generate --default --test-part=-0 --assignments=splits/random.duckdb
      --ratings=ratings.duckdb -o runs/random-default/UKNN-Implicit UKNN-Implicit
    deps:
    - path: ../../codex/models/UKNN_Implicit.py
      hash: md5
      md5: 1ecc8007e1e350f966afe0f315aca861
      size: 362
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: splits/random.duckdb
      hash: md5
      md5: eeaed1b39ae10a1f857f71871d334914
      size: 6828032
    outs:
    - path: runs/random-default/UKNN-Implicit
      hash: md5
      md5: c89c011c87f0fe010c2772c2cf74049c.dir
      size: 87539337
      nfiles: 35
  run-temporal-default-UKNN-Implicit:
    cmd: lenskit-codex generate --default --split=splits/temporal.toml --test-part=test
      -o runs/temporal-default/UKNN-Implicit UKNN-Implicit
    deps:
    - path: ../../models/UKNN-Implicit.toml
      hash: md5
      md5: a58a3e7ad35116cb737f895bab17c799
      size: 152
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: splits/temporal.toml
      hash: md5
      md5: 2fdcc833a811d24cbbf8a142383f2df9
      size: 116
    outs:
    - path: runs/temporal-default/UKNN-Implicit
      hash: md5
      md5: 909b859e1519769eb2a3952c91c8bb9a.dir
      size: 3236969
      nfiles: 11
  run-temporal-default-ImplicitMF-ALS:
    cmd: lenskit-codex generate --default --split=splits/temporal.toml -o runs/temporal-default/ImplicitMF-ALS
      ImplicitMF-ALS
    deps:
    - path: ../../models/ImplicitMF-ALS.toml
      hash: md5
      md5: e3b0120ab5820325128a9eb87d851e7f
      size: 151
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: splits/temporal.toml
      hash: md5
      md5: 87523b2fd38538af0f237526e659c8d3
      size: 128
    outs:
    - path: runs/temporal-default/ImplicitMF-ALS
      hash: md5
      md5: cf7ee0bd2e6a0672f069366b3e861d13.dir
      size: 257040
      nfiles: 3
  run-temporal-default-BiasedMF-ALS:
    cmd: lenskit-codex generate --default --split=splits/temporal.toml -o runs/temporal-default/BiasedMF-ALS
      BiasedMF-ALS
    deps:
    - path: ../../models/BiasedMF-ALS.toml
      hash: md5
      md5: d6a4dc846449f893683a847940f9c176
      size: 166
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: splits/temporal.toml
      hash: md5
      md5: 87523b2fd38538af0f237526e659c8d3
      size: 128
    outs:
    - path: runs/temporal-default/BiasedMF-ALS
      hash: md5
      md5: 48308e0126332cd43ff4a177eed57b39.dir
      size: 423517
      nfiles: 3
  sweep-temporal-ImplicitMF-ALS:
    cmd: lenskit-codex sweep run --ds-name=ML25M --split=splits/temporal.toml --test-part=valid
      ImplicitMF-ALS sweeps/temporal/ImplicitMF-ALS
    deps:
    - path: ../../models/ImplicitMF-ALS.toml
      hash: md5
      md5: e3b0120ab5820325128a9eb87d851e7f
      size: 151
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: splits/temporal.toml
      hash: md5
      md5: 87523b2fd38538af0f237526e659c8d3
      size: 128
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/temporal/ImplicitMF-ALS
      hash: md5
      md5: 78f64747b01ee3e774cacaeb6dec3fd4.dir
      size: 439709722
      nfiles: 244
  export-temporal-ImplicitMF-ALS:
    cmd: lenskit-codex sweep export -o sweeps/temporal/ImplicitMF-ALS.json sweeps/temporal/ImplicitMF-ALS
      RBP
    deps:
    - path: sweeps/temporal/ImplicitMF-ALS
      hash: md5
      md5: 78f64747b01ee3e774cacaeb6dec3fd4.dir
      size: 439709722
      nfiles: 244
    outs:
    - path: sweeps/temporal/ImplicitMF-ALS.json
      hash: md5
      md5: 40121e1601e83b8ec78561035a166550
      size: 217
  run-temporal-sweep-best-ImplicitMF-ALS:
    cmd: lenskit-codex generate --param-file=sweeps/temporal/ImplicitMF-ALS.json --test-part=-0
      --split=splits/temporal.toml -o runs/temporal-sweep-best/ImplicitMF-ALS ImplicitMF-ALS
    deps:
    - path: ../../models/ImplicitMF-ALS.toml
      hash: md5
      md5: e3b0120ab5820325128a9eb87d851e7f
      size: 151
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: splits/temporal.toml
      hash: md5
      md5: 87523b2fd38538af0f237526e659c8d3
      size: 128
    - path: sweeps/temporal/ImplicitMF-ALS.json
      hash: md5
      md5: 40121e1601e83b8ec78561035a166550
      size: 217
    outs:
    - path: runs/temporal-sweep-best/ImplicitMF-ALS
      hash: md5
      md5: c220aef008f3af4359c19fe5a043959f.dir
      size: 245249
      nfiles: 3
  sweep-temporal-BiasedMF-ALS:
    cmd: lenskit-codex sweep run --ds-name=ML25M --split=splits/temporal.toml --test-part=valid
      BiasedMF-ALS sweeps/temporal/BiasedMF-ALS
    deps:
    - path: ../../models/BiasedMF-ALS.toml
      hash: md5
      md5: d6a4dc846449f893683a847940f9c176
      size: 166
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: splits/temporal.toml
      hash: md5
      md5: 87523b2fd38538af0f237526e659c8d3
      size: 128
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/temporal/BiasedMF-ALS
      hash: md5
      md5: 1e7369f2e3cc2643da76ab52d7c17db7.dir
      size: 494303147
      nfiles: 484
  export-temporal-BiasedMF-ALS:
    cmd: lenskit-codex sweep export -o sweeps/temporal/BiasedMF-ALS.json sweeps/temporal/BiasedMF-ALS
      RMSE
    deps:
    - path: sweeps/temporal/BiasedMF-ALS
      hash: md5
      md5: 1e7369f2e3cc2643da76ab52d7c17db7.dir
      size: 494303147
      nfiles: 484
    outs:
    - path: sweeps/temporal/BiasedMF-ALS.json
      hash: md5
      md5: a5d943a2b2a58844a9d4b991347ab963
      size: 276
  run-temporal-sweep-best-BiasedMF-ALS:
    cmd: lenskit-codex generate --param-file=sweeps/temporal/BiasedMF-ALS.json --test-part=-0
      --split=splits/temporal.toml -o runs/temporal-sweep-best/BiasedMF-ALS BiasedMF-ALS
    deps:
    - path: ../../models/BiasedMF-ALS.toml
      hash: md5
      md5: d6a4dc846449f893683a847940f9c176
      size: 166
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: splits/temporal.toml
      hash: md5
      md5: 87523b2fd38538af0f237526e659c8d3
      size: 128
    - path: sweeps/temporal/BiasedMF-ALS.json
      hash: md5
      md5: a5d943a2b2a58844a9d4b991347ab963
      size: 276
    outs:
    - path: runs/temporal-sweep-best/BiasedMF-ALS
      hash: md5
      md5: 0c38d0c3d4ae7e1d6ed785e1439592e6.dir
      size: 424048
      nfiles: 3
  sweep-temporal-HPF:
    cmd: lenskit-codex sweep run --ds-name=ML25M --split=splits/temporal.toml --test-part=valid
      HPF sweeps/temporal/HPF
    deps:
    - path: ../../models/HPF.toml
      hash: md5
      md5: 0b2c295f5f53e6c0e41cddc0f31b85b2
      size: 146
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: splits/temporal.toml
      hash: md5
      md5: 17df579e48f44e9f33b81b4520246231
      size: 116
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/temporal/HPF
      hash: md5
      md5: 514a9a19a867dab84e289e6bd47df840.dir
      size: 148724109
      nfiles: 84
  export-temporal-HPF:
    cmd: lenskit-codex sweep export -o sweeps/temporal/HPF.json sweeps/temporal/HPF
      RBP
    deps:
    - path: sweeps/temporal/HPF
      hash: md5
      md5: 514a9a19a867dab84e289e6bd47df840.dir
      size: 148724109
      nfiles: 84
    outs:
    - path: sweeps/temporal/HPF.json
      hash: md5
      md5: d95aa01b3c7de3d2db03fe0e5cbff1ee
      size: 206
  run-temporal-sweep-best-HPF:
    cmd: lenskit-codex generate --param-file=sweeps/temporal/HPF.json --split=splits/temporal.toml
      --test-part=-0 -o runs/temporal-sweep-best/HPF HPF
    deps:
    - path: ../../models/HPF.toml
      hash: md5
      md5: 0b2c295f5f53e6c0e41cddc0f31b85b2
      size: 146
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: splits/temporal.toml
      hash: md5
      md5: 17df579e48f44e9f33b81b4520246231
      size: 116
    - path: sweeps/temporal/HPF.json
      hash: md5
      md5: d95aa01b3c7de3d2db03fe0e5cbff1ee
      size: 206
    outs:
    - path: runs/temporal-sweep-best/HPF
      hash: md5
      md5: 4b53c33ef70c806dc7220b4d36071be4.dir
      size: 7781517
      nfiles: 19
  run-temporal-valid-default-UKNN-Implicit:
    cmd: lenskit-codex generate --default --split=splits/temporal.toml --test-part=valid
      -o runs/temporal-valid-default/UKNN-Implicit UKNN-Implicit
    deps:
    - path: ../../models/UKNN-Implicit.toml
      hash: md5
      md5: a58a3e7ad35116cb737f895bab17c799
      size: 152
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: splits/temporal.toml
      hash: md5
      md5: 17df579e48f44e9f33b81b4520246231
      size: 116
    outs:
    - path: runs/temporal-valid-default/UKNN-Implicit
      hash: md5
      md5: 63f7b3ace7dbf77c8c85082eb994023e.dir
      size: 2831285
      nfiles: 11
  sweep-temporal-IKNN-Implicit:
    cmd: lenskit-codex sweep run --ds-name=ML25M --split=splits/temporal.toml --test-part=valid
      IKNN-Implicit sweeps/temporal/IKNN-Implicit
    deps:
    - path: ../../models/IKNN-Implicit.toml
      hash: md5
      md5: 2bfec2d4beb12854e5e7d632f0fd6396
      size: 152
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: splits/temporal.toml
      hash: md5
      md5: 87523b2fd38538af0f237526e659c8d3
      size: 128
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/temporal/IKNN-Implicit
      hash: md5
      md5: d0d69323fa54b3bc354205362556ac1e.dir
      size: 166931917
      nfiles: 100
  export-temporal-IKNN-Implicit:
    cmd: lenskit-codex sweep export -o sweeps/temporal/IKNN-Implicit.json sweeps/temporal/IKNN-Implicit
      RBP
    deps:
    - path: sweeps/temporal/IKNN-Implicit
      hash: md5
      md5: d0d69323fa54b3bc354205362556ac1e.dir
      size: 166931917
      nfiles: 100
    outs:
    - path: sweeps/temporal/IKNN-Implicit.json
      hash: md5
      md5: 1c394aee581bcdc1de441d7ea48de29c
      size: 245
  run-temporal-sweep-best-IKNN-Implicit:
    cmd: lenskit-codex generate --param-file=sweeps/temporal/IKNN-Implicit.json --test-part=-0
      --split=splits/temporal.toml -o runs/temporal-sweep-best/IKNN-Implicit IKNN-Implicit
    deps:
    - path: ../../models/IKNN-Implicit.toml
      hash: md5
      md5: 2bfec2d4beb12854e5e7d632f0fd6396
      size: 152
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: splits/temporal.toml
      hash: md5
      md5: 87523b2fd38538af0f237526e659c8d3
      size: 128
    - path: sweeps/temporal/IKNN-Implicit.json
      hash: md5
      md5: 1c394aee581bcdc1de441d7ea48de29c
      size: 245
    outs:
    - path: runs/temporal-sweep-best/IKNN-Implicit
      hash: md5
      md5: 377b070177b0da5045d00e5dc6f76d95.dir
      size: 247165
      nfiles: 3
  sweep-temporal-UKNN-Implicit:
    cmd: lenskit-codex sweep run --ds-name=ML25M --split=splits/temporal.toml --test-part=valid
      UKNN-Implicit sweeps/temporal/UKNN-Implicit
    deps:
    - path: ../../models/UKNN-Implicit.toml
      hash: md5
      md5: a58a3e7ad35116cb737f895bab17c799
      size: 152
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: splits/temporal.toml
      hash: md5
      md5: 17df579e48f44e9f33b81b4520246231
      size: 116
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/temporal/UKNN-Implicit
      hash: md5
      md5: f5ac786d4f528250fb362ade4c19f657.dir
      size: 170906230
      nfiles: 100
  export-temporal-UKNN-Implicit:
    cmd: lenskit-codex sweep export -o sweeps/temporal/UKNN-Implicit.json sweeps/temporal/UKNN-Implicit
      RBP
    deps:
    - path: sweeps/temporal/UKNN-Implicit
      hash: md5
      md5: f5ac786d4f528250fb362ade4c19f657.dir
      size: 170906230
      nfiles: 100
    outs:
    - path: sweeps/temporal/UKNN-Implicit.json
      hash: md5
      md5: 440f92a82254f60fef2be6729523537d
      size: 245
  run-temporal-sweep-best-UKNN-Implicit:
    cmd: lenskit-codex generate --param-file=sweeps/temporal/UKNN-Implicit.json --split=splits/temporal.toml
      --test-part=-0 -o runs/temporal-sweep-best/UKNN-Implicit UKNN-Implicit
    deps:
    - path: ../../models/UKNN-Implicit.toml
      hash: md5
      md5: a58a3e7ad35116cb737f895bab17c799
      size: 152
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: splits/temporal.toml
      hash: md5
      md5: 17df579e48f44e9f33b81b4520246231
      size: 116
    - path: sweeps/temporal/UKNN-Implicit.json
      hash: md5
      md5: 440f92a82254f60fef2be6729523537d
      size: 245
    outs:
    - path: runs/temporal-sweep-best/UKNN-Implicit
      hash: md5
      md5: 21826f2f89a7bda2038825a96db85baa.dir
      size: 7675839
      nfiles: 19
  sweep-temporal-IKNN-Explicit:
    cmd: lenskit-codex sweep run --ds-name=ML25M --split=splits/temporal.toml --test-part=valid
      IKNN-Explicit sweeps/temporal/IKNN-Explicit
    deps:
    - path: ../../models/IKNN-Explicit.toml
      hash: md5
      md5: cb85c79c654c8e897015241c0f670c0d
      size: 169
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: splits/temporal.toml
      hash: md5
      md5: 87523b2fd38538af0f237526e659c8d3
      size: 128
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/temporal/IKNN-Explicit
      hash: md5
      md5: 1db9b06803291d94a8e5157e0434eff4.dir
      size: 207616016
      nfiles: 196
  export-temporal-IKNN-Explicit:
    cmd: lenskit-codex sweep export -o sweeps/temporal/IKNN-Explicit.json sweeps/temporal/IKNN-Explicit
      RMSE
    deps:
    - path: sweeps/temporal/IKNN-Explicit
      hash: md5
      md5: 1db9b06803291d94a8e5157e0434eff4.dir
      size: 207616016
      nfiles: 196
    outs:
    - path: sweeps/temporal/IKNN-Explicit.json
      hash: md5
      md5: 3cb112efc01b3a360a2c0a32b97d7716
      size: 301
  run-temporal-valid-default-Bias:
    cmd: lenskit-codex generate --default --split=splits/temporal.toml --test-part=valid
      -o runs/temporal-valid-default/Bias Bias
    deps:
    - path: ../../models/Bias.toml
      hash: md5
      md5: 97f305e8c04fb52cff715d59711b5eed
      size: 146
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: splits/temporal.toml
      hash: md5
      md5: 87523b2fd38538af0f237526e659c8d3
      size: 128
    outs:
    - path: runs/temporal-valid-default/Bias
      hash: md5
      md5: 58febf941f1dd1fbbaaafd096d6f4750.dir
      size: 5447582
      nfiles: 19
  run-temporal-default-IKNN-Implicit:
    cmd: lenskit-codex generate --default --split=splits/temporal.toml -o runs/temporal-default/IKNN-Implicit
      IKNN-Implicit
    deps:
    - path: ../../models/IKNN-Implicit.toml
      hash: md5
      md5: 2bfec2d4beb12854e5e7d632f0fd6396
      size: 152
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: splits/temporal.toml
      hash: md5
      md5: 87523b2fd38538af0f237526e659c8d3
      size: 128
    outs:
    - path: runs/temporal-default/IKNN-Implicit
      hash: md5
      md5: fa79ca2f5d65dbc3021717b6548c4e01.dir
      size: 248436
      nfiles: 3
  run-temporal-sweep-best-IKNN-Explicit:
    cmd: lenskit-codex generate --param-file=sweeps/temporal/IKNN-Explicit.json --split=splits/temporal.toml
      --test-part=-0 -o runs/temporal-sweep-best/IKNN-Explicit IKNN-Explicit
    deps:
    - path: ../../models/IKNN-Explicit.toml
      hash: md5
      md5: cb85c79c654c8e897015241c0f670c0d
      size: 169
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: splits/temporal.toml
      hash: md5
      md5: 87523b2fd38538af0f237526e659c8d3
      size: 128
    - path: sweeps/temporal/IKNN-Explicit.json
      hash: md5
      md5: 3cb112efc01b3a360a2c0a32b97d7716
      size: 301
    outs:
    - path: runs/temporal-sweep-best/IKNN-Explicit
      hash: md5
      md5: 8a2a72d79f440890be4c06ae6d0572d8.dir
      size: 14804708
      nfiles: 35
  run-temporal-valid-default-IKNN-Implicit:
    cmd: lenskit-codex generate --default --split=splits/temporal.toml --test-part=valid
      -o runs/temporal-valid-default/IKNN-Implicit IKNN-Implicit
    deps:
    - path: ../../models/IKNN-Implicit.toml
      hash: md5
      md5: 2bfec2d4beb12854e5e7d632f0fd6396
      size: 152
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: splits/temporal.toml
      hash: md5
      md5: 87523b2fd38538af0f237526e659c8d3
      size: 128
    outs:
    - path: runs/temporal-valid-default/IKNN-Implicit
      hash: md5
      md5: c5d855391b91b6b0bef2601cd134741f.dir
      size: 2774032
      nfiles: 11
  run-temporal-valid-default-IKNN-Explicit:
    cmd: lenskit-codex generate --default --split=splits/temporal.toml --test-part=valid
      -o runs/temporal-valid-default/IKNN-Explicit IKNN-Explicit
    deps:
    - path: ../../models/IKNN-Explicit.toml
      hash: md5
      md5: cb85c79c654c8e897015241c0f670c0d
      size: 169
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: splits/temporal.toml
      hash: md5
      md5: 87523b2fd38538af0f237526e659c8d3
      size: 128
    outs:
    - path: runs/temporal-valid-default/IKNN-Explicit
      hash: md5
      md5: a73edebc54cf81f0e5a8223e0b97f91f.dir
      size: 5865542
      nfiles: 19
  run-temporal-default-Bias:
    cmd: lenskit-codex generate --default --split=splits/temporal.toml -o runs/temporal-default/Bias
      Bias
    deps:
    - path: ../../models/Bias.toml
      hash: md5
      md5: 97f305e8c04fb52cff715d59711b5eed
      size: 146
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: splits/temporal.toml
      hash: md5
      md5: 87523b2fd38538af0f237526e659c8d3
      size: 128
    outs:
    - path: runs/temporal-default/Bias
      hash: md5
      md5: 832701c330e422219b6c4d8c35db16e3.dir
      size: 441176
      nfiles: 3
  sweep-temporal-Bias:
    cmd: lenskit-codex sweep run --ds-name=ML25M --split=splits/temporal.toml --test-part=valid
      Bias sweeps/temporal/Bias
    deps:
    - path: ../../models/Bias.toml
      hash: md5
      md5: 97f305e8c04fb52cff715d59711b5eed
      size: 146
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: splits/temporal.toml
      hash: md5
      md5: 87523b2fd38538af0f237526e659c8d3
      size: 128
    params:
      ../../config.toml:
        random.seed: 20240717
    outs:
    - path: sweeps/temporal/Bias
      hash: md5
      md5: 9104de272024ac8325577043373c5189.dir
      size: 208976894
      nfiles: 260
  export-temporal-Bias:
    cmd: lenskit-codex sweep export -o sweeps/temporal/Bias.json sweeps/temporal/Bias
      RMSE
    deps:
    - path: sweeps/temporal/Bias
      hash: md5
      md5: 9104de272024ac8325577043373c5189.dir
      size: 208976894
      nfiles: 260
    outs:
    - path: sweeps/temporal/Bias.json
      hash: md5
      md5: 7bb56b42411bf743c850619a206afe94
      size: 286
  run-temporal-sweep-best-Bias:
    cmd: lenskit-codex generate --param-file=sweeps/temporal/Bias.json --test-part=-0
      --split=splits/temporal.toml -o runs/temporal-sweep-best/Bias Bias
    deps:
    - path: ../../models/Bias.toml
      hash: md5
      md5: 97f305e8c04fb52cff715d59711b5eed
      size: 146
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: splits/temporal.toml
      hash: md5
      md5: 87523b2fd38538af0f237526e659c8d3
      size: 128
    - path: sweeps/temporal/Bias.json
      hash: md5
      md5: 7bb56b42411bf743c850619a206afe94
      size: 286
    outs:
    - path: runs/temporal-sweep-best/Bias
      hash: md5
      md5: aae925dcde59045a94af5772480d64eb.dir
      size: 442344
      nfiles: 3
  run-temporal-default-Popular:
    cmd: lenskit-codex generate --default --split=splits/temporal.toml -o runs/temporal-default/Popular
      Popular
    deps:
    - path: ../../models/Popular.toml
      hash: md5
      md5: c25817c7ea3901786434261d27af0aad
      size: 35
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: splits/temporal.toml
      hash: md5
      md5: 87523b2fd38538af0f237526e659c8d3
      size: 128
    outs:
    - path: runs/temporal-default/Popular
      hash: md5
      md5: 9c3ce0b2dd1f6ac877e38c477b227cd9.dir
      size: 233341
      nfiles: 3
  run-temporal-default-IKNN-Explicit:
    cmd: lenskit-codex generate --default --split=splits/temporal.toml --test-part=test
      -o runs/temporal-default/IKNN-Explicit IKNN-Explicit
    deps:
    - path: ../../models/IKNN-Explicit.toml
      hash: md5
      md5: cb85c79c654c8e897015241c0f670c0d
      size: 169
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: splits/temporal.toml
      hash: md5
      md5: 87523b2fd38538af0f237526e659c8d3
      size: 128
    outs:
    - path: runs/temporal-default/IKNN-Explicit
      hash: md5
      md5: 3b89bfae834ebd0264ca1d29b350cb82.dir
      size: 8960361
      nfiles: 19
  run-temporal-valid-default-ImplicitMF-ALS:
    cmd: lenskit-codex generate --default --split=splits/temporal.toml --test-part=valid
      -o runs/temporal-valid-default/ImplicitMF-ALS ImplicitMF-ALS
    deps:
    - path: ../../models/ImplicitMF-ALS.toml
      hash: md5
      md5: e3b0120ab5820325128a9eb87d851e7f
      size: 151
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: splits/temporal.toml
      hash: md5
      md5: 87523b2fd38538af0f237526e659c8d3
      size: 128
    outs:
    - path: runs/temporal-valid-default/ImplicitMF-ALS
      hash: md5
      md5: f43e1214e019e735887a862ab15d25f2.dir
      size: 2957037
      nfiles: 11
  run-temporal-valid-default-Popular:
    cmd: lenskit-codex generate --default --split=splits/temporal.toml --test-part=valid
      -o runs/temporal-valid-default/Popular Popular
    deps:
    - path: ../../models/Popular.toml
      hash: md5
      md5: c25817c7ea3901786434261d27af0aad
      size: 35
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: splits/temporal.toml
      hash: md5
      md5: 87523b2fd38538af0f237526e659c8d3
      size: 128
    outs:
    - path: runs/temporal-valid-default/Popular
      hash: md5
      md5: d89da420b392dd95d6a134f076a04101.dir
      size: 628760
      nfiles: 11
  collect-metrics:
    cmd: lenskit-codex collect metrics run-metrics.duckdb --view-script=../ml-run-metrics.sql
      runs
    outs:
    - path: run-metrics.duckdb
      hash: md5
      md5: c2a8970f70fa35e84daa208593b39b5a
      size: 274432
  run-temporal-valid-default-BiasedMF-ALS:
    cmd: lenskit-codex generate --default --split=splits/temporal.toml --test-part=valid
      -o runs/temporal-valid-default/BiasedMF-ALS BiasedMF-ALS
    deps:
    - path: ../../models/BiasedMF-ALS.toml
      hash: md5
      md5: d6a4dc846449f893683a847940f9c176
      size: 166
    - path: ratings.duckdb
      hash: md5
      md5: dc37049fc7987e8f26bda61eca420bce
      size: 298856448
    - path: splits/temporal.toml
      hash: md5
      md5: 87523b2fd38538af0f237526e659c8d3
      size: 128
    outs:
    - path: runs/temporal-valid-default/BiasedMF-ALS
      hash: md5
      md5: d1ffe022c55d2644822d5fcfa2ad8817.dir
      size: 5847959
      nfiles: 19
